{
  "version": 3,
  "sources": ["../src/core/i18n-toggle.js", "../src/core/i18n.js", "../src/features/dynamic-i18n.js", "../src/features/doit.js", "../src/index.js"],
  "sourcesContent": ["// src/core/i18n-toggle.js\r\nlet _inited = false;\r\nconst LANG_STORAGE_KEY = \"preferredLang\";\r\nconst LANGS = [\r\n  { code: \"en\", label: \"English\", htmlLang: \"en-CA\" },\r\n  { code: \"fr\", label: \"Fran\u00E7ais\", htmlLang: \"fr-CA\" },\r\n];\r\n\r\nconst normalize = (v) =>\r\n  String(v || \"en\").toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\nexport function getCurrentLang() {\r\n  try {\r\n    return normalize(localStorage.getItem(LANG_STORAGE_KEY));\r\n  } catch {\r\n    return \"en\";\r\n  }\r\n}\r\n\r\nfunction setDocumentLang(code) {\r\n  const c = normalize(code);\r\n  document.documentElement.setAttribute(\"data-lang\", c);\r\n  document.documentElement.setAttribute(\"lang\", c === \"fr\" ? \"fr-CA\" : \"en-CA\");\r\n}\r\n\r\nexport async function setLanguage(lang, { notifyAlways = false } = {}) {\r\n  const next = normalize(lang);\r\n  const current = document.documentElement.getAttribute(\"data-lang\") || \"en\";\r\n\r\n  try {\r\n    localStorage.setItem(LANG_STORAGE_KEY, next);\r\n  } catch {}\r\n\r\n  if (current !== next) setDocumentLang(next);\r\n\r\n  // Update your DOM-tag translator first\r\n  if (window.ThriveI18n?.setLangNoReload) {\r\n    try {\r\n      await window.ThriveI18n.setLangNoReload(next);\r\n    } catch (err) {\r\n      console.error(\"[i18n] setLangNoReload failed:\", err);\r\n    }\r\n  }\r\n\r\n  // NEW: i18next bridge (for React header/footer/body)\r\n  if (window.i18next?.changeLanguage) {\r\n    try {\r\n      await window.i18next.changeLanguage(next);\r\n    } catch (err) {\r\n      console.warn(\"[i18n] i18next.changeLanguage failed:\", err);\r\n    }\r\n  }\r\n\r\n  if (notifyAlways || current !== next) {\r\n    window.dispatchEvent(\r\n      new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n    );\r\n  }\r\n}\r\n\r\n// ---------- DOM: toggle button ----------\r\nfunction findNav() {\r\n  return document.querySelector(\".nav.navbar-nav\");\r\n}\r\n\r\nfunction renderToggle(currentLang) {\r\n  const nav = findNav();\r\n  if (!nav) return;\r\n\r\n  nav.querySelectorAll(\"li[data-lang-toggle]\").forEach((li) => li.remove());\r\n\r\n  const other = LANGS.find((l) => l.code !== currentLang);\r\n  if (!other) return;\r\n\r\n  const li = document.createElement(\"li\");\r\n  li.setAttribute(\"data-lang-toggle\", \"true\");\r\n\r\n  const a = document.createElement(\"a\");\r\n  a.href = \"#\";\r\n  a.setAttribute(\"role\", \"button\");\r\n  a.setAttribute(\"aria-label\", `Switch to ${other.label}`);\r\n  a.dataset.toggleLang = other.code;\r\n  a.textContent = other.label;\r\n\r\n  li.appendChild(a);\r\n  nav.appendChild(li);\r\n\r\n  if (!nav.dataset.langToggleBound) {\r\n    nav.addEventListener(\"click\", (e) => {\r\n      const target = e.target.closest(\"[data-toggle-lang]\");\r\n      if (!target) return;\r\n      e.preventDefault();\r\n      const lang = target.dataset.toggleLang;\r\n      setLanguage(lang, { notifyAlways: true });\r\n      renderToggle(lang);\r\n    });\r\n    nav.dataset.langToggleBound = \"1\";\r\n  }\r\n}\r\n\r\n// observe DOM in case Thrive replaces the header/nav after partial updates\r\nlet _disconnectMo = null;\r\nfunction startObserver() {\r\n  if (_disconnectMo) return;\r\n  const mo = new MutationObserver(() => {\r\n    const nav = findNav();\r\n    if (nav && !nav.querySelector(\"li[data-lang-toggle]\")) {\r\n      renderToggle(getCurrentLang());\r\n    }\r\n  });\r\n  mo.observe(document.documentElement, { childList: true, subtree: true });\r\n  _disconnectMo = () => mo.disconnect();\r\n}\r\n\r\n// ---------- public init ----------\r\nexport function initToggle() {\r\n  if (_inited) return;\r\n  _inited = true;\r\n\r\n  const current = getCurrentLang();\r\n  setDocumentLang(current);\r\n\r\n  // NEW: align React/i18next on first load too\r\n  if (window.i18next?.changeLanguage) {\r\n    window.i18next\r\n      .changeLanguage(current)\r\n      .catch((e) =>\r\n        console.warn(\"[i18n] initial i18next.changeLanguage failed:\", e)\r\n      );\r\n  }\r\n\r\n  // Fire once so any dynamic listeners re-render\r\n  window.dispatchEvent(\r\n    new CustomEvent(\"langchange\", { detail: { lang: current } })\r\n  );\r\n\r\n  const ready = () => {\r\n    renderToggle(current);\r\n    startObserver();\r\n  };\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", ready, { once: true });\r\n  } else {\r\n    ready();\r\n  }\r\n}\r\n\r\n// // src/core/i18n-toggle.js\r\n// let _inited = false;\r\n// const LANG_STORAGE_KEY = \"preferredLang\";\r\n// const LANGS = [\r\n//   { code: \"en\", label: \"English\", htmlLang: \"en-CA\" },\r\n//   { code: \"fr\", label: \"Fran\u00E7ais\", htmlLang: \"fr-CA\" },\r\n// ];\r\n\r\n// // ---------- small utils ----------\r\n// const normalize = (v) =>\r\n//   String(v || \"en\").toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\n// export function getCurrentLang() {\r\n//   try {\r\n//     return normalize(localStorage.getItem(LANG_STORAGE_KEY));\r\n//   } catch {\r\n//     return \"en\";\r\n//   }\r\n// }\r\n\r\n// function setDocumentLang(code) {\r\n//   const c = normalize(code);\r\n//   document.documentElement.setAttribute(\"data-lang\", c);\r\n//   document.documentElement.setAttribute(\"lang\", c === \"fr\" ? \"fr-CA\" : \"en-CA\");\r\n// }\r\n\r\n// export async function setLanguage(lang, { notifyAlways = false } = {}) {\r\n//   const next = normalize(lang);\r\n//   const current = document.documentElement.getAttribute(\"data-lang\") || \"en\";\r\n\r\n//   // persist\r\n//   try {\r\n//     localStorage.setItem(LANG_STORAGE_KEY, next);\r\n//   } catch {}\r\n\r\n//   if (current !== next) setDocumentLang(next);\r\n\r\n//   // optional: if you have a no-reload renderer\r\n//   if (window.ThriveI18n?.setLangNoReload) {\r\n//     try {\r\n//       await window.ThriveI18n.setLangNoReload(next);\r\n//     } catch (err) {\r\n//       console.error(\"[i18n] setLangNoReload failed:\", err);\r\n//     }\r\n//   }\r\n\r\n//   if (notifyAlways || current !== next) {\r\n//     window.dispatchEvent(\r\n//       new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n//     );\r\n//   }\r\n// }\r\n\r\n// // ---------- DOM: toggle button ----------\r\n// function findNav() {\r\n//   return document.querySelector(\".nav.navbar-nav\");\r\n// }\r\n\r\n// // create (or replace) the single toggle item\r\n// function renderToggle(currentLang) {\r\n//   const nav = findNav();\r\n//   if (!nav) return;\r\n\r\n//   // remove any previous toggles we added\r\n//   nav.querySelectorAll(\"li[data-lang-toggle]\").forEach((li) => li.remove());\r\n\r\n//   const other = LANGS.find((l) => l.code !== currentLang);\r\n//   if (!other) return;\r\n\r\n//   const li = document.createElement(\"li\");\r\n//   li.setAttribute(\"data-lang-toggle\", \"true\");\r\n\r\n//   const a = document.createElement(\"a\");\r\n//   a.href = \"#\";\r\n//   a.setAttribute(\"role\", \"button\");\r\n//   a.setAttribute(\"aria-label\", `Switch to ${other.label}`);\r\n//   a.dataset.toggleLang = other.code;\r\n//   a.textContent = other.label;\r\n\r\n//   li.appendChild(a);\r\n//   nav.appendChild(li);\r\n\r\n//   // one nav-level click handler (idempotent)\r\n//   if (!nav.dataset.langToggleBound) {\r\n//     nav.addEventListener(\"click\", (e) => {\r\n//       const target = e.target.closest(\"[data-toggle-lang]\");\r\n//       if (!target) return;\r\n//       e.preventDefault();\r\n//       const lang = target.dataset.toggleLang;\r\n//       setLanguage(lang, { notifyAlways: true });\r\n//       renderToggle(lang); // refresh to show the other choice\r\n//     });\r\n//     nav.dataset.langToggleBound = \"1\";\r\n//   }\r\n// }\r\n\r\n// // observe DOM in case Thrive replaces the header/nav after partial updates\r\n// let _disconnectMo = null;\r\n// function startObserver() {\r\n//   if (_disconnectMo) return;\r\n//   const mo = new MutationObserver(() => {\r\n//     // if nav exists but toggle is missing, re-render\r\n//     const nav = findNav();\r\n//     if (nav && !nav.querySelector(\"li[data-lang-toggle]\")) {\r\n//       renderToggle(getCurrentLang());\r\n//     }\r\n//   });\r\n//   mo.observe(document.documentElement, { childList: true, subtree: true });\r\n//   _disconnectMo = () => mo.disconnect();\r\n// }\r\n\r\n// // ---------- public init ----------\r\n// export function initToggle() {\r\n//   if (_inited) return;\r\n//   _inited = true;\r\n\r\n//   // set base lang (attrs + event) once on boot\r\n//   const current = getCurrentLang();\r\n//   setDocumentLang(current);\r\n//   // notify others on boot (so dynamic renderers can run)\r\n//   window.dispatchEvent(\r\n//     new CustomEvent(\"langchange\", { detail: { lang: current } })\r\n//   );\r\n\r\n//   // mount the toggle\r\n//   const ready = () => {\r\n//     renderToggle(current);\r\n//     startObserver();\r\n//   };\r\n//   if (document.readyState === \"loading\") {\r\n//     document.addEventListener(\"DOMContentLoaded\", ready, { once: true });\r\n//   } else {\r\n//     ready();\r\n//   }\r\n// }\r\n", "// src/core/i18n.js\r\nlet state = {\r\n  lang: \"en\",\r\n  catalogs: {},\r\n  opts: null, // { manifestUrl, namespaces, observeMutations }\r\n  observer: null,\r\n  ready: false,\r\n  pending: [],\r\n  isApplying: false,\r\n};\r\n\r\nconst STORE_KEY = \"preferredLang\";\r\nconst ATTRS = new Set([\r\n  \"aria-label\",\r\n  \"title\",\r\n  \"alt\",\r\n  \"placeholder\",\r\n  \"value\",\r\n  \"data-i18n-text\",\r\n  \"data-content\",\r\n  \"data-original-title\",\r\n]);\r\n\r\n// ----------------- utilities -----------------\r\nconst normalizeLang = (v) =>\r\n  String(v || \"en\").toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\nfunction setDocumentLang(lang) {\r\n  const code = normalizeLang(lang);\r\n  document.documentElement.setAttribute(\"data-lang\", code);\r\n  document.documentElement.setAttribute(\r\n    \"lang\",\r\n    code === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n  );\r\n  // Broadcast to any listeners (toggle, dynamic renderers, etc.)\r\n  window.dispatchEvent(\r\n    new CustomEvent(\"langchange\", { detail: { lang: code } })\r\n  );\r\n}\r\n\r\nfunction firstTextNode(el) {\r\n  const w = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {\r\n    acceptNode(n) {\r\n      return n.nodeValue && n.nodeValue.trim() ? 1 : 2;\r\n    },\r\n  });\r\n  return w.nextNode();\r\n}\r\n\r\nfunction sameHTML(a, b) {\r\n  if (a === b) return true;\r\n  return (\r\n    a.replace(/\\u00A0/g, \"&nbsp;\").trim() ===\r\n    b.replace(/\\u00A0/g, \"&nbsp;\").trim()\r\n  );\r\n}\r\n\r\nfunction setFirstText(el, txt) {\r\n  const tn = firstTextNode(el);\r\n  if (tn) {\r\n    if (tn.nodeValue !== txt) tn.nodeValue = txt;\r\n  } else if (el.textContent !== txt) {\r\n    el.textContent = txt;\r\n  }\r\n}\r\n\r\n// ----------------- fetch caches -----------------\r\nconst jsonCache = new Map(); // url -> Promise(json)\r\nasync function loadJSON(url) {\r\n  if (jsonCache.has(url)) return jsonCache.get(url);\r\n  const p = fetch(url, { cache: \"no-store\" }).then((r) => {\r\n    if (!r.ok) throw new Error(`Failed to fetch ${url} (${r.status})`);\r\n    return r.json();\r\n  });\r\n  jsonCache.set(url, p);\r\n  return p;\r\n}\r\n\r\nlet _manifestP = null;\r\nfunction getManifest(url) {\r\n  if (_manifestP) return _manifestP;\r\n  _manifestP = loadJSON(url);\r\n  return _manifestP;\r\n}\r\n\r\nconst nsMapCache = new Map(); // ns -> Promise(mapArray)\r\nasync function getMap(manifestUrl, ns) {\r\n  if (nsMapCache.has(ns)) return nsMapCache.get(ns);\r\n  const p = (async () => {\r\n    const manifest = await getManifest(manifestUrl);\r\n    const file = manifest[`${ns}.map`];\r\n    if (!file) return null;\r\n    const base = new URL(manifestUrl, location.origin);\r\n    const url = new URL(file, base).toString();\r\n    return loadJSON(url);\r\n  })();\r\n  nsMapCache.set(ns, p);\r\n  return p;\r\n}\r\n\r\nconst catalogCache = new Map(); // `${ns}:${lang}` -> Promise(object)\r\nasync function loadCatalogs(manifestUrl, namespaces, lang) {\r\n  const manifest = await getManifest(manifestUrl);\r\n  const base = new URL(manifestUrl, location.origin);\r\n  const promises = (namespaces || []).map((ns) => {\r\n    const key = `${ns}:${lang}`;\r\n    if (catalogCache.has(key)) return catalogCache.get(key);\r\n    const rel = manifest[`${ns}.${lang}`];\r\n    if (!rel) return Promise.resolve({});\r\n    const url = new URL(rel, base).toString();\r\n    const p = loadJSON(url);\r\n    catalogCache.set(key, p);\r\n    return p;\r\n  });\r\n  const parts = await Promise.all(promises);\r\n  return Object.assign({}, ...parts);\r\n}\r\n\r\n// ----------------- map attach (idempotent) -----------------\r\nfunction parseAttrPairs(str) {\r\n  const map = new Map();\r\n  if (!str) return map;\r\n  for (const part of str\r\n    .split(\",\")\r\n    .map((s) => s.trim())\r\n    .filter(Boolean)) {\r\n    const [attr, key] = part.split(\":\").map((s) => s.trim());\r\n    if (attr && key) map.set(attr, key);\r\n  }\r\n  return map;\r\n}\r\n\r\nfunction stringifyAttrPairs(map) {\r\n  return Array.from(map.entries())\r\n    .sort(([a], [b]) => (a > b ? 1 : a < b ? -1 : 0))\r\n    .map(([attr, key]) => `${attr}:${key}`)\r\n    .join(\",\");\r\n}\r\n\r\nfunction attachMaps(entries, root = document) {\r\n  for (const e of entries || []) {\r\n    const { selector, type, attr, key } = e || {};\r\n    if (!selector || !key) continue;\r\n\r\n    const nodes = root.querySelectorAll(selector);\r\n    if (!nodes.length) continue;\r\n\r\n    nodes.forEach((el) => {\r\n      if (type === \"text\" || type === \"html\") {\r\n        if (el.getAttribute(\"data-i18n\") !== key)\r\n          el.setAttribute(\"data-i18n\", key);\r\n        if (type === \"html\") el.setAttribute(\"data-i18n-html\", \"true\");\r\n      } else if (type === \"attr\" && attr) {\r\n        const cur = parseAttrPairs(el.getAttribute(\"data-i18n-attr\"));\r\n        cur.set(attr, key); // overwrite per-attr (no dupes)\r\n        const next = stringifyAttrPairs(cur);\r\n        if (el.getAttribute(\"data-i18n-attr\") !== next)\r\n          el.setAttribute(\"data-i18n-attr\", next);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// ----------------- translation apply -----------------\r\nfunction applyToElement(el, tmap) {\r\n  // element text/html\r\n  const key = el.getAttribute(\"data-i18n\");\r\n  if (key && tmap[key] != null) {\r\n    const val = String(tmap[key]);\r\n    const wantsHtml = el.hasAttribute(\"data-i18n-html\");\r\n    const sig = key + \"\u00A7\" + val.length;\r\n\r\n    if (el.dataset.i18nApplied !== sig) {\r\n      if (wantsHtml) {\r\n        if (!sameHTML(el.innerHTML, val)) el.innerHTML = val;\r\n      } else {\r\n        const txt = val.replace(/&nbsp;/g, \"\\u00A0\");\r\n        const tn = firstTextNode(el);\r\n        const current = tn ? tn.nodeValue : el.textContent;\r\n        if (current !== txt) setFirstText(el, txt);\r\n      }\r\n      el.dataset.i18nApplied = sig;\r\n    }\r\n  }\r\n\r\n  // attributes\r\n  const raw = el.getAttribute(\"data-i18n-attr\");\r\n  if (!raw) return;\r\n\r\n  const pairs = parseAttrPairs(raw);\r\n  for (const [attr, k] of pairs) {\r\n    if (!ATTRS.has(attr)) continue;\r\n    if (tmap[k] == null) continue;\r\n\r\n    let next = String(tmap[k]);\r\n    if (attr === \"data-i18n-text\") {\r\n      const txt = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n      const tn = firstTextNode(el);\r\n      const current = tn ? tn.nodeValue : \"\";\r\n      if (current !== txt) {\r\n        if (tn) tn.nodeValue = txt;\r\n        else el.insertBefore(document.createTextNode(txt), el.firstChild);\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (\r\n      attr === \"title\" ||\r\n      attr === \"aria-label\" ||\r\n      attr === \"placeholder\" ||\r\n      attr === \"value\"\r\n    ) {\r\n      next = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n    }\r\n    if (el.getAttribute(attr) !== next) el.setAttribute(attr, next);\r\n  }\r\n}\r\n\r\nfunction applyAll(tmap, root = document) {\r\n  if (!tmap) return;\r\n  root\r\n    .querySelectorAll(\"[data-i18n],[data-i18n-attr]\")\r\n    .forEach((el) => applyToElement(el, tmap));\r\n}\r\n\r\n// ----------------- main load/apply -----------------\r\nasync function loadAndApply(lang) {\r\n  if (!state?.opts?.manifestUrl) {\r\n    throw new Error(\"ThriveI18n not initialized: missing opts.manifestUrl\");\r\n  }\r\n\r\n  state.lang = normalizeLang(lang);\r\n  try {\r\n    localStorage.setItem(STORE_KEY, state.lang);\r\n  } catch {}\r\n\r\n  const { manifestUrl, namespaces } = state.opts;\r\n\r\n  // Tag maps (idempotent)\r\n  const maps = await Promise.all(\r\n    namespaces.map((ns) => getMap(manifestUrl, ns))\r\n  );\r\n  for (const map of maps) {\r\n    if (Array.isArray(map)) attachMaps(map, document);\r\n  }\r\n\r\n  // Load catalogs then apply\r\n  const tmap = await loadCatalogs(manifestUrl, namespaces, state.lang);\r\n  state.catalogs = tmap;\r\n\r\n  state.isApplying = true;\r\n  try {\r\n    applyAll(tmap);\r\n  } finally {\r\n    state.isApplying = false;\r\n  }\r\n}\r\n\r\n// ----------------- mutations (partial reloads) -----------------\r\nlet _flushScheduled = false;\r\nconst _pendingRoots = new Set();\r\n\r\nfunction scheduleRoot(el) {\r\n  if (!el || el.nodeType !== 1) return;\r\n  _pendingRoots.add(el);\r\n  if (!_flushScheduled) {\r\n    _flushScheduled = true;\r\n    queueMicrotask(flushPending);\r\n  }\r\n}\r\n\r\nasync function flushPending() {\r\n  _flushScheduled = false;\r\n  if (!_pendingRoots.size) return;\r\n\r\n  const roots = Array.from(_pendingRoots);\r\n  _pendingRoots.clear();\r\n\r\n  state.isApplying = true;\r\n  try {\r\n    // Tag maps in these subtrees\r\n    for (const root of roots) {\r\n      for (const ns of state.opts.namespaces) {\r\n        const map = await getMap(state.opts.manifestUrl, ns);\r\n        if (map) attachMaps(map, root);\r\n      }\r\n    }\r\n    // Apply within those roots\r\n    for (const root of roots) applyAll(state.catalogs, root);\r\n  } finally {\r\n    state.isApplying = false;\r\n  }\r\n}\r\n\r\n// ----------------- public API -----------------\r\nexport async function initI18n(opts) {\r\n  state.opts = Object.assign(\r\n    { namespaces: [\"profile\"], observeMutations: true, manifestUrl: \"\" },\r\n    opts || {}\r\n  );\r\n  if (!state.opts.manifestUrl) throw new Error(\"manifestUrl required\");\r\n\r\n  // base lang\r\n  const initial = normalizeLang(localStorage.getItem(STORE_KEY) || \"en\");\r\n  setDocumentLang(initial);\r\n  await loadAndApply(initial);\r\n  state.ready = true;\r\n\r\n  // React to cross-tab changes\r\n  window.addEventListener(\"storage\", (e) => {\r\n    if (e.key === STORE_KEY && e.newValue && e.newValue !== state.lang) {\r\n      setLangNoReload(e.newValue);\r\n    }\r\n  });\r\n\r\n  // Observe for partial updates\r\n  if (state.opts.observeMutations) {\r\n    if (state.observer) state.observer.disconnect();\r\n    state.observer = new MutationObserver((records) => {\r\n      if (state.isApplying) return; // ignore our own writes\r\n      for (const m of records) {\r\n        if (m.type === \"childList\") {\r\n          m.addedNodes.forEach((n) => scheduleRoot(n));\r\n        } else if (m.type === \"attributes\") {\r\n          // if our flags got added on an element, refresh that element's subtree\r\n          scheduleRoot(m.target);\r\n        }\r\n      }\r\n    });\r\n    state.observer.observe(document.documentElement, {\r\n      subtree: true,\r\n      childList: true,\r\n      attributes: true,\r\n      attributeFilter: [\"data-i18n\", \"data-i18n-attr\", \"data-i18n-html\"],\r\n    });\r\n  }\r\n}\r\n\r\nexport async function setLangNoReload(next) {\r\n  // reflect intent immediately for CSS/a11y\r\n  setDocumentLang(next);\r\n\r\n  if (!state.ready) {\r\n    state.pending.push(next);\r\n    return;\r\n  }\r\n  await loadAndApply(next);\r\n}\r\n\r\nexport function t(key) {\r\n  return state.catalogs[key] ?? key;\r\n}\r\n\r\nexport function fmtNumber(n, o) {\r\n  return new Intl.NumberFormat(\r\n    state.lang === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n    o\r\n  ).format(n);\r\n}\r\n\r\nexport function fmtDate(d, o) {\r\n  const dt = d instanceof Date ? d : new Date(d);\r\n  return new Intl.DateTimeFormat(\r\n    state.lang === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n    o\r\n  ).format(dt);\r\n}\r\n\r\nexport function __debug() {\r\n  return {\r\n    lang: state.lang,\r\n    ready: state.ready,\r\n    hasObserver: !!state.observer,\r\n    namespaces: state.opts?.namespaces || [],\r\n    catalogKeys: Object.keys(state.catalogs).length,\r\n  };\r\n}\r\n\r\nexport function destroy() {\r\n  if (state.observer) state.observer.disconnect();\r\n  state = {\r\n    lang: \"en\",\r\n    catalogs: {},\r\n    opts: null,\r\n    observer: null,\r\n    ready: false,\r\n    pending: [],\r\n    isApplying: false,\r\n  };\r\n  _manifestP = null;\r\n  jsonCache.clear();\r\n  nsMapCache.clear();\r\n  catalogCache.clear();\r\n}\r\n", "// src/features/dynamic-i18n.js\r\n// Page-scoped renders, no MutationObserver (orchestrator/i18n will call runActive)\r\n\r\nconst PAGES = new Map(); // key: path string OR predicate fn -> render fn\r\nlet _debounceTimer = null;\r\n\r\nfunction getLocale() {\r\n  // single source of truth (set by i18n-toggle / i18n core)\r\n  const attr = document.documentElement.getAttribute(\"data-lang\");\r\n  return attr === \"fr\" ? \"fr\" : \"en\";\r\n}\r\n\r\n// ---------- parsers ----------\r\nfunction parseCommunityName(text) {\r\n  const m = String(text)\r\n    .trim()\r\n    .match(/^Invite people to join\\s+(?:the\\s+)?(.+?)(?:\\s+community)?$/i);\r\n  return m ? m[1].trim() : null;\r\n}\r\nfunction parseTotalCount(text) {\r\n  const m = String(text).match(/(\\d+)/);\r\n  return m ? { total: Number(m[1]) } : null;\r\n}\r\nfunction parseRangeLabel(text) {\r\n  const m = String(text)\r\n    .trim()\r\n    .match(/(\\d+)\\D+(\\d+)\\D+(\\d+)/);\r\n  if (!m) return null;\r\n  const [, start, end, total] = m.map(Number);\r\n  return { start, end, total };\r\n}\r\nfunction parseLastJoined(text) {\r\n  const m = String(text)\r\n    .trim()\r\n    .match(/(\\d+)\\s+(day|days|month|months|year|years)/i);\r\n  if (!m) return null;\r\n  const n = Number(m[1]);\r\n  const w = m[2].toLowerCase();\r\n  const unitKey = w.startsWith(\"day\")\r\n    ? \"day\"\r\n    : w.startsWith(\"month\")\r\n    ? \"month\"\r\n    : \"year\";\r\n  return { n, unitKey };\r\n}\r\n\r\n// ---------- localized strings ----------\r\nconst templates = {\r\n  contacts: {\r\n    en: ({ start, end, total }) => `Showing ${start} to ${end} of ${total}`,\r\n    fr: ({ start, end, total }) =>\r\n      `Affichage des \u00E9l\u00E9ments ${start} \u00E0 ${end} sur ${total}`,\r\n  },\r\n  lastJoined: {\r\n    en: ({ n, unit }) => `last person joined ${n} ${unit} ago`,\r\n    fr: ({ n, unit }) => `derni\u00E8re personne inscrite il y a ${n} ${unit}`,\r\n  },\r\n  totalCount: {\r\n    en: ({ total }) => `${total} total`,\r\n    fr: ({ total }) => `${total} au total`,\r\n  },\r\n  rangeWithTotal: {\r\n    en: ({ start, end, total }) => `${start} to ${end} of ${total} total`,\r\n    fr: ({ start, end, total }) => `${start} \u00E0 ${end} sur ${total} au total`,\r\n  },\r\n};\r\n\r\nconst UNITS = {\r\n  en: {\r\n    day: (n) => (n === 1 ? \"day\" : \"days\"),\r\n    month: (n) => (n === 1 ? \"month\" : \"months\"),\r\n    year: (n) => (n === 1 ? \"year\" : \"years\"),\r\n  },\r\n  fr: {\r\n    day: (n) => (n === 1 ? \"jour\" : \"jours\"),\r\n    month: () => \"mois\",\r\n    year: (n) => (n === 1 ? \"an\" : \"ans\"),\r\n  },\r\n};\r\n\r\n// ---------- registry ----------\r\n/**\r\n * Register a page renderer.\r\n * @param {string|((loc: Location)=>boolean)} when - path string (exact) or predicate\r\n * @param {()=>void} render - render function to run when active\r\n */\r\nexport function register(when, render) {\r\n  PAGES.set(when, render);\r\n}\r\n\r\nfunction isActive(when) {\r\n  const path = location.pathname.replace(/\\/+$/, \"\");\r\n  return typeof when === \"function\"\r\n    ? !!when(location)\r\n    : path === String(when).replace(/\\/+$/, \"\");\r\n}\r\n\r\nexport function activeRender() {\r\n  for (const [when, render] of PAGES) {\r\n    if (isActive(when)) return render;\r\n  }\r\n  return null;\r\n}\r\n\r\n/** Run the active page's render now (debounced to next tick). */\r\nexport function runActive() {\r\n  clearTimeout(_debounceTimer);\r\n  _debounceTimer = setTimeout(() => {\r\n    const render = activeRender();\r\n    if (render) render();\r\n  }, 0);\r\n}\r\n\r\n/** Initialize: run once on DOM ready and wire to langchanges. */\r\nexport function initDynamic() {\r\n  const boot = () => runActive();\r\n\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", boot, { once: true });\r\n  } else {\r\n    boot();\r\n  }\r\n\r\n  // Re-render current page when language changes\r\n  window.addEventListener(\"langchange\", () => runActive());\r\n}\r\n\r\n// ---------------- registered pages ----------------\r\n\r\n// /advisory-committee\r\nregister(\"/advisory-committee\", function renderAdvisoryCommitteeTitle() {\r\n  const el = document.querySelector(\"#PageTitleH1\");\r\n  if (!el) return;\r\n  const MAP = {\r\n    en: \"Meet the Resilient Futures Advisory Committee\",\r\n    fr: \"Rencontrez le comit\u00E9 consultatif de l\u2019initiative Un avenir r\u00E9silient\",\r\n  };\r\n  const next = MAP[getLocale()] || MAP.en;\r\n  if (el.textContent.trim() !== next) el.textContent = next;\r\n});\r\n\r\n// /sandboxmicrosite/communities/community-home/invite-community\r\nregister(\r\n  \"/sandboxmicrosite/communities/community-home/invite-community\",\r\n  function renderInviteCommunity() {\r\n    const host = document.querySelector(\r\n      \"#MainCopy_ctl04_InviteToCommunityLabel\"\r\n    );\r\n    if (!host) return;\r\n    const target = host.querySelector(\"strong\") || host;\r\n    const name =\r\n      parseCommunityName(target.textContent) || target.textContent.trim();\r\n    const loc = getLocale();\r\n    const next =\r\n      loc === \"fr\"\r\n        ? `Invitez des personnes \u00E0 rejoindre la communaut\u00E9 ${name}`\r\n        : `Invite people to join ${name}`;\r\n    if (target.textContent !== next) target.textContent = next;\r\n  }\r\n);\r\n\r\n// /profile/connections/contacts\r\nregister(\"/profile/connections/contacts\", function renderContacts() {\r\n  const el = document.querySelector(\"[id$='FindContacts_ShowingLabel']\");\r\n  if (!el) return;\r\n  const data = parseRangeLabel(el.textContent);\r\n  if (!data) return;\r\n  const t = templates.contacts[getLocale()] || templates.contacts.en;\r\n  const next = t(data);\r\n  if (el.textContent !== next) el.textContent = next;\r\n});\r\n\r\n// /profile/connections/communitiesnode\r\nregister(\r\n  \"/profile/connections/communitiesnode\",\r\n  function renderCommunitiesNode() {\r\n    const loc = getLocale();\r\n    const unitFn = UNITS[loc] || UNITS.en;\r\n    const fmtLast = templates.lastJoined[loc] || templates.lastJoined.en;\r\n\r\n    // A) \u201Clast person joined \u2026 ago\u201D\r\n    document\r\n      .querySelectorAll(\r\n        \"[id^='MainCopy_ctl29_lstCommunityList_lblLastUpdated_']\"\r\n      )\r\n      .forEach((el) => {\r\n        const data = parseLastJoined(el.textContent);\r\n        if (!data) return;\r\n        const unit = unitFn[data.unitKey](data.n);\r\n        const next = fmtLast({ n: data.n, unit });\r\n        if (el.textContent !== next) el.textContent = next;\r\n      });\r\n\r\n    // B) \u201C3 total\u201D\r\n    const totalEl = document.querySelector(\r\n      \"#MainCopy_ctl29_lbCommunityCount .Count\"\r\n    );\r\n    if (totalEl) {\r\n      const data = parseTotalCount(totalEl.textContent);\r\n      if (data) {\r\n        const fmtTotal = templates.totalCount[loc] || templates.totalCount.en;\r\n        const next = fmtTotal(data);\r\n        if (totalEl.textContent !== next) totalEl.textContent = next;\r\n      }\r\n    }\r\n\r\n    // C) \u201CNo Results Found\u201D (only when no result rows)\r\n    (function translateNoResultsSibling() {\r\n      const container = document.getElementById(\r\n        \"MainCopy_ctl29_AllCommunitiesContainer\"\r\n      );\r\n      if (!container) return;\r\n      const parent = container.parentElement || container;\r\n\r\n      const siblings = Array.from(parent.childNodes).filter(\r\n        (n) => n !== container\r\n      );\r\n\r\n      const hasResults = siblings.some(\r\n        (n) =>\r\n          n.nodeType === 1 &&\r\n          n.classList?.contains(\"row\") &&\r\n          n.classList?.contains(\"rowContainer\") &&\r\n          n.classList?.contains(\"community-list\")\r\n      );\r\n      if (hasResults) return;\r\n\r\n      const placeholder = siblings.find((n) => {\r\n        if (n.nodeType === 3)\r\n          return /^\\s*no\\s+results\\s+found\\s*$/i.test(n.textContent);\r\n        if (n.nodeType === 1)\r\n          return /^no\\s+results\\s+found$/i.test((n.textContent || \"\").trim());\r\n        return false;\r\n      });\r\n      if (!placeholder) return;\r\n\r\n      const msg = loc === \"fr\" ? \"Aucun r\u00E9sultat\" : \"No Results Found\";\r\n      if (placeholder.nodeType === 3) {\r\n        placeholder.textContent = \" \" + msg + \" \";\r\n      } else {\r\n        placeholder.textContent = msg;\r\n      }\r\n    })();\r\n  }\r\n);\r\n\r\n// /profile/connections/following-connections\r\nregister(\r\n  \"/profile/connections/following-connections\",\r\n  function renderFollowingConnections() {\r\n    const sel =\r\n      \"[id^='FollowedContent_'] .contributions-list-header .text-muted\";\r\n    const loc = getLocale();\r\n    document.querySelectorAll(sel).forEach((el) => {\r\n      const data = parseRangeLabel(el.textContent);\r\n      if (!data) return;\r\n      const t = templates.contacts[loc] || templates.contacts.en;\r\n      const next = t(data);\r\n      if (el.textContent !== next) el.textContent = next;\r\n    });\r\n  }\r\n);\r\n\r\n// /profile/contributions/contributions-list\r\nregister(\r\n  \"/profile/contributions/contributions-list\",\r\n  function renderContributionsList() {\r\n    const el = document.querySelector(\r\n      \"#MainCopy_ctl29_SearchResultStatus .ResultStatus.text-muted\"\r\n    );\r\n    if (!el) return;\r\n    const raw = el.textContent;\r\n    const data = parseRangeLabel(raw);\r\n    if (!data) return;\r\n\r\n    const loc = getLocale();\r\n    const hasWordTotal = /\\btotal\\b/i.test(raw);\r\n    const t = hasWordTotal\r\n      ? templates.rangeWithTotal[loc] || templates.rangeWithTotal.en\r\n      : templates.contacts[loc] || templates.contacts.en;\r\n\r\n    const next = t(data);\r\n    if (el.textContent !== next) el.textContent = next;\r\n  }\r\n);\r\n", "// src/features/doit.js\r\n// Utilities + WebForms hooks for Thrive i18n. No side effects on import.\r\n\r\nconst dbg = (m, o) => console.log(\"[i18n]\", m, o ?? \"\");\r\n\r\n// ----- optional helpers still used elsewhere -----\r\nexport function formatCount(keyBase, count) {\r\n  const k = count === 1 ? `${keyBase}.one` : `${keyBase}.other`;\r\n  const tpl =\r\n    window.ThriveI18n?.t?.(k) ||\r\n    window.ThriveI18n?.t?.(`${keyBase}.other`) ||\r\n    \"{count}\";\r\n  return String(tpl).replace(\"{count}\", String(count));\r\n}\r\nexport function updateCountAt(selector, keyBase) {\r\n  const el = document.querySelector(selector);\r\n  if (!el) return;\r\n  const m = (el.textContent || \"\").match(/\\d+/);\r\n  if (!m) return;\r\n  const n = parseInt(m[0], 10);\r\n  el.textContent = formatCount(keyBase, n);\r\n}\r\n\r\n// ----- internal url helpers -----\r\nfunction getParamCI(url, name) {\r\n  const target = name.toLowerCase();\r\n  for (const [k, v] of url.searchParams.entries()) {\r\n    if (k.toLowerCase() === target) return v;\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Decide which namespaces to load based on the current path + query.\r\n * Keep this as your single routing table.\r\n */\r\nexport function pickNamespaces(currentUrlOrPath = location.href) {\r\n  const url =\r\n    typeof currentUrlOrPath === \"string\"\r\n      ? new URL(currentUrlOrPath, location.origin)\r\n      : currentUrlOrPath instanceof URL\r\n      ? currentUrlOrPath\r\n      : new URL(location.href);\r\n\r\n  const rawPath = (url.pathname || \"/\").replace(/\\/{2,}/g, \"/\");\r\n  const path = rawPath.replace(/^\\/sandboxmicrosite(?=\\/|$)/i, \"\") || \"/\";\r\n  const section = (getParamCI(url, \"section\") || \"\").trim().toLowerCase();\r\n\r\n  // Header/footer are cheap and ubiquitous\r\n  const out = new Set([\"header\", \"footer\"]);\r\n\r\n  const add = (ns) => {\r\n    if (!ns) return;\r\n    (Array.isArray(ns) ? ns : [ns]).forEach((n) => n && out.add(n));\r\n  };\r\n\r\n  // Profile-ish\r\n  if (/^\\/profile(?:\\/|$)/i.test(path) || /^\\/people(?:\\/|$)/i.test(path))\r\n    add(\"profile\");\r\n  if (/^\\/profile\\/connections\\/contacts(?:\\/|$)/i.test(path))\r\n    add(\"connections\");\r\n  if (/^\\/profile\\/connections\\/communities(?:\\/|$)/i.test(path))\r\n    add(\"communities\");\r\n  if (/^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/i.test(path))\r\n    add(\"communitiesNode\");\r\n  if (/^\\/profile\\/connections\\/following-connections(?:\\/|$)/i.test(path))\r\n    add(\"following\");\r\n\r\n  if (/^\\/profile\\/contributions\\/contributions-summary(?:\\/|$)/i.test(path))\r\n    add(\"contribSummary\");\r\n  if (\r\n    /^\\/profile\\/contributions\\/contributions-achievements(?:\\/|$)/i.test(path)\r\n  )\r\n    add(\"contribAchievements\");\r\n  if (/^\\/profile\\/contributions\\/contributions-list(?:\\/|$)/i.test(path))\r\n    add(\"contribList\");\r\n\r\n  if (/^\\/profile\\/myaccount\\/changepassword(?:\\/|$)/i.test(path))\r\n    add(\"accountChangePassword\");\r\n  if (/^\\/profile\\/myaccount\\/mysignature(?:\\/|$)/i.test(path))\r\n    add(\"accountSignature\");\r\n  if (/^\\/profile\\/myaccount\\/inbox(?:\\/|$)/i.test(path)) add(\"accountInbox\");\r\n  if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/i.test(path)) {\r\n    const map = {\r\n      privacy: \"accountSettingsPrivacy\",\r\n      email: \"accountSettingsEmail\",\r\n      rssfeeds: \"accountSettingsRss\",\r\n      subscriptions: \"accountSettingsSubscriptions\",\r\n    };\r\n    add(map[section]);\r\n  }\r\n\r\n  // Directory\r\n  if (/^\\/network\\/members(?:\\/|$)/i.test(path)) add(\"networkMembers\");\r\n\r\n  // Top-level statics\r\n  if (/^\\/contactus(?:\\/|$)/i.test(path)) add(\"contactus\");\r\n  if (/^\\/login(?:\\/|$)/i.test(path)) add(\"login\");\r\n  if (/^\\/participate\\/postmessage(?:\\/|$)/i.test(path)) add(\"postMessage\");\r\n  if (/^\\/participate\\/add-new-entry(?:\\/|$)/i.test(path)) add(\"addLibrary\");\r\n  if (/^\\/events\\/calendar(?:\\/|$)/i.test(path)) add(\"eventsCalendar\");\r\n\r\n  // Communities\r\n  if (/^\\/communities\\/[^/]+(?:\\/|$)/i.test(path)) add(\"community\");\r\n  const inviteRe =\r\n    /^\\/communities(?:\\/community-home)?\\/invite-community(?:\\/digestviewer)?(?:\\/|$)/i;\r\n  if (inviteRe.test(path)) add(\"communityInvite\");\r\n  if (/^\\/communities\\/community-home\\/digestviewer(?:\\/|$)/i.test(path))\r\n    add(\"communityDigest\");\r\n  if (/^\\/communities\\/community-home\\/librarydocuments(?:\\/|$)/i.test(path))\r\n    add(\"communityLibrary\");\r\n  if (\r\n    /^\\/communities\\/community-home\\/recent-community-events(?:\\/|$)/i.test(\r\n      path\r\n    )\r\n  )\r\n    add(\"communityEvents\");\r\n  if (/^\\/communities\\/community-home\\/community-members(?:\\/|$)/i.test(path))\r\n    add(\"communityMembers\");\r\n\r\n  return Array.from(out);\r\n}\r\n\r\n/**\r\n * Install PRM / __doPostBack hooks once.\r\n * On partial updates, we just re-apply the current language.\r\n * The i18n module\u2019s MutationObserver will (re)tag and (re)apply in changed subtrees.\r\n */\r\nexport function installWebFormsHooks() {\r\n  let installed = false;\r\n\r\n  const reapply = () => {\r\n    const lang =\r\n      window.ThriveI18n?.__debug?.().lang ||\r\n      document.documentElement.getAttribute(\"data-lang\") ||\r\n      localStorage.getItem(\"preferredLang\") ||\r\n      \"en\";\r\n    // Re-apply translations for current lang (maps + catalogs are already cached)\r\n    window.ThriveI18n?.setLangNoReload?.(lang);\r\n    dbg(\"re-applied after partial postback\", { lang });\r\n  };\r\n\r\n  function wire() {\r\n    if (installed) return true;\r\n    if (window.Sys?.WebForms?.PageRequestManager) {\r\n      const prm = window.Sys.WebForms.PageRequestManager.getInstance();\r\n      prm.add_endRequest(() => setTimeout(reapply, 0));\r\n      window.Sys?.Application?.add_load?.(() => setTimeout(reapply, 0));\r\n      installed = true;\r\n      dbg(\"WebForms PRM hook installed\");\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  if (wire()) return;\r\n\r\n  // Retry briefly until PRM shows up\r\n  const iv = setInterval(() => {\r\n    if (wire()) clearInterval(iv);\r\n  }, 200);\r\n  setTimeout(() => clearInterval(iv), 8000);\r\n\r\n  // Fallback for older pages\r\n  if (typeof window.__doPostBack === \"function\") {\r\n    const orig = window.__doPostBack;\r\n    window.__doPostBack = function () {\r\n      const r = orig.apply(this, arguments);\r\n      setTimeout(reapply, 0);\r\n      dbg(\"Fallback __doPostBack patch used\");\r\n      return r;\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Convenience boot: compute namespaces, init i18n, set initial lang, and hook WebForms.\r\n * Call this from your orchestrator on DOM ready.\r\n */\r\nexport async function initDoIt({ manifestUrl }) {\r\n  const namespaces = pickNamespaces(new URL(location.href));\r\n  if (!namespaces.length) {\r\n    dbg(\"skip i18n (no namespaces for this page)\");\r\n    return;\r\n  }\r\n\r\n  // Initialize i18n core (it handles both maps and catalogs + a MutationObserver)\r\n  await window.ThriveI18n?.init?.({\r\n    manifestUrl,\r\n    namespaces,\r\n    observeMutations: true,\r\n  });\r\n\r\n  const initial = (\r\n    localStorage.getItem(\"preferredLang\") ||\r\n    document.documentElement.getAttribute(\"data-lang\") ||\r\n    document.documentElement.getAttribute(\"lang\") ||\r\n    \"en\"\r\n  ).toLowerCase();\r\n\r\n  await window.ThriveI18n?.setLangNoReload?.(initial);\r\n  document.documentElement.setAttribute(\r\n    \"data-lang\",\r\n    initial === \"fr\" ? \"fr\" : \"en\"\r\n  );\r\n  document.documentElement.setAttribute(\r\n    \"lang\",\r\n    initial === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n  );\r\n  dbg(\"initDoIt complete\", { initial, namespaces });\r\n\r\n  installWebFormsHooks();\r\n}\r\n", "// src/index.js\r\nimport { initToggle } from \"./core/i18n-toggle.js\";\r\nimport { initI18n } from \"./core/i18n.js\"; // your consolidated core\r\nimport { initDynamic } from \"./features/dynamic-i18n.js\";\r\nimport { initDoIt, pickNamespaces } from \"./features/doit.js\";\r\n\r\nfunction boot() {\r\n  initToggle();\r\n\r\n  // If you prefer orchestration here instead of inside initDoIt:\r\n  const namespaces = pickNamespaces();\r\n  initI18n({\r\n    manifestUrl:\r\n      \"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json\",\r\n    namespaces,\r\n    observeMutations: true,\r\n  });\r\n\r\n  initDynamic(); // page-scoped text transforms (reruns on langchange)\r\n  initDoIt({\r\n    manifestUrl:\r\n      \"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json\",\r\n  });\r\n}\r\n\r\ndocument.readyState === \"loading\"\r\n  ? document.addEventListener(\"DOMContentLoaded\", boot, { once: true })\r\n  : boot();\r\n\r\n// (Optional) expose a tiny global for consoles/tests\r\nwindow.i18nThrive = { pickNamespaces };\r\n"],
  "mappings": "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",
  "names": ["_inited", "LANG_STORAGE_KEY", "LANGS", "normalize", "v", "getCurrentLang", "e", "setDocumentLang", "code", "c", "setLanguage", "lang", "notifyAlways", "_a", "_b", "next", "current", "err", "findNav", "renderToggle", "currentLang", "nav", "li", "other", "l", "target", "_disconnectMo", "startObserver", "mo", "initToggle", "ready", "state", "STORE_KEY", "ATTRS", "normalizeLang", "v", "setDocumentLang", "lang", "code", "firstTextNode", "el", "sameHTML", "a", "b", "setFirstText", "txt", "tn", "jsonCache", "loadJSON", "url", "p", "r", "_manifestP", "getManifest", "nsMapCache", "getMap", "manifestUrl", "ns", "file", "base", "catalogCache", "loadCatalogs", "namespaces", "manifest", "promises", "key", "rel", "parts", "parseAttrPairs", "str", "map", "part", "s", "attr", "stringifyAttrPairs", "attachMaps", "entries", "root", "e", "selector", "type", "nodes", "cur", "next", "applyToElement", "tmap", "val", "wantsHtml", "sig", "raw", "pairs", "k", "applyAll", "loadAndApply", "_a", "maps", "_flushScheduled", "_pendingRoots", "scheduleRoot", "flushPending", "roots", "initI18n", "opts", "initial", "setLangNoReload", "records", "m", "n", "PAGES", "_debounceTimer", "getLocale", "parseCommunityName", "text", "m", "parseTotalCount", "parseRangeLabel", "start", "end", "total", "parseLastJoined", "w", "unitKey", "templates", "n", "unit", "UNITS", "register", "when", "render", "isActive", "path", "activeRender", "runActive", "initDynamic", "boot", "el", "MAP", "next", "host", "target", "name", "data", "loc", "unitFn", "fmtLast", "totalEl", "container", "parent", "siblings", "_a", "_b", "_c", "placeholder", "msg", "sel", "raw", "dbg", "m", "o", "getParamCI", "url", "name", "target", "k", "v", "pickNamespaces", "currentUrlOrPath", "path", "section", "out", "add", "ns", "n", "installWebFormsHooks", "installed", "reapply", "_a", "_b", "_c", "_d", "lang", "dbg", "wire", "_e", "iv", "orig", "initDoIt", "manifestUrl", "namespaces", "initial", "boot", "initToggle", "namespaces", "pickNamespaces", "initI18n", "initDynamic", "initDoIt"]
}
