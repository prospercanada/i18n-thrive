var i18nThrive=(()=>{var D=!1,q="preferredLang",tt=[{code:"en",label:"English",htmlLang:"en-CA"},{code:"fr",label:"Fran\xE7ais",htmlLang:"fr-CA"}],A=t=>String(t||"en").toLowerCase()==="fr"?"fr":"en";function O(){try{return A(localStorage.getItem(q))}catch(t){return"en"}}function j(t){let e=A(t);document.documentElement.setAttribute("data-lang",e),document.documentElement.setAttribute("lang",e==="fr"?"fr-CA":"en-CA")}async function et(t,{notifyAlways:e=!1}={}){var i,a;let n=A(t),o=document.documentElement.getAttribute("data-lang")||"en";try{localStorage.setItem(q,n)}catch(s){}if(o!==n&&j(n),(i=window.ThriveI18n)!=null&&i.setLangNoReload)try{await window.ThriveI18n.setLangNoReload(n)}catch(s){console.error("[i18n] setLangNoReload failed:",s)}if((a=window.i18next)!=null&&a.changeLanguage)try{await window.i18next.changeLanguage(n)}catch(s){console.warn("[i18n] i18next.changeLanguage failed:",s)}(e||o!==n)&&window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:n}}))}function U(){return document.querySelector(".nav.navbar-nav")}function x(t){let e=U();if(!e)return;e.querySelectorAll("li[data-lang-toggle]").forEach(a=>a.remove());let n=tt.find(a=>a.code!==t);if(!n)return;let o=document.createElement("li");o.setAttribute("data-lang-toggle","true");let i=document.createElement("a");i.href="#",i.setAttribute("role","button"),i.setAttribute("aria-label",`Switch to ${n.label}`),i.dataset.toggleLang=n.code,i.textContent=n.label,o.appendChild(i),e.appendChild(o),e.dataset.langToggleBound||(e.addEventListener("click",a=>{let s=a.target.closest("[data-toggle-lang]");if(!s)return;a.preventDefault();let u=s.dataset.toggleLang;et(u,{notifyAlways:!0}),x(u)}),e.dataset.langToggleBound="1")}var F=null;function nt(){if(F)return;let t=new MutationObserver(()=>{let e=U();e&&!e.querySelector("li[data-lang-toggle]")&&x(O())});t.observe(document.documentElement,{childList:!0,subtree:!0}),F=()=>t.disconnect()}function W(){var n;if(D)return;D=!0;let t=O();j(t),(n=window.i18next)!=null&&n.changeLanguage&&window.i18next.changeLanguage(t).catch(o=>console.warn("[i18n] initial i18next.changeLanguage failed:",o)),window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:t}}));let e=()=>{x(t),nt()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}var c={lang:"en",catalogs:{},opts:null,observer:null,ready:!1,pending:[],isApplying:!1},$="preferredLang",ot=new Set(["aria-label","title","alt","placeholder","value","data-i18n-text","data-content","data-original-title"]),I=t=>String(t||"en").toLowerCase()==="fr"?"fr":"en";function H(t){let e=I(t);document.documentElement.setAttribute("data-lang",e),document.documentElement.setAttribute("lang",e==="fr"?"fr-CA":"en-CA"),window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:e}}))}function T(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(n){return n.nodeValue&&n.nodeValue.trim()?1:2}}).nextNode()}function it(t,e){return t===e?!0:t.replace(/\u00A0/g,"&nbsp;").trim()===e.replace(/\u00A0/g,"&nbsp;").trim()}function rt(t,e){let n=T(t);n?n.nodeValue!==e&&(n.nodeValue=e):t.textContent!==e&&(t.textContent=e)}var b=new Map,at=60*1e3,st="i18n:json:",ct=!1;function y(...t){ct&&console.log("[i18n json]",...t)}function ut(t){try{return JSON.parse(localStorage.getItem(t)||"null")}catch(e){return null}}function lt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){}}function ft(t){return st+t}function mt(t,e){return typeof t=="number"&&Date.now()-t<e}async function M(t,{ttlMs:e=at,retries:n=2}={}){if(b.has(t))return b.get(t);let o=ft(t),i=ut(o);if(i&&mt(i.ts,e)){y("HIT (persist)",{url:t,ageMs:Date.now()-i.ts});let s=Promise.resolve(i.data);return b.set(t,s),s}let a=(async()=>{let s;for(let u=0;u<=n;u++)try{y("FETCH",{url:t,attempt:u});let r=await fetch(t);if(r.status===429){let l=(u+1)*300;y("429 backoff",{url:t,delay:l}),await new Promise(g=>setTimeout(g,l));continue}if(!r.ok)throw new Error(`HTTP ${r.status} for ${t}`);let f=await r.json();return lt(o,{ts:Date.now(),data:f}),y("STORE (persist)",{url:t}),f}catch(r){if(s=r,u<n){let f=(u+1)*200;y("retry",{url:t,delay:f,error:String(r)}),await new Promise(l=>setTimeout(l,f))}}if(i&&i.data)return y("FALLBACK (stale)",{url:t,ageMs:Date.now()-i.ts}),i.data;throw s})();return b.set(t,a),a}var C=null;function V(t){return C||(C=M(t),C)}var L=new Map;async function B(t,e){if(L.has(e))return L.get(e);let n=(async()=>{let i=(await V(t))[`${e}.map`];if(!i)return null;let a=new URL(t,location.origin),s=new URL(i,a).toString();return M(s)})();return L.set(e,n),n}var S=new Map;async function dt(t,e,n){let o=await V(t),i=new URL(t,location.origin),a=(e||[]).map(u=>{let r=`${u}:${n}`;if(S.has(r))return S.get(r);let f=o[`${u}.${n}`];if(!f)return Promise.resolve({});let l=new URL(f,i).toString(),g=M(l);return S.set(r,g),g}),s=await Promise.all(a);return Object.assign({},...s)}function K(t){let e=new Map;if(!t)return e;for(let n of t.split(",").map(o=>o.trim()).filter(Boolean)){let[o,i]=n.split(":").map(a=>a.trim());o&&i&&e.set(o,i)}return e}function gt(t){return Array.from(t.entries()).sort(([e],[n])=>e>n?1:e<n?-1:0).map(([e,n])=>`${e}:${n}`).join(",")}function z(t,e=document){for(let n of t||[]){let{selector:o,type:i,attr:a,key:s}=n||{};if(!o||!s)continue;let u=e.querySelectorAll(o);u.length&&u.forEach(r=>{if(i==="text"||i==="html")r.getAttribute("data-i18n")!==s&&r.setAttribute("data-i18n",s),i==="html"&&r.setAttribute("data-i18n-html","true");else if(i==="attr"&&a){let f=K(r.getAttribute("data-i18n-attr"));f.set(a,s);let l=gt(f);r.getAttribute("data-i18n-attr")!==l&&r.setAttribute("data-i18n-attr",l)}})}}function pt(t,e){let n=t.getAttribute("data-i18n");if(n&&e[n]!=null){let a=String(e[n]),s=`${n}\xA7${c.lang}\xA7${a.length}`;if(t.dataset.i18nApplied!==s){if(t.hasAttribute("data-i18n-html"))it(t.innerHTML,a)||(t.innerHTML=a);else{let u=a.replace(/&nbsp;/g,"\xA0"),r=T(t);(r?r.nodeValue:t.textContent)!==u&&rt(t,u)}t.dataset.i18nApplied=s}}let o=t.getAttribute("data-i18n-attr");if(!o)return;let i=K(o);for(let[a,s]of i){if(!ot.has(a)||e[s]==null)continue;let u=String(e[s]);if(a==="data-i18n-text"){let r=u.replace(/&nbsp;/g,"\xA0"),f=T(t);(f?f.nodeValue:"")!==r&&(f?f.nodeValue=r:t.insertBefore(document.createTextNode(r),t.firstChild));continue}(a==="title"||a==="aria-label"||a==="placeholder"||a==="value")&&(u=u.replace(/&nbsp;/g,"\xA0")),t.getAttribute(a)!==u&&t.setAttribute(a,u)}}function G(t,e=document){t&&e.querySelectorAll("[data-i18n],[data-i18n-attr]").forEach(n=>pt(n,t))}async function X(t){var a;if(!((a=c==null?void 0:c.opts)!=null&&a.manifestUrl))throw new Error("ThriveI18n not initialized: missing opts.manifestUrl");c.lang=I(t);try{localStorage.setItem($,c.lang)}catch(s){}let{manifestUrl:e,namespaces:n}=c.opts,o=await Promise.all(n.map(s=>B(e,s)));for(let s of o)Array.isArray(s)&&z(s,document);let i=await dt(e,n,c.lang);c.catalogs=i,c.isApplying=!0;try{G(i)}finally{c.isApplying=!1}}var E=!1,v=new Set;function J(t){!t||t.nodeType!==1||(v.add(t),E||(E=!0,queueMicrotask(yt)))}async function yt(){if(E=!1,!v.size)return;let t=Array.from(v);v.clear(),c.isApplying=!0;try{for(let e of t)for(let n of c.opts.namespaces){let o=await B(c.opts.manifestUrl,n);o&&z(o,e)}for(let e of t)G(c.catalogs,e)}finally{c.isApplying=!1}}async function _(t){if(c.opts=Object.assign({namespaces:["profile"],observeMutations:!0,manifestUrl:""},t||{}),!c.opts.manifestUrl)throw new Error("manifestUrl required");let e=I(localStorage.getItem($)||"en");H(e),await X(e),c.ready=!0,window.addEventListener("storage",n=>{n.key===$&&n.newValue&&n.newValue!==c.lang&&Y(n.newValue)}),c.opts.observeMutations&&(c.observer&&c.observer.disconnect(),c.observer=new MutationObserver(n=>{if(!c.isApplying)for(let o of n)o.type==="childList"?o.addedNodes.forEach(i=>J(i)):o.type==="attributes"&&J(o.target)}),c.observer.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-attr","data-i18n-html"]}))}async function Y(t){if(H(t),!c.ready){c.pending.push(t);return}await X(t)}function ht(t){var e;return(e=c.catalogs[t])!=null?e:t}function wt(t,e){return new Intl.NumberFormat(c.lang==="fr"?"fr-CA":"en-CA",e).format(t)}function bt(t,e){let n=t instanceof Date?t:new Date(t);return new Intl.DateTimeFormat(c.lang==="fr"?"fr-CA":"en-CA",e).format(n)}function Ct(){var t;return{lang:c.lang,ready:c.ready,hasObserver:!!c.observer,namespaces:((t=c.opts)==null?void 0:t.namespaces)||[],catalogKeys:Object.keys(c.catalogs).length}}typeof window!="undefined"&&(window.ThriveI18n={init:_,setLangNoReload:Y,t:ht,fmtNumber:wt,fmtDate:bt,__debug:Ct,get ready(){return c.ready}});function vt(t,e){let n=e.toLowerCase();for(let[o,i]of t.searchParams.entries())if(o.toLowerCase()===n)return i;return null}function R(t=location.href){let e=typeof t=="string"?new URL(t,location.origin):t instanceof URL?t:new URL(location.href),o=(e.pathname||"/").replace(/\/{2,}/g,"/").replace(/^\/sandboxmicrosite(?=\/|$)/i,"")||"/",i=(vt(e,"section")||"").trim().toLowerCase(),a=new Set(["header"]),s=!0,u=new Set(["header","profile","login","community","networkMembers"]),r=function(l){if(!(!s||!l))for(var g=Array.isArray(l)?l:[l],m=0;m<g.length;m++){var p=g[m];p&&u.has(p)&&a.add(p)}};return(/^\/profile(?:\/|$)/i.test(o)||/^\/people(?:\/|$)/i.test(o))&&r("profile"),/^\/profile\/connections\/contacts(?:\/|$)/i.test(o)&&r("connections"),/^\/profile\/connections\/communities(?:\/|$)/i.test(o)&&r("communities"),/^\/profile\/connections\/communitiesnode(?:\/|$)/i.test(o)&&r("communitiesNode"),/^\/profile\/connections\/following-connections(?:\/|$)/i.test(o)&&r("following"),/^\/profile\/contributions\/contributions-summary(?:\/|$)/i.test(o)&&r("contribSummary"),/^\/profile\/contributions\/contributions-achievements(?:\/|$)/i.test(o)&&r("contribAchievements"),/^\/profile\/contributions\/contributions-list(?:\/|$)/i.test(o)&&r("contribList"),/^\/profile\/myaccount\/changepassword(?:\/|$)/i.test(o)&&r("accountChangePassword"),/^\/profile\/myaccount\/mysignature(?:\/|$)/i.test(o)&&r("accountSignature"),/^\/profile\/myaccount\/inbox(?:\/|$)/i.test(o)&&r("accountInbox"),/^\/profile\/myaccount\/my-settings(?:\/|$)/i.test(o)&&r({privacy:"accountSettingsPrivacy",email:"accountSettingsEmail",rssfeeds:"accountSettingsRss",subscriptions:"accountSettingsSubscriptions"}[i]),/^\/network\/members(?:\/|$)/i.test(o)&&r("networkMembers"),/^\/contactus(?:\/|$)/i.test(o)&&r("contact"),/^\/login(?:\/|$)/i.test(o)&&r("login"),/^\/participate\/postmessage(?:\/|$)/i.test(o)&&r("postMessage"),/^\/participate\/add-new-entry(?:\/|$)/i.test(o)&&r("addLibrary"),/^\/events\/calendar(?:\/|$)/i.test(o)&&r("eventsCalendar"),/^\/communities\/[^/]+(?:\/|$)/i.test(o)&&r("community"),/^\/communities\/mycommunities(?:\/|$)/i.test(o)&&a.add("communityMy"),/^\/communities(?:\/community-home)?\/invite-community(?:\/digestviewer)?(?:\/|$)/i.test(o)&&r("communityInvite"),/^\/communities\/community-home\/digestviewer(?:\/|$)/i.test(o)&&r("communityDigest"),/^\/communities\/community-home\/librarydocuments(?:\/|$)/i.test(o)&&r("communityLibrary"),/^\/communities\/community-home\/recent-community-events(?:\/|$)/i.test(o)&&r("communityEvents"),/^\/communities\/community-home\/community-members(?:\/|$)/i.test(o)&&r("communityMembers"),Array.from(a)}var At=new Map;function h(){return document.documentElement.getAttribute("data-lang")==="fr"?"fr":"en"}function xt(t){let e=String(t).trim().match(/^Invite people to join\s+(?:the\s+)?(.+?)(?:\s+community)?$/i);return e?e[1].trim():null}function Lt(t){let e=String(t).match(/(\d+)/);return e?{total:Number(e[1])}:null}function N(t){let e=String(t).trim().match(/(\d+)\D+(\d+)\D+(\d+)/);if(!e)return null;let[,n,o,i]=e.map(Number);return{start:n,end:o,total:i}}function St(t){let e=String(t).trim().match(/(\d+)\s+(day|days|month|months|year|years)/i);if(!e)return null;let n=Number(e[1]),o=e[2].toLowerCase(),i=o.startsWith("day")?"day":o.startsWith("month")?"month":"year";return{n,unitKey:i}}var d={contacts:{en:({start:t,end:e,total:n})=>`Showing ${t} to ${e} of ${n}`,fr:({start:t,end:e,total:n})=>`Affichage des \xE9l\xE9ments ${t} \xE0 ${e} sur ${n}`},lastJoined:{en:({n:t,unit:e})=>`last person joined ${t} ${e} ago`,fr:({n:t,unit:e})=>`derni\xE8re personne inscrite il y a ${t} ${e}`},totalCount:{en:({total:t})=>`${t} total`,fr:({total:t})=>`${t} au total`},rangeWithTotal:{en:({start:t,end:e,total:n})=>`${t} to ${e} of ${n} total`,fr:({start:t,end:e,total:n})=>`${t} \xE0 ${e} sur ${n} au total`}},Q={en:{day:t=>t===1?"day":"days",month:t=>t===1?"month":"months",year:t=>t===1?"year":"years"},fr:{day:t=>t===1?"jour":"jours",month:()=>"mois",year:t=>t===1?"an":"ans"}};function w(t,e){At.set(t,e)}w("/advisory-committee",function(){let e=document.querySelector("#PageTitleH1");if(!e)return;let n={en:"Meet the Resilient Futures Advisory Committee",fr:"Rencontrez le comit\xE9 consultatif de l\u2019initiative Un avenir r\xE9silient"},o=n[h()]||n.en;e.textContent.trim()!==o&&(e.textContent=o)});w("/sandboxmicrosite/communities/community-home/invite-community",function(){let e=document.querySelector("#MainCopy_ctl04_InviteToCommunityLabel");if(!e)return;let n=e.querySelector("strong")||e,o=xt(n.textContent)||n.textContent.trim(),a=h()==="fr"?`Invitez des personnes \xE0 rejoindre la communaut\xE9 ${o}`:`Invite people to join ${o}`;n.textContent!==a&&(n.textContent=a)});w("/profile/connections/contacts",function(){let e=document.querySelector("[id$='FindContacts_ShowingLabel']");if(!e)return;let n=N(e.textContent);if(!n)return;let i=(d.contacts[h()]||d.contacts.en)(n);e.textContent!==i&&(e.textContent=i)});w("/profile/connections/communitiesnode",function(){let e=h(),n=Q[e]||Q.en,o=d.lastJoined[e]||d.lastJoined.en;document.querySelectorAll("[id^='MainCopy_ctl29_lstCommunityList_lblLastUpdated_']").forEach(a=>{let s=St(a.textContent);if(!s)return;let u=n[s.unitKey](s.n),r=o({n:s.n,unit:u});a.textContent!==r&&(a.textContent=r)});let i=document.querySelector("#MainCopy_ctl29_lbCommunityCount .Count");if(i){let a=Lt(i.textContent);if(a){let u=(d.totalCount[e]||d.totalCount.en)(a);i.textContent!==u&&(i.textContent=u)}}(function(){let s=document.getElementById("MainCopy_ctl29_AllCommunitiesContainer");if(!s)return;let u=s.parentElement||s,r=Array.from(u.childNodes).filter(m=>m!==s);if(r.some(m=>{var p,k,P;return m.nodeType===1&&((p=m.classList)==null?void 0:p.contains("row"))&&((k=m.classList)==null?void 0:k.contains("rowContainer"))&&((P=m.classList)==null?void 0:P.contains("community-list"))}))return;let l=r.find(m=>m.nodeType===3?/^\s*no\s+results\s+found\s*$/i.test(m.textContent):m.nodeType===1?/^no\s+results\s+found$/i.test((m.textContent||"").trim()):!1);if(!l)return;let g=e==="fr"?"Aucun r\xE9sultat":"No Results Found";l.nodeType===3?l.textContent=" "+g+" ":l.textContent=g})()});w("/profile/connections/following-connections",function(){let e="[id^='FollowedContent_'] .contributions-list-header .text-muted",n=h();document.querySelectorAll(e).forEach(o=>{let i=N(o.textContent);if(!i)return;let s=(d.contacts[n]||d.contacts.en)(i);o.textContent!==s&&(o.textContent=s)})});w("/profile/contributions/contributions-list",function(){let e=document.querySelector("#MainCopy_ctl29_SearchResultStatus .ResultStatus.text-muted");if(!e)return;let n=e.textContent,o=N(n);if(!o)return;let i=h(),u=(/\btotal\b/i.test(n)?d.rangeWithTotal[i]||d.rangeWithTotal.en:d.contacts[i]||d.contacts.en)(o);e.textContent!==u&&(e.textContent=u)});function Z(){W();let t=R();_({manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:t,observeMutations:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z,{once:!0}):Z();window.i18nThrive={pickNamespaces:R};})();
