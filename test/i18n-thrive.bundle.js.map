{
  "version": 3,
  "sources": ["../i18n/i18n-toggle.js", "../i18n/bootstrap-i18n.js", "../i18n/i18n.js", "../i18n/doit.js", "../i18n/dynamic-i18n.js"],
  "sourcesContent": ["(() => {\r\n  const LANG_STORAGE_KEY = \"preferredLang\";\r\n  const languages = [\r\n    { code: \"en\", label: \"English\", htmlLang: \"en-CA\" },\r\n    { code: \"fr\", label: \"Fran\u00E7ais\", htmlLang: \"fr-CA\" },\r\n  ];\r\n\r\n  // --- helpers ---\r\n  const normalize = (v) =>\r\n    String(v || \"en\").toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\n  function getCurrentLang() {\r\n    try {\r\n      return normalize(localStorage.getItem(LANG_STORAGE_KEY));\r\n    } catch {\r\n      return \"en\";\r\n    }\r\n  }\r\n\r\n  function setDocumentLang(lang) {\r\n    const code = normalize(lang);\r\n    // \uD83D\uDFE8 set BOTH attributes so CSS + a11y stay in sync\r\n    document.documentElement.setAttribute(\"data-lang\", code);\r\n    document.documentElement.setAttribute(\r\n      \"lang\",\r\n      code === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n    );\r\n  }\r\n\r\n  async function updateLanguage(lang) {\r\n    const next = normalize(lang);\r\n\r\n    // Early exit if unchanged (still notify if you want renderers to re-run)\r\n    const current = document.documentElement.getAttribute(\"data-lang\") || \"en\";\r\n    if (current === next) {\r\n      window.dispatchEvent(\r\n        new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Persist + update <html> attrs\r\n    try {\r\n      localStorage.setItem(LANG_STORAGE_KEY, next);\r\n    } catch {}\r\n    setDocumentLang(next); // \uD83D\uDFE8 centralize attr updates\r\n\r\n    // Optional: static i18n swap without reload\r\n    if (window.ThriveI18n?.setLangNoReload) {\r\n      try {\r\n        await window.ThriveI18n.setLangNoReload(next);\r\n      } catch (err) {\r\n        console.error(\"[i18n] setLangNoReload failed:\", err);\r\n      }\r\n    }\r\n\r\n    // Optional block toggling (keep only if you use data-lang-content)\r\n    // document.querySelectorAll(\"[data-lang-content]\").forEach((el) => {\r\n    //   const show = (el.dataset.langContent || \"\").toLowerCase() === next;\r\n    //   el.style.display = show ? \"\" : \"none\";\r\n    // });\r\n\r\n    // Notify renderers/widgets\r\n    window.dispatchEvent(\r\n      new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n    );\r\n  }\r\n\r\n  // --- toggle UI ---\r\n  function addLanguageToggle(currentLang) {\r\n    const navBar = document.querySelector(\".nav.navbar-nav\");\r\n    if (!navBar) return;\r\n\r\n    // Idempotent: remove any previous toggle we added\r\n    navBar\r\n      .querySelectorAll(\"li[data-lang-toggle]\")\r\n      .forEach((li) => li.remove());\r\n\r\n    // Show only the non-selected language\r\n    const other = languages.find((l) => l.code !== currentLang);\r\n    if (!other) return;\r\n\r\n    const li = document.createElement(\"li\");\r\n    li.setAttribute(\"data-lang-toggle\", \"true\");\r\n\r\n    const a = document.createElement(\"a\");\r\n    a.href = \"#\";\r\n    a.setAttribute(\"role\", \"button\");\r\n    a.setAttribute(\"aria-label\", `Switch to ${other.label}`);\r\n    a.dataset.toggleLang = other.code;\r\n    a.textContent = other.label;\r\n\r\n    li.appendChild(a);\r\n    navBar.appendChild(li);\r\n\r\n    if (!navBar.dataset.langToggleBound) {\r\n      navBar.addEventListener(\"click\", (e) => {\r\n        const target = e.target.closest(\"[data-toggle-lang]\");\r\n        if (!target) return;\r\n        e.preventDefault();\r\n        const lang = target.dataset.toggleLang;\r\n        updateLanguage(lang);\r\n        addLanguageToggle(lang); // rebuild to show the *other* choice\r\n      });\r\n      navBar.dataset.langToggleBound = \"1\";\r\n    }\r\n  }\r\n\r\n  // --- boot ---\r\n  async function init() {\r\n    const current = getCurrentLang();\r\n    // \uD83D\uDFE8 use updateLanguage so everything (attrs, storage, event) is consistent at boot\r\n    await updateLanguage(current);\r\n    addLanguageToggle(current);\r\n  }\r\n\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", init, { once: true });\r\n  } else {\r\n    init();\r\n  }\r\n\r\n  // Example: elsewhere you can react to language changes\r\n  // window.addEventListener(\"langchange\", () => {\r\n  //   const render = window.DynamicI18n?.activeRender?.();\r\n  //   render && render();\r\n  // });\r\n})();\r\n\r\n// (() => {\r\n//   const LANG_STORAGE_KEY = \"preferredLang\";\r\n//   const languages = [\r\n//     { code: \"en\", label: \"English\", htmlLang: \"en-CA\" },\r\n//     { code: \"fr\", label: \"Fran\u00E7ais\", htmlLang: \"fr-CA\" },\r\n//   ];\r\n\r\n//   // --- helpers ---\r\n//   const normalize = (v) =>\r\n//     String(v || \"en\").toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n//   function getCurrentLang() {\r\n//     try {\r\n//       return normalize(localStorage.getItem(LANG_STORAGE_KEY));\r\n//     } catch {\r\n//       return \"en\";\r\n//     }\r\n//   }\r\n//   function setDocumentLang(lang) {\r\n//     // keep <html lang> useful for a11y/other scripts\r\n//     document.documentElement.setAttribute(\r\n//       \"lang\",\r\n//       lang === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n//     );\r\n//   }\r\n\r\n//   async function updateLanguage(lang) {\r\n//     const next = String(lang).toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\n//     // Early exit if unchanged\r\n//     const current = document.documentElement.getAttribute(\"data-lang\") || \"en\";\r\n//     if (current === next) {\r\n//       // Still notify listeners if you want them to re-render anyway:\r\n//       window.dispatchEvent(\r\n//         new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n//       );\r\n//       return;\r\n//     }\r\n\r\n//     // Persist + update <html> attributes\r\n//     try {\r\n//       localStorage.setItem(\"preferredLang\", next);\r\n//     } catch {}\r\n//     document.documentElement.setAttribute(\"data-lang\", next);\r\n//     document.documentElement.setAttribute(\r\n//       \"lang\",\r\n//       next === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n//     );\r\n\r\n//     // Optional: run your static i18n swap without reload (non-blocking)\r\n//     if (window.ThriveI18n?.setLangNoReload) {\r\n//       try {\r\n//         await window.ThriveI18n.setLangNoReload(next);\r\n//       } catch (err) {\r\n//         console.error(\"[i18n] setLangNoReload failed:\", err);\r\n//       }\r\n//     }\r\n\r\n//     // // Optional: toggle any explicit blocks marked with data-lang-content\r\n//     // document.querySelectorAll(\"[data-lang-content]\").forEach((el) => {\r\n//     //   const show = (el.dataset.langContent || \"\").toLowerCase() === next;\r\n//     //   // Use empty string to preserve natural display; otherwise hide.\r\n//     //   el.style.display = show ? \"\" : \"none\";\r\n//     // });\r\n\r\n//     // Notify any listeners (dynamic i18n, date/number formatters, etc.)\r\n//     window.dispatchEvent(\r\n//       new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n//     );\r\n//   }\r\n\r\n//   //   async function updateLanguage(lang) {\r\n//   //     const next = String(lang).toLowerCase() === \"fr\" ? \"fr\" : \"en\";\r\n\r\n//   //     try {\r\n//   //       localStorage.setItem(\"preferredLang\", next);\r\n//   //     } catch {}\r\n//   //     document.documentElement.setAttribute(\r\n//   //       \"lang\",\r\n//   //       next === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n//   //     );\r\n\r\n//   //     // (optional) keep if your static i18n needs to re-run without reload\r\n//   //     if (window.ThriveI18n?.setLangNoReload) {\r\n//   //       try {\r\n//   //         await window.ThriveI18n.setLangNoReload(next);\r\n//   //       } catch (err) {\r\n//   //         console.error(\"[i18n] setLangNoReload failed:\", err);\r\n//   //       }\r\n//   //     }\r\n\r\n//   //     // Optional block toggling\r\n//   //     document.querySelectorAll(\"[data-lang-content]\").forEach((el) => {\r\n//   //       el.style.display =\r\n//   //         (el.dataset.langContent || \"\").toLowerCase() === next ? \"\" : \"none\";\r\n//   //     });\r\n\r\n//   //     // Notify page renderers/widgets\r\n//   //     window.dispatchEvent(\r\n//   //       new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n//   //     );\r\n//   //   }\r\n//   //   function updateLanguage(lang) {\r\n//   //     const next = normalize(lang);\r\n//   //     try {\r\n//   //       localStorage.setItem(LANG_STORAGE_KEY, next);\r\n//   //     } catch {}\r\n//   //     setDocumentLang(next);\r\n\r\n//   //     // Optional: show/hide language-specific blocks\r\n//   //     document.querySelectorAll(\"[data-lang-content]\").forEach((el) => {\r\n//   //       el.style.display =\r\n//   //         (el.dataset.langContent || \"\").toLowerCase() === next ? \"\" : \"none\";\r\n//   //     });\r\n\r\n//   //     // Let other scripts (your per-page renderers) react\r\n//   //     window.dispatchEvent(\r\n//   //       new CustomEvent(\"langchange\", { detail: { lang: next } })\r\n//   //     );\r\n//   //   }\r\n\r\n//   // --- toggle UI ---\r\n//   function addLanguageToggle(currentLang) {\r\n//     const navBar = document.querySelector(\".nav.navbar-nav\");\r\n//     if (!navBar) return;\r\n\r\n//     // Remove previous toggle(s) we added (keeps this idempotent)\r\n//     navBar\r\n//       .querySelectorAll(\"li[data-lang-toggle]\")\r\n//       .forEach((li) => li.remove());\r\n\r\n//     // Show only the non-selected language\r\n//     const other = languages.find((l) => l.code !== currentLang);\r\n//     if (!other) return;\r\n\r\n//     const li = document.createElement(\"li\");\r\n//     li.setAttribute(\"data-lang-toggle\", \"true\");\r\n\r\n//     const a = document.createElement(\"a\");\r\n//     a.href = \"#\";\r\n//     a.setAttribute(\"role\", \"button\");\r\n//     a.setAttribute(\"aria-label\", `Switch to ${other.label}`);\r\n//     a.dataset.toggleLang = other.code;\r\n//     a.textContent = other.label;\r\n\r\n//     li.appendChild(a);\r\n//     navBar.appendChild(li);\r\n\r\n//     // Ensure one click handler (delegate on the navbar)\r\n//     if (!navBar.dataset.langToggleBound) {\r\n//       navBar.addEventListener(\"click\", (e) => {\r\n//         const target = e.target.closest(\"[data-toggle-lang]\");\r\n//         if (!target) return;\r\n//         e.preventDefault();\r\n//         const lang = target.dataset.toggleLang;\r\n//         updateLanguage(lang);\r\n//         // Rebuild the toggle to now show the *other* language\r\n//         addLanguageToggle(lang);\r\n//       });\r\n//       navBar.dataset.langToggleBound = \"1\";\r\n//     }\r\n//   }\r\n\r\n//   // --- boot ---\r\n//   function init() {\r\n//     const current = getCurrentLang();\r\n//     setDocumentLang(current);\r\n\r\n//     // Optional: initialize [data-lang-content] visibility\r\n//     document.querySelectorAll(\"[data-lang-content]\").forEach((el) => {\r\n//       el.style.display =\r\n//         (el.dataset.langContent || \"\").toLowerCase() === current ? \"\" : \"none\";\r\n//     });\r\n\r\n//     addLanguageToggle(current);\r\n//   }\r\n\r\n//   // Give your dynamic i18n a hook to re-render on toggle\r\n//   // Example:\r\n//   //   window.addEventListener(\"langchange\", () => {\r\n//   //     const render = window.DynamicI18n?.activeRender?.();\r\n//   //     render && render();\r\n//   //   });\r\n\r\n//   if (document.readyState === \"loading\") {\r\n//     document.addEventListener(\"DOMContentLoaded\", init, { once: true });\r\n//   } else {\r\n//     init();\r\n//   }\r\n// })();\r\n", "/*! Thrive i18n bootstrap - attach data-i18n attributes */\r\n\r\n(function () {\r\n  async function loadJSON(url) {\r\n    const r = await fetch(url, { cache: \"no-store\" });\r\n    if (!r.ok) throw new Error(`Failed to fetch ${url}`);\r\n    return r.json();\r\n  }\r\n\r\n  // You only tag the first matching element\r\n  // You\u2019re accumulating duplicates in data-i18n-attr\r\n  //There\u2019s no way to set data-i18n-html from the map\r\n  function attach(entries) {\r\n    for (const e of entries || []) {\r\n      const { selector, type, attr, key } = e || {};\r\n      if (!selector || !key) continue;\r\n\r\n      const nodes = document.querySelectorAll(selector);\r\n      if (!nodes.length) continue;\r\n\r\n      nodes.forEach((el) => {\r\n        if (type === \"text\") {\r\n          el.setAttribute(\"data-i18n\", key);\r\n        } else if (type === \"html\") {\r\n          // flag so applyToElement uses innerHTML\r\n          el.setAttribute(\"data-i18n\", key);\r\n          el.toggleAttribute(\"data-i18n-html\", true);\r\n        } else if (type === \"attr\" && attr) {\r\n          // build/merge a de-duped set of attr:key pairs\r\n          const existing = el.getAttribute(\"data-i18n-attr\");\r\n          const parts = existing\r\n            ? existing\r\n                .split(\",\")\r\n                .map((s) => s.trim())\r\n                .filter(Boolean)\r\n            : [];\r\n          parts.push(`${attr}:${key}`);\r\n          const deduped = [...new Set(parts)];\r\n          el.setAttribute(\"data-i18n-attr\", deduped.join(\",\"));\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  async function run(opts) {\r\n    const { manifestUrl, namespaces = [], onlyIf } = opts || {};\r\n    if (!manifestUrl) throw new Error(\"manifestUrl required\");\r\n\r\n    // \u2705 optional guard\r\n    if (typeof onlyIf === \"function\" && !onlyIf()) {\r\n      console.debug(\"[i18n bootstrap] skipped by onlyIf\");\r\n      return;\r\n    }\r\n\r\n    const manifest = await loadJSON(manifestUrl);\r\n\r\n    for (const ns of namespaces) {\r\n      const mapFile = manifest[`${ns}.map`];\r\n      if (!mapFile) continue;\r\n\r\n      const base = new URL(manifestUrl, location.origin);\r\n      const mapUrl = new URL(mapFile, base).toString();\r\n      const map = await loadJSON(mapUrl);\r\n\r\n      attach(map);\r\n    }\r\n\r\n    console.log(\"[i18n bootstrap] attached:\", namespaces.join(\", \"));\r\n  }\r\n\r\n  // expose globally so you can call it\r\n  window.ThriveI18nBootstrap = run;\r\n})();\r\n", "(function () {\r\n  const STORE_KEY = \"preferredLang\";\r\n  const ATTRS = [\r\n    \"aria-label\",\r\n    \"title\",\r\n    \"alt\",\r\n    \"placeholder\",\r\n    \"value\",\r\n    \"data-i18n-text\",\r\n    // popover attrs (BS3/4)\r\n    \"data-content\",\r\n    \"data-original-title\",\r\n  ];\r\n\r\n  const state = {\r\n    lang: \"en\",\r\n    catalogs: {},\r\n    opts: null, // { manifestUrl, namespaces, observeMutations }\r\n    observer: null,\r\n    ready: false, // flips true after init finishes first load\r\n    pending: [], // queued languages before ready\r\n  };\r\n\r\n  function firstTextNode(el) {\r\n    const w = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {\r\n      acceptNode(n) {\r\n        return n.nodeValue && n.nodeValue.trim() ? 1 : 2;\r\n      },\r\n    });\r\n    return w.nextNode();\r\n  }\r\n\r\n  function sameHTML(a, b) {\r\n    // cheap check first\r\n    if (a === b) return true;\r\n    // normalize common no-ops: &nbsp; vs \\u00A0 and trim insignificant whitespace\r\n    return (\r\n      a.replace(/\\u00A0/g, \"&nbsp;\").trim() ===\r\n      b.replace(/\\u00A0/g, \"&nbsp;\").trim()\r\n    );\r\n  }\r\n\r\n  function setFirstText(el, txt) {\r\n    const tn = firstTextNode(el);\r\n    if (tn) {\r\n      if (tn.nodeValue !== txt) tn.nodeValue = txt;\r\n    } else if (el.textContent !== txt) {\r\n      el.textContent = txt;\r\n    }\r\n  }\r\n\r\n  // VERISON TO HELP PREVENT LOOPS\r\n  function applyToElement(el, tmap) {\r\n    // ---- element text/html ----\r\n    const key = el.getAttribute(\"data-i18n\");\r\n    if (key && tmap[key] != null) {\r\n      const val = String(tmap[key]);\r\n      const wantsHtml = el.hasAttribute(\"data-i18n-html\");\r\n\r\n      // optional: short-circuit if we already applied this exact value\r\n      const sig = key + \"\u00A7\" + val.length;\r\n      if (el.dataset.i18nApplied === sig) {\r\n        // already done; skip text/html part\r\n      } else if (wantsHtml) {\r\n        if (!sameHTML(el.innerHTML, val)) el.innerHTML = val;\r\n        el.dataset.i18nApplied = sig;\r\n      } else {\r\n        // normalize &nbsp; in text path too\r\n        const txt = val.replace(/&nbsp;/g, \"\\u00A0\");\r\n        // only write if changed\r\n        const tn = firstTextNode(el);\r\n        const current = tn ? tn.nodeValue : el.textContent;\r\n        if (current !== txt) setFirstText(el, txt);\r\n        el.dataset.i18nApplied = sig;\r\n      }\r\n    }\r\n\r\n    // ---- attributes ----\r\n    const raw = el.getAttribute(\"data-i18n-attr\");\r\n    if (!raw) return;\r\n\r\n    const pairs = [\r\n      ...new Set(\r\n        raw\r\n          .split(\",\")\r\n          .map((s) => s.trim())\r\n          .filter(Boolean)\r\n      ),\r\n    ];\r\n\r\n    for (const entry of pairs) {\r\n      const i = entry.indexOf(\":\");\r\n      if (i < 0) continue;\r\n\r\n      const attr = entry.slice(0, i).trim();\r\n      const k = entry.slice(i + 1).trim();\r\n\r\n      if (!ATTRS.includes(attr)) continue;\r\n      if (tmap[k] == null) continue;\r\n\r\n      let next = String(tmap[k]);\r\n\r\n      if (attr === \"data-i18n-text\") {\r\n        const txt = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n        const tn = firstTextNode(el);\r\n        const current = tn ? tn.nodeValue : \"\";\r\n        if (current !== txt) {\r\n          if (tn) tn.nodeValue = txt;\r\n          else el.insertBefore(document.createTextNode(txt), el.firstChild);\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        attr === \"title\" ||\r\n        attr === \"aria-label\" ||\r\n        attr === \"placeholder\" ||\r\n        attr === \"value\"\r\n      ) {\r\n        next = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n      }\r\n\r\n      if (el.getAttribute(attr) !== next) {\r\n        el.setAttribute(attr, next);\r\n      }\r\n    }\r\n  }\r\n\r\n  // VERSION TO PREVENT MULTIPLE ATTRIBUTES\r\n  //data-i18n-attr=\"title:contacts_sort_title,title:contacts_sort_title,title:contacts_sort_title\">\r\n\r\n  // function applyToElement(el, tmap) {\r\n  //   // ---- element text/html ----\r\n  //   const key = el.getAttribute(\"data-i18n\");\r\n  //   if (key && tmap[key] != null) {\r\n  //     const val = String(tmap[key]);\r\n  //     if (el.hasAttribute(\"data-i18n-html\")) {\r\n  //       // If you allow HTML, consider sanitizing (e.g., DOMPurify.sanitize(val))\r\n  //       el.innerHTML = val;\r\n  //     } else {\r\n  //       // Prefer textContent (preserves child elements if you only change first text node)\r\n  //       const tn = firstTextNode(el);\r\n  //       if (tn) tn.nodeValue = val;\r\n  //       else el.textContent = val;\r\n  //     }\r\n  //   }\r\n\r\n  //   // ---- attributes ----\r\n  //   const raw = el.getAttribute(\"data-i18n-attr\");\r\n  //   if (!raw) return;\r\n\r\n  //   // split, trim, drop empties, and de-dupe while preserving order\r\n  //   const pairs = [\r\n  //     ...new Set(\r\n  //       raw\r\n  //         .split(\",\")\r\n  //         .map((s) => s.trim())\r\n  //         .filter(Boolean)\r\n  //     ),\r\n  //   ];\r\n\r\n  //   for (const entry of pairs) {\r\n  //     // robust \"attr:key\" parsing (handles extra colons in key)\r\n  //     const i = entry.indexOf(\":\");\r\n  //     if (i < 0) continue;\r\n\r\n  //     const attr = entry.slice(0, i).trim();\r\n  //     const k = entry.slice(i + 1).trim();\r\n\r\n  //     if (!ATTRS.includes(attr)) continue;\r\n  //     if (tmap[k] == null) continue;\r\n\r\n  //     // get the translated value once\r\n  //     let next = String(tmap[k]);\r\n\r\n  //     if (attr === \"data-i18n-text\") {\r\n  //       // Write text node at the start, normalize &nbsp;\r\n  //       next = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n  //       const tn = firstTextNode(el);\r\n  //       if (tn) tn.nodeValue = next;\r\n  //       else el.insertBefore(document.createTextNode(next), el.firstChild);\r\n  //       continue;\r\n  //     }\r\n\r\n  //     // Normalize &nbsp; for common texty attributes\r\n  //     if (\r\n  //       attr === \"title\" ||\r\n  //       attr === \"aria-label\" ||\r\n  //       attr === \"placeholder\" ||\r\n  //       attr === \"value\"\r\n  //     ) {\r\n  //       next = next.replace(/&nbsp;/g, \"\\u00A0\");\r\n  //     }\r\n\r\n  //     // Boolean attribute handling (optional)\r\n  //     // e.g., if you ever translate to \"\", you can remove instead of setting empty\r\n  //     // if (attr === \"disabled\" || attr === \"required\") {\r\n  //     //   if (next === \"\" || next === \"false\") el.removeAttribute(attr);\r\n  //     //   else el.setAttribute(attr, attr);\r\n  //     //   continue;\r\n  //     // }\r\n\r\n  //     // Skip write if identical (avoids MutationObservers looping)\r\n  //     if (el.getAttribute(attr) !== next) {\r\n  //       el.setAttribute(attr, next);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  // LAST GOOD\r\n  // function applyToElement(el, tmap) {\r\n  //   const key = el.getAttribute(\"data-i18n\");\r\n  //   if (key && tmap[key] != null) {\r\n  //     if (el.hasAttribute(\"data-i18n-html\")) el.innerHTML = tmap[key];\r\n  //     else {\r\n  //       const tn = firstTextNode(el);\r\n  //       if (tn) tn.nodeValue = tmap[key];\r\n  //       else el.textContent = tmap[key];\r\n  //     }\r\n  //   }\r\n  //   const map = el.getAttribute(\"data-i18n-attr\");\r\n\r\n  //   if (map) {\r\n  //     map.split(\",\").forEach((pair) => {\r\n  //       const [attr, k] = pair.split(\":\").map((s) => s.trim());\r\n  //       if (!ATTRS.includes(attr) || tmap[k] == null) return;\r\n\r\n  //       if (attr === \"data-i18n-text\") {\r\n  //         const txt = tmap[k].replace(/&nbsp;/g, \"\\u00A0\"); // decode &nbsp;\r\n  //         const tn = firstTextNode(el);\r\n  //         if (tn) tn.nodeValue = txt;\r\n  //         else el.insertBefore(document.createTextNode(txt), el.firstChild);\r\n  //       } else {\r\n  //         el.setAttribute(attr, tmap[k]);\r\n  //       }\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  // <-- new ???????????????????????????\r\n  // function applyLeadingTextAll(tmap) {\r\n  //   document.querySelectorAll(\"[data-i18n-text]\").forEach((el) => {\r\n  //     const k = el.getAttribute(\"data-i18n-text\");\r\n  //     if (k && tmap[k] != null) setLeadingLabel(el, tmap[k]);\r\n  //   });\r\n  // }\r\n\r\n  // <-- new ???????????????????????????\r\n  // function applyI18nTextAttr(tmap) {\r\n  //   document.querySelectorAll(\"[data-i18n-text]\").forEach((el) => {\r\n  //     const k = el.getAttribute(\"data-i18n-text\");\r\n  //     if (k && tmap[k] != null) {\r\n  //       const tn = firstTextNode(el);\r\n  //       if (tn) tn.nodeValue = tmap[k];\r\n  //       else el.textContent = tmap[k];\r\n  //     }\r\n  //   });\r\n  // }\r\n  function applyAll(tmap) {\r\n    if (!tmap) return;\r\n    document\r\n      .querySelectorAll(\"[data-i18n],[data-i18n-attr]\")\r\n      .forEach((el) => applyToElement(el, tmap));\r\n\r\n    // applyI18nTextAttr(tmap); // <-- new ???????????????????????????\r\n  }\r\n\r\n  async function loadJSON(url) {\r\n    const r = await fetch(url, { cache: \"no-store\" });\r\n    if (!r.ok) throw new Error(`Failed to fetch ${url}`);\r\n    return r.json();\r\n  }\r\n\r\n  async function loadCatalogs(manifestUrl, namespaces, lang) {\r\n    const manifest = await loadJSON(manifestUrl);\r\n    const base = new URL(manifestUrl, location.origin);\r\n    const urls = (namespaces || [])\r\n      .map((ns) => manifest[`${ns}.${lang}`])\r\n      .filter(Boolean)\r\n      .map((rel) => new URL(rel, base).toString());\r\n    const parts = await Promise.all(\r\n      urls.map((u) => fetch(u, { cache: \"no-store\" }).then((r) => r.json()))\r\n    );\r\n    return Object.assign({}, ...parts);\r\n  }\r\n\r\n  // add near your other helpers\r\n  // NEW\r\n  async function installMaps(manifestUrl, namespaces) {\r\n    const manifest = await loadJSON(manifestUrl);\r\n    const base = new URL(manifestUrl, location.origin);\r\n\r\n    // Find all .map.json entries for the requested namespaces\r\n    const mapUrls = (namespaces || [])\r\n      .map((ns) => manifest[`${ns}.map`]) // \u2190 manifest must expose this key\r\n      .filter(Boolean)\r\n      .map((rel) => new URL(rel, base).toString());\r\n\r\n    // Load and flatten all map rows\r\n    const maps = (await Promise.all(mapUrls.map(loadJSON))).flat();\r\n\r\n    // Apply each row by *adding* data-i18n / data-i18n-attr to matching nodes\r\n    maps.forEach((row) => {\r\n      document.querySelectorAll(row.selector).forEach((el) => {\r\n        if (row.type === \"text\") {\r\n          el.setAttribute(\"data-i18n\", row.key);\r\n        } else if (row.type === \"attr\") {\r\n          const pair = `${row.attr}:${row.key}`;\r\n          const prev = el.getAttribute(\"data-i18n-attr\");\r\n          el.setAttribute(\"data-i18n-attr\", prev ? `${prev},${pair}` : pair);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  function attachMaps(entries, root = document) {\r\n    for (const e of entries || []) {\r\n      const { selector, type, attr, key } = e || {};\r\n      if (!selector || !key) continue;\r\n\r\n      const nodes = root.querySelectorAll(selector); // ALL matches in the new subtree\r\n      if (!nodes.length) continue;\r\n\r\n      nodes.forEach((el) => {\r\n        if (type === \"text\") {\r\n          el.setAttribute(\"data-i18n\", key);\r\n        } else if (type === \"attr\" && attr) {\r\n          const existing = el.getAttribute(\"data-i18n-attr\") || \"\";\r\n          const pair = `${attr}:${key}`;\r\n          el.setAttribute(\r\n            \"data-i18n-attr\",\r\n            existing ? existing + \",\" + pair : pair\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  async function loadAndApply(lang) {\r\n    if (!state?.opts?.manifestUrl) {\r\n      throw new Error(\"ThriveI18n not initialized: missing opts.manifestUrl\");\r\n    }\r\n    state.lang = lang === \"fr\" ? \"fr\" : \"en\";\r\n    localStorage.setItem(STORE_KEY, state.lang);\r\n\r\n    const { manifestUrl, namespaces, observeMutations } = state.opts;\r\n\r\n    // 1) Ensure DOM has data-i18n & data-i18n-attr per map.json\r\n    await installMaps(manifestUrl, namespaces); // NEW\r\n\r\n    // 2) Load catalogs and translate\r\n    const tmap = await loadCatalogs(manifestUrl, namespaces, state.lang);\r\n\r\n    state.catalogs = tmap;\r\n    // console.log(\"state.catalogs \", state.catalogs);\r\n    applyAll(tmap);\r\n\r\n    // const DEBUG_I18N = true; // NEW\r\n\r\n    if (observeMutations) {\r\n      // console.log(\"loadAndApply \", observeMutations);\r\n      if (state.observer) {\r\n        // console.log(\"state.observer.disconnect() \");\r\n        state.observer.disconnect();\r\n      }\r\n\r\n      // CHANGE 3 BEGIN\r\n      let _manifestPromise;\r\n      const _mapsByNs = new Map();\r\n      function getManifest(manifestUrl) {\r\n        _manifestPromise ||= loadJSON(manifestUrl);\r\n        return _manifestPromise;\r\n      }\r\n      async function getMap(manifestUrl, ns) {\r\n        if (_mapsByNs.has(ns)) return _mapsByNs.get(ns);\r\n        const manifest = await getManifest(manifestUrl);\r\n        const mapFile = manifest[`${ns}.map`];\r\n        if (!mapFile) return null;\r\n        const base = new URL(manifestUrl, location.origin);\r\n        const url = new URL(mapFile, base).toString();\r\n        const map = await loadJSON(url);\r\n        _mapsByNs.set(ns, map);\r\n        return map;\r\n      }\r\n\r\n      let isApplying = false;\r\n      let flushScheduled = false;\r\n      const pendingRoots = new Set(); // elements needing tag+apply\r\n\r\n      function schedule(el) {\r\n        if (!el || el.nodeType !== 1) return;\r\n        pendingRoots.add(el);\r\n        if (!flushScheduled) {\r\n          flushScheduled = true;\r\n          queueMicrotask(flush);\r\n        }\r\n      }\r\n\r\n      async function flush() {\r\n        flushScheduled = false;\r\n        if (!pendingRoots.size) return;\r\n\r\n        isApplying = true;\r\n        try {\r\n          // Tag and apply only for affected subtrees\r\n          const roots = Array.from(pendingRoots);\r\n          pendingRoots.clear();\r\n\r\n          // Tag (attach maps) inside each root\r\n          for (const root of roots) {\r\n            for (const ns of state.opts.namespaces) {\r\n              const map = await getMap(state.opts.manifestUrl, ns);\r\n              if (map) attachMaps(map, root); // your function that sets data-i18n*, de-duped\r\n            }\r\n          }\r\n\r\n          // Apply translations only within those roots\r\n          for (const root of roots) {\r\n            applyAll(state.catalogs, root); // update your applyAll to accept an optional root\r\n          }\r\n        } finally {\r\n          isApplying = false;\r\n        }\r\n      }\r\n      // CHANGE 3 END\r\n      // Keep a cached manifest + namespace\u2192map lookup\r\n\r\n      // ANOTHER TRY START\r\n      // CHANGE 2 REMOVED\r\n      // let _manifest,\r\n      //   _mapsByNs = {};\r\n\r\n      // CHANGE 2 REMOVED\r\n      // async function getMap(manifestUrl, ns) {\r\n      //   if (!_manifest) _manifest = await loadJSON(manifestUrl);\r\n      //   const mapFile = _manifest[`${ns}.map`];\r\n      //   if (!mapFile) return null;\r\n      //   if (!_mapsByNs[ns]) {\r\n      //     const base = new URL(manifestUrl, location.origin);\r\n      //     _mapsByNs[ns] = await loadJSON(new URL(mapFile, base).toString());\r\n      //   }\r\n      //   return _mapsByNs[ns];\r\n      // }\r\n\r\n      // In your observer callback:\r\n\r\n      // CHANGE 2 ADD\r\n      // Create observer once per loadAndApply call\r\n      state.observer = new MutationObserver((records) => {\r\n        if (isApplying) return; // ignore our own writes\r\n\r\n        for (const m of records) {\r\n          if (m.type === \"childList\") {\r\n            m.addedNodes.forEach((n) => schedule(n));\r\n          } else if (m.type === \"attributes\") {\r\n            // an element just got i18n flags set \u2192 (re)tag/reapply it\r\n            schedule(m.target);\r\n          }\r\n        }\r\n      });\r\n\r\n      // CHANGE 2 REMOVED\r\n      // state.observer = new MutationObserver(async (list) => {\r\n      //   const added = list\r\n      //     .flatMap((m) =>\r\n      //       m.type === \"childList\" ? Array.from(m.addedNodes) : []\r\n      //     )\r\n      //     .filter((n) => n.nodeType === 1); // Elements only\r\n\r\n      //   if (added.length) {\r\n      //     for (const root of added) {\r\n      //       for (const ns of state.opts.namespaces) {\r\n      //         const map = await getMap(state.opts.manifestUrl, ns);\r\n      //         // if (map) attach(map, root); // \u2190 tag inside this new subtree\r\n      //         if (map) attachMaps(map, root); // \u2190 tag inside this new subtree\r\n      //       }\r\n      //     }\r\n      //   }\r\n\r\n      //   applyAll(state.catalogs); // \u2190 now translation sticks again\r\n      // });\r\n\r\n      // CHANGE 1 REMOVED\r\n      // state.observer.observe(document.body, {\r\n      //   childList: true,\r\n      //   subtree: true,\r\n      //   attributes: true, // NEW\r\n      //   // characterData: true, // <-- catch text-node edits\r\n      //   attributeFilter: [\"data-i18n\", \"data-i18n-attr\", \"data-i18n-text\"], // NEW\r\n      // });\r\n\r\n      // CHANGE 1 ADD\r\n      // IMPORTANT: filter to just your flags, not translated attrs like title/aria-label\r\n      state.observer.observe(document.body, {\r\n        subtree: true,\r\n        childList: true,\r\n        attributes: true,\r\n        attributeFilter: [\"data-i18n\", \"data-i18n-attr\", \"data-i18n-html\"], // \u2190 fix here\r\n      });\r\n    }\r\n  }\r\n\r\n  async function init(opts) {\r\n    state.opts = Object.assign(\r\n      { namespaces: [\"profile\"], observeMutations: true },\r\n      opts || {}\r\n    );\r\n\r\n    // initial language (persisted or default)\r\n    const initial = (localStorage.getItem(STORE_KEY) || \"en\").toLowerCase();\r\n    await loadAndApply(initial);\r\n\r\n    state.ready = true;\r\n\r\n    // flush any queued toggles\r\n    if (state.pending.length) {\r\n      const queued = state.pending.splice(0);\r\n      for (const lang of queued) {\r\n        await loadAndApply(lang);\r\n      }\r\n    }\r\n\r\n    // react to cross-tab changes\r\n    window.addEventListener(\"storage\", (e) => {\r\n      if (e.key === STORE_KEY && e.newValue && e.newValue !== state.lang) {\r\n        loadAndApply(e.newValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Safe toggle: queue if not ready yet\r\n  async function setLangNoReload(next) {\r\n    if (!state.ready) {\r\n      state.pending.push(next);\r\n      // cosmetic: reflect intent immediately\r\n      document.documentElement.setAttribute(\"data-lang\", next);\r\n      document.documentElement.setAttribute(\r\n        \"lang\",\r\n        next === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n      );\r\n      return;\r\n    }\r\n    await loadAndApply(next);\r\n    document.documentElement.setAttribute(\"data-lang\", next);\r\n    document.documentElement.setAttribute(\r\n      \"lang\",\r\n      next === \"fr\" ? \"fr-CA\" : \"en-CA\"\r\n    );\r\n  }\r\n\r\n  function t(key) {\r\n    return state.catalogs[key] ?? key;\r\n  }\r\n\r\n  function fmtNumber(n, o) {\r\n    return new Intl.NumberFormat(\r\n      state.lang === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n      o\r\n    ).format(n);\r\n  }\r\n\r\n  function fmtDate(d, o) {\r\n    const dt = d instanceof Date ? d : new Date(d);\r\n    return new Intl.DateTimeFormat(\r\n      state.lang === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n      o\r\n    ).format(dt);\r\n  }\r\n\r\n  // Optional: tiny debug snapshot\r\n  function __debug() {\r\n    return {\r\n      lang: state.lang,\r\n      ready: state.ready,\r\n      pending: [...state.pending],\r\n      opts: state.opts && {\r\n        ...state.opts,\r\n        manifestUrl: state.opts.manifestUrl,\r\n      },\r\n      hasObserver: !!state.observer,\r\n      catalogKeys: Object.keys(state.catalogs).length,\r\n    };\r\n  }\r\n\r\n  window.ThriveI18n = {\r\n    init,\r\n    setLangNoReload,\r\n    t,\r\n    fmtNumber,\r\n    fmtDate,\r\n    __debug,\r\n    get ready() {\r\n      return state.ready;\r\n    },\r\n  };\r\n})();\r\n", "const dbg = (m, o) => console.log(\"[i18n]\", m, o ?? \"\");\r\n\r\n// NEW START\r\n\r\n// --- dynamic formatter helpers (reuse for any counters)\r\n\r\n// function refreshSelectpicker(selector) {\r\n//   try {\r\n//     if (window.jQuery && jQuery.fn.selectpicker) {\r\n//       jQuery(selector).selectpicker(\"refresh\");\r\n//     }\r\n//   } catch (_) {}\r\n// }\r\n\r\nfunction formatCount(keyBase, count) {\r\n  const k = count === 1 ? `${keyBase}.one` : `${keyBase}.other`;\r\n  const tpl = ThriveI18n.t(k) || ThriveI18n.t(`${keyBase}.other`) || \"{count}\";\r\n  return tpl.replace(\"{count}\", String(count));\r\n}\r\nfunction updateCountAt(selector, keyBase) {\r\n  const el = document.querySelector(selector);\r\n  if (!el) return;\r\n  const m = (el.textContent || \"\").match(/\\d+/);\r\n  if (!m) return;\r\n  const n = parseInt(m[0], 10);\r\n  el.textContent = formatCount(keyBase, n);\r\n}\r\n\r\n// --- page-specific extras\r\nfunction runCommunitiesNodeExtras() {\r\n  // counts like \"0 total\" \u2192 \"{count} au total\"\r\n  console.log(\"runCommunitiesNodeExtras called\");\r\n  // updateCountAt(\r\n  //   \"#MainCopy_ctl29_lbCommunityCount .Count.text-muted\",\r\n  //   \"communities.count\"\r\n  // );\r\n}\r\n\r\n// function runFollowingConnectionsExtras() {\r\n//   // refresh the filter dropdown UI if Bootstrap-Select is active\r\n//   refreshSelectpicker(\"[id^='FollowedContent_'][id$='-type-filter']\");\r\n// }\r\n\r\n// Optional: add more pages later\r\nconst pageExtras = [\r\n  {\r\n    test: (p) => /^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/.test(p),\r\n    run: runCommunitiesNodeExtras,\r\n  },\r\n  // {\r\n  //   test: (p) =>\r\n  //     /^\\/profile\\/connections\\/following-connections(?:\\/|$)/.test(p),\r\n  //   run: runFollowingConnectionsExtras,\r\n  // },\r\n];\r\n\r\n// const pageExtras = [\r\n//   {\r\n//     test: (p) => /^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/.test(p),\r\n//     run: runCommunitiesNodeExtras,\r\n//   },\r\n// ];\r\n\r\nfunction runExtrasForPath(pathname = location.pathname) {\r\n  for (const { test, run } of pageExtras) {\r\n    if (test(pathname)) {\r\n      console.log(\"RUN FOR\", pathname);\r\n      run();\r\n    }\r\n  }\r\n}\r\n// NEW END\r\n\r\n// function pickNamespaces(path) {\r\n//   // always include base profile strings\r\n//   const base = [\"profile\"];\r\n\r\n//   // connections\r\n//   if (/^\\/profile\\/connections\\/contacts(?:\\/|$)/.test(path))\r\n//     return [...base, \"connections\"];\r\n//   if (/^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/.test(path))\r\n//     return [...base, \"communities\"]; // <-- name your ns \"communities\"\r\n//   if (/^\\/profile\\/connections\\/following-connections(?:\\/|$)/.test(path))\r\n//     return [...base, \"following\"];\r\n\r\n//   // contributions\r\n//   if (/^\\/profile\\/contributions\\/contributions-summary(?:\\/|$)/.test(path))\r\n//     return [...base, \"contribSummary\"];\r\n//   if (\r\n//     /^\\/profile\\/contributions\\/contributions-achievements(?:\\/|$)/.test(path)\r\n//   )\r\n//     return [...base, \"contribAchievements\"];\r\n//   if (/^\\/profile\\/contributions\\/contributions-list(?:\\/|$)/.test(path))\r\n//     return [...base, \"contribList\"];\r\n\r\n//   // my account (use one ns per sub-section or a single \"account\" ns with keys grouped)\r\n//   if (/^\\/profile\\/myaccount\\/changepassword(?:\\/|$)/.test(path))\r\n//     return [...base, \"accountChangePassword\"];\r\n//   if (/^\\/profile\\/myaccount\\/mysignature(?:\\/|$)/.test(path))\r\n//     return [...base, \"accountSignature\"];\r\n//   if (/^\\/profile\\/myaccount\\/inbox(?:\\/|$)/.test(path))\r\n//     return [...base, \"accountInbox\"];\r\n\r\n//   // settings with section=...\r\n//   // if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/.test(path)) {\r\n//   //   const sec = new URL(location.href).searchParams.get(\"section\") || \"\";\r\n//   //   console.log(\"XXX section is \", sec);\r\n//   //   if (sec === \"privacy\") return [...base, \"accountSettingsPrivacy\"];\r\n//   //   if (sec === \"email\") return [...base, \"accountSettingsEmail\"];\r\n//   //   if (sec === \"rssfeeds\") return [...base, \"accountSettingsRss\"];\r\n//   //   if (sec === \"subscriptions\")\r\n//   //     return [...base, \"accountSettingsSubscriptions\"];\r\n//   //   return [...base, \"accountSettings\"]; // default tab\r\n//   // }\r\n\r\n//   if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/.test(path)) {\r\n//     const sec = new URL(location.href).searchParams.get(\"section\") || \"\";\r\n//     const key = sec.trim().toLowerCase();\r\n//     // console.log(\"XXX section is \", key);\r\n//     const map = {\r\n//       privacy: \"accountSettingsPrivacy\",\r\n//       email: \"accountSettingsEmail\",\r\n//       rssfeeds: \"accountSettingsRss\",\r\n//       subscriptions: \"accountSettingsSubscriptions\",\r\n//     };\r\n\r\n//     return [...base, map[key] || \"accountSettings\"]; // default tab\r\n//   }\r\n\r\n//   // the base profile page (bio, education, awards, etc.)\r\n//   if (/^\\/profile(?:\\/|$)/.test(path)) return base;\r\n\r\n//   if (/^\\/network\\/members(?:\\/|$)/.test(path))\r\n//     return [...base, \"networkMembers\"];\r\n//   // others: no i18n\r\n//   return [];\r\n// }\r\n\r\nfunction getParamCI(url, name) {\r\n  // console.log(\"PARAM \", url, name);\r\n  // case-insensitive query param getter\r\n  const target = name.toLowerCase();\r\n  for (const [k, v] of url.searchParams.entries()) {\r\n    console.log(\"c \", k, v);\r\n    if (k.toLowerCase() === target) return v;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction pickNamespaces(currentUrlOrPath) {\r\n  // normalize to pathname and params\r\n  const url =\r\n    typeof currentUrlOrPath === \"string\"\r\n      ? new URL(currentUrlOrPath, location.origin)\r\n      : currentUrlOrPath instanceof URL\r\n        ? currentUrlOrPath\r\n        : new URL(location.href);\r\n\r\n  // collapse duplicate slashes; ensure leading slash\r\n  const rawPath = (url.pathname || \"/\").replace(/\\/{2,}/g, \"/\");\r\n\r\n  // Support microsite prefix\r\n  const path = rawPath.replace(/^\\/sandboxmicrosite(?=\\/|$)/i, \"\") || \"/\";\r\n\r\n  const section = (getParamCI(url, \"section\") || \"\").trim().toLowerCase();\r\n\r\n  // base (no \"profile\" here)\r\n  // const base = [\"nav\", \"footer\"];\r\n  const base = [\"header\"];\r\n  const out = new Set(base);\r\n\r\n  // helper to add one or more ns\r\n  const add = (ns) => {\r\n    if (!ns) return;\r\n    if (Array.isArray(ns)) ns.forEach((n) => n && out.add(n));\r\n    else out.add(ns);\r\n  };\r\n\r\n  // Add \"profile\" only for /profile...\r\n\r\n  if (/^\\/profile(?:\\/|$)/i.test(path)) out.add(\"profile\");\r\n  if (/^\\/people(?:\\/|$)/i.test(path)) out.add(\"profile\");\r\n  // connections\r\n  if (/^\\/profile\\/connections\\/contacts(?:\\/|$)/i.test(path))\r\n    add(\"connections\");\r\n  if (/^\\/profile\\/connections\\/communities(?:\\/|$)/i.test(path))\r\n    add(\"communities\");\r\n  if (/^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/i.test(path))\r\n    add(\"communitiesNode\");\r\n  if (/^\\/profile\\/connections\\/following-connections(?:\\/|$)/i.test(path))\r\n    add(\"following\");\r\n\r\n  // contributions\r\n  if (/^\\/profile\\/contributions\\/contributions-summary(?:\\/|$)/i.test(path))\r\n    add(\"contribSummary\");\r\n  if (\r\n    /^\\/profile\\/contributions\\/contributions-achievements(?:\\/|$)/i.test(path)\r\n  )\r\n    add(\"contribAchievements\");\r\n  if (/^\\/profile\\/contributions\\/contributions-list(?:\\/|$)/i.test(path))\r\n    add(\"contribList\");\r\n\r\n  // my account\r\n  if (/^\\/profile\\/myaccount\\/changepassword(?:\\/|$)/i.test(path))\r\n    add(\"accountChangePassword\");\r\n  if (/^\\/profile\\/myaccount\\/mysignature(?:\\/|$)/i.test(path))\r\n    add(\"accountSignature\");\r\n  if (/^\\/profile\\/myaccount\\/inbox(?:\\/|$)/i.test(path)) add(\"accountInbox\");\r\n\r\n  if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/i.test(path)) {\r\n    const map = {\r\n      privacy: \"accountSettingsPrivacy\",\r\n      email: \"accountSettingsEmail\",\r\n      rssfeeds: \"accountSettingsRss\",\r\n      subscriptions: \"accountSettingsSubscriptions\",\r\n    };\r\n    add(map[section]);\r\n  }\r\n\r\n  // directory\r\n  if (/^\\/network\\/members(?:\\/|$)/i.test(path)) add(\"networkMembers\");\r\n\r\n  // top-level static pages\r\n  if (/^\\/contactus(?:\\/|$)/i.test(path)) add(\"contact\");\r\n\r\n  // XXX temporary\r\n  if (/^\\/login(?:\\/|$)/i.test(path)) add(\"login\");\r\n  if (/^\\/participate\\/postmessage(?:\\/|$)/i.test(path)) add(\"postMessage\");\r\n  if (/^\\/participate\\/add-new-entry(?:\\/|$)/i.test(path)) add(\"addLibrary\");\r\n  if (/^\\/events\\/calendar(?:\\/|$)/i.test(path)) add(\"eventsCalendar\");\r\n\r\n  // if (/^\\/communities\\/?$/i.test(path)) {\r\n  //   out.add(\"community\"); // or \"communitiesTabs\" if you prefer that name\r\n  // }\r\n  if (/^\\/communities\\/[^/]+(?:\\/|$)/i.test(path)) {\r\n    out.add(\"community\");\r\n  }\r\n\r\n  // if (/^\\/communities\\/invite-community\\/invite-community(?:\\/|$)/i.test(path))\r\n  //   out.add(\"communityInvite\");\r\n\r\n  const inviteRe =\r\n    /^\\/communities(?:\\/community-home)?\\/invite-community(?:\\/digestviewer)?(?:\\/|$)/i;\r\n  if (inviteRe.test(path)) out.add(\"communityInvite\");\r\n\r\n  if (/^\\/communities\\/mycommunities(?:\\/|$)/i.test(path))\r\n    out.add(\"communityMy\");\r\n\r\n  // if (/^\\/communities\\/community-home(?:\\/|$)/i.test(path)) out.add(\"community\");\r\n  if (/^\\/communities\\/community-home\\/digestviewer(?:\\/|$)/i.test(path))\r\n    out.add(\"communityDigest\");\r\n\r\n  if (/^\\/communities\\/community-home\\/librarydocuments(?:\\/|$)/i.test(path))\r\n    out.add(\"communityLibrary\");\r\n\r\n  if (\r\n    /^\\/communities\\/community-home\\/recent-community-events(?:\\/|$)/i.test(\r\n      path,\r\n    )\r\n  )\r\n    out.add(\"communityEvents\");\r\n\r\n  if (/^\\/communities\\/community-home\\/community-members(?:\\/|$)/i.test(path))\r\n    out.add(\"communityMembers\");\r\n\r\n  // if (/^\\/communities\\/community-home\\/librarydocuments(?:\\/|$)/i.test(path)) {\r\n  //   out.add(\"communityLibrary\");\r\n  // }\r\n\r\n  // if (\r\n  //   /^\\/communities\\/community-home\\/recent-community-events(?:\\/|$)/i.test(\r\n  //     path\r\n  //   )\r\n  // ) {\r\n  //   out.add(\"communityEvents\");\r\n  // }\r\n\r\n  // if (/^\\/communities\\/community-home\\/community-members(?:\\/|$)/i.test(path)) {\r\n  //   out.add(\"communityMembers\");\r\n  // }\r\n  // if (/^\\/profile(?:\\/|$)/i.test(path)) out.add(\"profile\");\r\n  // Always return the collected set (includes \"profile\" when applicable)\r\n  return Array.from(out);\r\n}\r\n\r\n// function pickNamespaces(currentUrlOrPath) {\r\n//   // normalize to pathname and params\r\n//   const url =\r\n//     typeof currentUrlOrPath === \"string\"\r\n//       ? new URL(currentUrlOrPath, location.origin)\r\n//       : currentUrlOrPath instanceof URL\r\n//       ? currentUrlOrPath\r\n//       : new URL(location.href);\r\n\r\n//   // collapse duplicate slashes; ensure leading slash\r\n//   const rawPath = (url.pathname || \"/\").replace(/\\/{2,}/g, \"/\");\r\n\r\n//   // \uD83D\uDCA1 Support the microsite prefix: /sandboxmicrosite/...\r\n//   // If present, strip it so the rest of your regexes work unchanged.\r\n//   const path = rawPath.replace(/^\\/sandboxmicrosite(?=\\/|$)/i, \"\") || \"/\";\r\n\r\n//   const section = (getParamCI(url, \"section\") || \"\").trim().toLowerCase();\r\n//   const base = [\"nav\", \"profile\", \"footer\"];\r\n\r\n//   // connections\r\n//   if (/^\\/profile\\/connections\\/contacts(?:\\/|$)/i.test(path))\r\n//     return [...base, \"connections\"];\r\n//   if (/^\\/profile\\/connections\\/communities(?:\\/|$)/i.test(path))\r\n//     return [...base, \"communities\"];\r\n//   if (/^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/i.test(path))\r\n//     return [...base, \"communitiesNode\"];\r\n//   // console.log(\"PATH IS\", path);\r\n//   if (/^\\/profile\\/connections\\/following-connections(?:\\/|$)/i.test(path)) {\r\n//     // console.log(\"PATH \", path);\r\n//     return [...base, \"following\"];\r\n//   }\r\n\r\n//   // contributions\r\n//   if (/^\\/profile\\/contributions\\/contributions-summary(?:\\/|$)/i.test(path))\r\n//     return [...base, \"contribSummary\"];\r\n//   if (\r\n//     /^\\/profile\\/contributions\\/contributions-achievements(?:\\/|$)/i.test(path)\r\n//   )\r\n//     return [...base, \"contribAchievements\"];\r\n//   if (/^\\/profile\\/contributions\\/contributions-list(?:\\/|$)/i.test(path))\r\n//     return [...base, \"contribList\"];\r\n\r\n//   // my account\r\n//   if (/^\\/profile\\/myaccount\\/changepassword(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountChangePassword\"];\r\n//   if (/^\\/profile\\/myaccount\\/mysignature(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountSignature\"];\r\n//   if (/^\\/profile\\/myaccount\\/inbox(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountInbox\"];\r\n\r\n//   if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/i.test(path)) {\r\n//     const map = {\r\n//       privacy: \"accountSettingsPrivacy\",\r\n//       email: \"accountSettingsEmail\",\r\n//       rssfeeds: \"accountSettingsRss\",\r\n//       subscriptions: \"accountSettingsSubscriptions\",\r\n//     };\r\n//     const specific = map[section];\r\n//     return Array.from(new Set([...base, specific].filter(Boolean)));\r\n//   }\r\n\r\n//   // directory\r\n//   if (/^\\/network\\/members(?:\\/|$)/i.test(path))\r\n//     return [...base, \"networkMembers\"];\r\n\r\n//   // top-level static pages (add as needed)\r\n//   if (/^\\/contactus(?:\\/|$)/i.test(path)) return [...base, \"contactus\"];\r\n//   if (/^\\/login(?:\\/|$)/i.test(path)) return [...base, \"login\"];\r\n//   if (/^\\/participate\\/postmessage(?:\\/|$)/i.test(path))\r\n//     return [...base, \"postMessage\"];\r\n//   if (/^\\/participate\\/add-new-entry(?:\\/|$)/i.test(path))\r\n//     return [...base, \"addLibrary\"];\r\n//   if (/^\\/events\\/calendar(?:\\/|$)/i.test(path))\r\n//     return [...base, \"eventsCalendar\"];\r\n\r\n//   // base profile page (bio, education, awards, etc.)\r\n//   if (/^\\/profile(?:\\/|$)/i.test(path)) return base;\r\n\r\n//   // default: still include global bundles\r\n//   return base;\r\n// }\r\n\r\n// function pickNamespaces(currentUrlOrPath) {\r\n//   // normalize to pathname and params\r\n//   const url =\r\n//     typeof currentUrlOrPath === \"string\"\r\n//       ? new URL(currentUrlOrPath, location.origin)\r\n//       : currentUrlOrPath instanceof URL\r\n//       ? currentUrlOrPath\r\n//       : new URL(location.href);\r\n\r\n//   // console.log(\"url \", url);\r\n//   // collapse duplicate slashes; ensure leading slash\r\n//   const path = (url.pathname || \"/\").replace(/\\/{2,}/g, \"/\");\r\n//   // const section = (url.searchParams.get(\"section\") || \"\").trim().toLowerCase();\r\n//   const section = (getParamCI(url, \"section\") || \"\").trim().toLowerCase();\r\n//   const base = [\"nav\", \"profile\", \"footer\"];\r\n\r\n//   // connections\r\n//   if (/^\\/profile\\/connections\\/contacts(?:\\/|$)/i.test(path))\r\n//     return [...base, \"connections\"];\r\n//   if (/^\\/profile\\/connections\\/communities(?:\\/|$)/i.test(path))\r\n//     return [...base, \"communities\"]; // was \"communitiesnode\"?\r\n//   if (/^\\/profile\\/connections\\/communitiesnode(?:\\/|$)/i.test(path))\r\n//     return [...base, \"communitiesNode\"];\r\n//   if (/^\\/profile\\/connections\\/following-connections(?:\\/|$)/i.test(path))\r\n//     return [...base, \"following\"];\r\n\r\n//   // contributions\r\n//   if (/^\\/profile\\/contributions\\/contributions-summary(?:\\/|$)/i.test(path))\r\n//     return [...base, \"contribSummary\"];\r\n//   if (\r\n//     /^\\/profile\\/contributions\\/contributions-achievements(?:\\/|$)/i.test(path)\r\n//   )\r\n//     return [...base, \"contribAchievements\"];\r\n//   if (/^\\/profile\\/contributions\\/contributions-list(?:\\/|$)/i.test(path))\r\n//     return [...base, \"contribList\"];\r\n\r\n//   // my account\r\n//   if (/^\\/profile\\/myaccount\\/changepassword(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountChangePassword\"];\r\n//   if (/^\\/profile\\/myaccount\\/mysignature(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountSignature\"];\r\n//   if (/^\\/profile\\/myaccount\\/inbox(?:\\/|$)/i.test(path))\r\n//     return [...base, \"accountInbox\"];\r\n\r\n//   if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/i.test(path)) {\r\n//     const map = {\r\n//       privacy: \"accountSettingsPrivacy\",\r\n//       email: \"accountSettingsEmail\",\r\n//       rssfeeds: \"accountSettingsRss\",\r\n//       subscriptions: \"accountSettingsSubscriptions\",\r\n//     };\r\n//     const specific = map[section];\r\n//     // include both generic and specific (if present), and dedupe\r\n//     return Array.from(new Set([...base, specific].filter(Boolean)));\r\n//   }\r\n\r\n//   // if (/^\\/profile\\/myaccount\\/my-settings(?:\\/|$)/i.test(path)) {\r\n//   //   const map = {\r\n//   //     privacy: \"accountSettingsPrivacy\",\r\n//   //     email: \"accountSettingsEmail\",\r\n//   //     rssfeeds: \"accountSettingsRss\",\r\n//   //     subscriptions: \"accountSettingsSubscriptions\",\r\n//   //   };\r\n//   //   console.log(\"SECTION IS \", section);\r\n//   //   return [...base, map[section] || \"accountSettings\"];\r\n//   // }\r\n\r\n//   // directory\r\n//   if (/^\\/network\\/members(?:\\/|$)/i.test(path))\r\n//     return [...base, \"networkMembers\"];\r\n\r\n//   // top-level static pages (add as needed)\r\n//   if (/^\\/contactus(?:\\/|$)/i.test(path)) return [...base, \"contactus\"];\r\n//   if (/^\\/login(?:\\/|$)/i.test(path)) return [...base, \"login\"];\r\n\r\n//   if (/^\\/participate\\/postmessage(?:\\/|$)/i.test(path)) {\r\n//     return [...base, \"postMessage\"];\r\n//   }\r\n//   if (/^\\/participate\\/add-new-entry(?:\\/|$)/i.test(path)) {\r\n//     return [...base, \"addLibrary\"];\r\n//   }\r\n//   if (/^\\/events\\/calendar(?:\\/|$)/i.test(path)) {\r\n//     return [...base, \"eventsCalendar\"];\r\n//   }\r\n\r\n//   // if (/^\\/termsandconditions(?:\\/|$)/i.test(path)) return [...base, \"terms\"];\r\n//   // if (/^\\/home(?:\\/|$)/i.test(path)) return [...base, \"home\"];\r\n\r\n//   // base profile page (bio, education, awards, etc.)\r\n//   if (/^\\/profile(?:\\/|$)/i.test(path)) return base;\r\n\r\n//   // default: still include global bundles\r\n//   return base;\r\n// }\r\n\r\n// 2) re-attach hooks + re-apply current lang (used after partial postbacks)\r\nasync function reI18n() {\r\n  // console.log(\"reI18n pickNamespaces \", location.href);\r\n  // const namespaces = pickNamespaces(location.pathname);\r\n  const namespaces = pickNamespaces(new URL(location.href));\r\n  if (!namespaces.length) return;\r\n\r\n  const I18N_OPTS = {\r\n    manifestUrl:\r\n      \"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json\",\r\n    namespaces,\r\n  };\r\n\r\n  try {\r\n    // re-attach data-i18n/data-i18n-attr (idempotent)\r\n    await ThriveI18nBootstrap(I18N_OPTS);\r\n\r\n    // figure out current lang and re-apply\r\n    const lang =\r\n      ThriveI18n.__debug?.().lang ||\r\n      localStorage.getItem(\"preferredLang\") ||\r\n      document.documentElement.getAttribute(\"lang\") ||\r\n      \"en\";\r\n\r\n    // console.log(\"setting lang 1 \", lang);\r\n    await ThriveI18n.setLangNoReload(lang);\r\n    // document.documentElement.setAttribute(\"lang\", lang);\r\n    document.documentElement.setAttribute(\r\n      \"lang\",\r\n      lang === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n    );\r\n\r\n    // \uD83D\uDD39 CRITICAL FIX ???????????????????????????????????\r\n    // if (window.jQuery && jQuery.fn.selectpicker) {\r\n    //   jQuery(\".toselectpicker\").selectpicker(\"refresh\");\r\n    // }\r\n\r\n    dbg(\"reI18n applied\", { lang, namespaces });\r\n\r\n    // \u279C run page-specific extras after partial postbacks\r\n    runExtrasForPath();\r\n  } catch (e) {\r\n    console.error(\"[i18n] reI18n error\", e);\r\n  }\r\n}\r\n\r\n// 3) install WebForms hooks ONCE (retry until PRM exists; fallback to __doPostBack)\r\nfunction installWebFormsHooks() {\r\n  let installed = false;\r\n\r\n  function wire() {\r\n    if (installed) return true;\r\n    if (window.Sys?.WebForms?.PageRequestManager) {\r\n      const prm = Sys.WebForms.PageRequestManager.getInstance();\r\n      prm.add_endRequest(() => setTimeout(reI18n, 0));\r\n      window.Sys?.Application?.add_load?.(() => setTimeout(reI18n, 0));\r\n      installed = true;\r\n      dbg(\"WebForms PRM hook installed\");\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  if (wire()) return;\r\n\r\n  const iv = setInterval(() => {\r\n    if (wire()) clearInterval(iv);\r\n  }, 200);\r\n  setTimeout(() => clearInterval(iv), 8000);\r\n\r\n  if (typeof window.__doPostBack === \"function\") {\r\n    const orig = window.__doPostBack;\r\n    window.__doPostBack = function () {\r\n      const r = orig.apply(this, arguments);\r\n      setTimeout(reI18n, 0);\r\n      return r;\r\n    };\r\n    dbg(\"Fallback __doPostBack patch installed\");\r\n  }\r\n}\r\n\r\n// 4) initial boot on DOM ready\r\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\r\n  dbg(\"DOMContentLoaded\");\r\n  // const namespaces = pickNamespaces(location.pathname);\r\n  const namespaces = pickNamespaces(new URL(location.href));\r\n  if (!namespaces.length) {\r\n    dbg(\"skip i18n (no namespaces for this page)\");\r\n    return;\r\n  }\r\n\r\n  const I18N_OPTS = {\r\n    manifestUrl:\r\n      \"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json\",\r\n    namespaces,\r\n  };\r\n\r\n  await ThriveI18nBootstrap(I18N_OPTS);\r\n  await ThriveI18n.init({ ...I18N_OPTS, observeMutations: true });\r\n\r\n  // set initial lang (persisted choice wins)\r\n  const initial = (\r\n    localStorage.getItem(\"preferredLang\") ||\r\n    document.documentElement.getAttribute(\"lang\") ||\r\n    \"en\"\r\n  ).toLowerCase();\r\n  await ThriveI18n.setLangNoReload(initial);\r\n  // console.log(\"setting lang 2 \", initial);\r\n  // document.documentElement.setAttribute(\"lang\", initial);\r\n\r\n  document.documentElement.setAttribute(\r\n    \"lang\",\r\n    initial === \"fr\" ? \"fr-CA\" : \"en-CA\",\r\n  );\r\n  dbg(\"init complete\", { initial, namespaces });\r\n\r\n  // \u279C run page-specific extras on first paint\r\n  runExtrasForPath();\r\n  installWebFormsHooks(); // <-- call it once here\r\n});\r\n\r\n// Oct 6 REMOVED USER MAIN HANDLER\r\n// // 5) (optional) language toggle\r\n// document.addEventListener(\"click\", async (e) => {\r\n//   const a = e.target.closest(\"[data-toggle-lang]\");\r\n//   if (!a) return;\r\n//   e.preventDefault();\r\n//   const next = a.getAttribute(\"data-toggle-lang\");\r\n//   try {\r\n//     localStorage.setItem(\"preferredLang\", next);\r\n//     await ThriveI18n.setLangNoReload(next);\r\n//     document.documentElement.setAttribute(\"lang\", next);\r\n//     dbg(\"toggled\", next);\r\n//   } catch (err) {\r\n//     console.error(\"[i18n] toggle error\", err);\r\n//   }\r\n// });\r\n", "// dynamic-i18n.js (single file, page-scoped renders, no MutationObserver)\r\n(() => {\r\n  /// GGG START\r\n  function translateDynamicUl(ulId, map, parentId, eventName) {\r\n    // default to your event name\r\n    eventName = eventName || \"langchange\";\r\n\r\n    function getLocaleSafe() {\r\n      try {\r\n        // prefer event-provided value; fallback to getLocale/html lang\r\n        return (\r\n          (typeof getLocale === \"function\" && getLocale()) ||\r\n          document.documentElement.lang ||\r\n          \"en\"\r\n        );\r\n      } catch (e) {\r\n        return document.documentElement.lang || \"en\";\r\n      }\r\n    }\r\n\r\n    function norm(s) {\r\n      return (s || \"\").replace(/\\s+/g, \" \").trim();\r\n    }\r\n\r\n    function applyForLocale(locale) {\r\n      var ul = document.getElementById(ulId);\r\n      if (!ul) {\r\n        // console.log(\"applyForLocale CANNOT FIND \", ulId, locale);\r\n        return;\r\n      }\r\n      // console.log(\"applyForLocale FOUND \", ulId, locale);\r\n      var lis = ul.querySelectorAll(\"li\");\r\n      for (var i = 0; i < lis.length; i++) {\r\n        var li = lis[i];\r\n        if (!li.dataset.i18nOrig) li.dataset.i18nOrig = norm(li.textContent);\r\n        var en = li.dataset.i18nOrig;\r\n        var fr = map[en];\r\n        if (locale === \"fr\" && fr) {\r\n          if (li.textContent !== fr) li.textContent = fr;\r\n          li.dataset.i18nApplied = \"1\";\r\n        } else {\r\n          if (li.textContent !== en) li.textContent = en;\r\n          li.dataset.i18nApplied = \"\";\r\n        }\r\n      }\r\n    }\r\n\r\n    function once() {\r\n      applyForLocale(getLocaleSafe());\r\n    }\r\n\r\n    var anchor =\r\n      (parentId && document.getElementById(parentId)) || document.body;\r\n\r\n    // initial pass\r\n    if (document.readyState === \"loading\") {\r\n      // console.log(\"loading\");\r\n      document.addEventListener(\"DOMContentLoaded\", once, { once: true });\r\n    } else {\r\n      // console.log(\"once\");\r\n      once();\r\n    }\r\n\r\n    // listen to your custom language event\r\n    window.addEventListener(eventName, function (ev) {\r\n      // support {detail:{lang}} and {detail:{locale}}\r\n      var next =\r\n        (ev && ev.detail && (ev.detail.lang || ev.detail.locale)) ||\r\n        getLocaleSafe();\r\n      applyForLocale(next);\r\n    });\r\n\r\n    // also react when <html lang=\"...\"> changes (in case you set it)\r\n    if (window.MutationObserver) {\r\n      var langMo = new MutationObserver(once);\r\n      langMo.observe(document.documentElement, {\r\n        attributes: true,\r\n        attributeFilter: [\"lang\"],\r\n      });\r\n    }\r\n\r\n    // observe DOM under a stable parent so UL replacements get translated\r\n    if (window.MutationObserver) {\r\n      var mo = new MutationObserver(once);\r\n      mo.observe(anchor, {\r\n        childList: true,\r\n        subtree: true,\r\n        characterData: true,\r\n      });\r\n    }\r\n\r\n    // survive ASP.NET WebForms partial postbacks\r\n    if (window.Sys && Sys.WebForms && Sys.WebForms.PageRequestManager) {\r\n      try {\r\n        var prm = Sys.WebForms.PageRequestManager.getInstance();\r\n        prm.add_endRequest(once);\r\n      } catch (e) {}\r\n    }\r\n  }\r\n  /// GGG  END\r\n\r\n  // ---------------- Shared helpers ----------------\r\n  function getLocale() {\r\n    try {\r\n      const v = (localStorage.getItem(\"preferredLang\") || \"en\").toLowerCase();\r\n      return v === \"fr\" ? \"fr\" : \"en\";\r\n    } catch {\r\n      return \"en\";\r\n    }\r\n  }\r\n\r\n  // Parsers\r\n\r\n  // Shared helper\r\n  function parseCommunityName(text) {\r\n    // \"Invite people to join the Sandbox Community community\" -> \"Sandbox Community\"\r\n    const m = String(text)\r\n      .trim()\r\n      .match(/^Invite people to join\\s+(?:the\\s+)?(.+?)(?:\\s+community)?$/i);\r\n    return m ? m[1].trim() : null;\r\n  }\r\n\r\n  function parseTotalCount(text) {\r\n    const m = String(text).match(/(\\d+)/);\r\n    return m ? { total: Number(m[1]) } : null;\r\n  }\r\n\r\n  function parseRangeLabel(text) {\r\n    const m = String(text)\r\n      .trim()\r\n      .match(/(\\d+)\\D+(\\d+)\\D+(\\d+)/);\r\n    if (!m) return null;\r\n    const [, start, end, total] = m.map(Number);\r\n    return { start, end, total };\r\n  }\r\n  function parseLastJoined(text) {\r\n    const m = String(text)\r\n      .trim()\r\n      .match(/(\\d+)\\s+(day|days|month|months|year|years)/i);\r\n    if (!m) return null;\r\n    const n = Number(m[1]);\r\n    const w = m[2].toLowerCase();\r\n    const unitKey = w.startsWith(\"day\")\r\n      ? \"day\"\r\n      : w.startsWith(\"month\")\r\n        ? \"month\"\r\n        : \"year\";\r\n    return { n, unitKey };\r\n  }\r\n\r\n  // Localized pieces\r\n  const templates = {\r\n    contacts: {\r\n      en: ({ start, end, total }) => `Showing ${start} to ${end} of ${total}`,\r\n      fr: ({ start, end, total }) =>\r\n        `Affichage des \u00E9l\u00E9ments ${start} \u00E0 ${end} sur ${total}`,\r\n    },\r\n    lastJoined: {\r\n      en: ({ n, unit }) => `last person joined ${n} ${unit} ago`,\r\n      fr: ({ n, unit }) => `derni\u00E8re personne inscrite il y a ${n} ${unit}`,\r\n    },\r\n    totalCount: {\r\n      en: ({ total }) => `${total} total`,\r\n      fr: ({ total }) => `${total} au total`,\r\n    },\r\n    rangeWithTotal: {\r\n      en: ({ start, end, total }) => `${start} to ${end} of ${total} total`,\r\n      fr: ({ start, end, total }) => `${start} \u00E0 ${end} sur ${total} au total`,\r\n    },\r\n  };\r\n\r\n  const UNITS = {\r\n    en: {\r\n      day: (n) => (n === 1 ? \"day\" : \"days\"),\r\n      month: (n) => (n === 1 ? \"month\" : \"months\"),\r\n      year: (n) => (n === 1 ? \"year\" : \"years\"),\r\n    },\r\n    fr: {\r\n      day: (n) => (n === 1 ? \"jour\" : \"jours\"),\r\n      month: () => \"mois\",\r\n      year: (n) => (n === 1 ? \"an\" : \"ans\"),\r\n    },\r\n  };\r\n\r\n  // GGGGG START\r\n  const PROVINCE_MAP = {\r\n    \"Alberta (AB)\": \"Alberta (Alb.)\",\r\n    \"British Columbia (BC)\": \"Colombie-Britannique (C.-B.)\",\r\n    \"Manitoba (MB)\": \"Manitoba (Man.)\",\r\n    \"New Brunswick (NB)\": \"Nouveau-Brunswick (N.-B.)\",\r\n    \"Newfoundland and Labrador (NL)\": \"Terre-Neuve-et-Labrador (T.-N.-L.)\",\r\n    \"Northwest Territories (NT)\": \"Territoires du Nord-Ouest (T.N.-O.)\",\r\n    \"Nova Scotia (NS)\": \"Nouvelle-\u00C9cosse (N.-\u00C9.)\",\r\n    \"Nunavut (NU)\": \"Nunavut (Nt)\",\r\n    \"Ontario (ON)\": \"Ontario (Ont.)\",\r\n    \"Prince Edward Island (PE)\": \"\u00CEle-du-Prince-\u00C9douard (\u00CE.-P.-\u00C9.)\",\r\n    \"Quebec (QC)\": \"Qu\u00E9bec (Qc)\",\r\n    \"Saskatchewan (SK)\": \"Saskatchewan (Sask.)\",\r\n    \"Yukon (YT)\": \"Yukon (Yn)\",\r\n    Other: \"Autre\",\r\n    \"Not Specified\": \"Non pr\u00E9cis\u00E9\",\r\n  };\r\n\r\n  const SECTOR_MAP = {\r\n    Other: \"Autre\",\r\n    Academia: \"Milieu universitaire\",\r\n    Consulting: \"Consultation\",\r\n    \"Federal government\": \"Gouvernement f\u00E9d\u00E9ral\",\r\n    Foundation: \"Fondation\",\r\n    \"Municipal government\": \"Administration municipale\",\r\n    \"Non-profit sector\": \"Secteur sans but lucratif\",\r\n    \"Private sector\": \"Secteur priv\u00E9\",\r\n    \"Provincial government\": \"Gouvernement provincial\",\r\n    \"Not Specified\": \"Non pr\u00E9cis\u00E9\",\r\n  };\r\n\r\n  const GEO_MAP = {\r\n    \"Large urban (100,000 or more)\": \"Grande zone urbaine (100\u2009000 ou plus)\",\r\n    \"Medium urban (30,000 to 99,999)\": \"Moyenne zone urbaine (30 000 \u00E0 99 999)\",\r\n    \"Small urban (less than 30,000)\": \"Petite zone urbaine (moins de 30\u2009000)\",\r\n    Northern: \"Nord\",\r\n    Rural: \"Rurale\",\r\n  };\r\n\r\n  // Financial Empowerment Services Offered (EN \u2192 FR)\r\n  const FE_OFFERED_MAP = {\r\n    \"Tax-filing support (e.g. free tax clinics)\":\r\n      \"Soutien \u00E0 la d\u00E9claration de revenus (p. ex. cliniques fiscales gratuites)\",\r\n    \"Help accessing benefits\": \"Aide pour acc\u00E9der aux prestations\",\r\n    \"One-on-one financial coaching (e.g. financial goal setting and action planning)\":\r\n      \"Encadrement financier individuel (p. ex., \u00E9tablissement d'objectifs financiers et planification des actions)\",\r\n    \"Financial counselling and problem solving (including debt management)\":\r\n      \"Conseils financiers et r\u00E9solution de probl\u00E8mes (y compris la gestion de la dette)\",\r\n    \"Financial education\": \"\u00C9ducation financi\u00E8re\",\r\n    None: \"Aucun\",\r\n    Other: \"Autre\",\r\n  };\r\n\r\n  // Other Services Offered (EN \u2192 FR)\r\n  const OTHER_SERVICES_MAP = {\r\n    \"Access to ID\": \"Acc\u00E8s \u00E0 l'identifiant\",\r\n    \"Banking Access Support\": \"Soutien pour l\u2019acc\u00E8s bancaire\",\r\n    \"Budget Counselling\": \"Conseils budg\u00E9taires\",\r\n    \"Consumer Advocacy\": \"Repr\u00E9sentation des consommateurs\",\r\n    \"Debt Management\": \"Gestion de la dette\",\r\n    \"Eviction Prevention Loan Program\":\r\n      \"Programme de pr\u00EAts pour la pr\u00E9vention des expulsions\",\r\n    \"Housing or Homelessness Support\":\r\n      \"Soutien en mati\u00E8re de logement et d\u2019itin\u00E9rance\",\r\n    \"Income Support\": \"Soutien au revenu\",\r\n    \"RDSP Info & Support\": \"Renseignements sur le REEI et soutien\",\r\n    \"RESP Info & Support\": \"Renseignements sur le REEE et soutien\",\r\n    None: \"Aucun\",\r\n    Other: \"Autre\",\r\n  };\r\n\r\n  // Language Preference (EN \u2192 FR)\r\n  const LANG_PREF_MAP = {\r\n    English: \"Anglais\",\r\n    French: \"Fran\u00E7ais\",\r\n  };\r\n\r\n  const ORG_LANG_PREF_MAP = {\r\n    English: \"Anglais\",\r\n    French: \"Fran\u00E7ais\",\r\n    Other: \"Autre\",\r\n  };\r\n\r\n  // Populations Served (EN \u2192 FR)\r\n  const POPS_MAP = {\r\n    \"Older people, Elders, or Seniors (65+ years old)\":\r\n      \"Personnes \u00E2g\u00E9es ou a\u00EEn\u00E9s (autochtones) (65 ans et plus)\",\r\n    \"Youth (15-30 years old)\": \"Jeunes (entre 15 et 30 ans)\",\r\n    \"Racialized people\": \"Personnes racialis\u00E9es\",\r\n    \"Black communities\": \"Communaut\u00E9s noires\",\r\n    \"Newcomers, Refugees, or Non-Status people\":\r\n      \"Nouveaux arrivants, r\u00E9fugi\u00E9s ou Autochtones non inscrits\",\r\n    \"First Nations, M\u00E9tis, and Inuit\": \"Premi\u00E8res Nations, M\u00E9tis et Inuit\",\r\n    \"Those living with disabilities\": \"Personnes en situation de handicap\",\r\n    \"Those who are unhoused\": \"Personnes sans abri\",\r\n    \"Those living on low incomes\": \"Personnes \u00E0 faible revenu\",\r\n    Women: \"Femmes\",\r\n    \"2SLGBTQI+\": \"2ELGBTQI+\",\r\n    \"Northern Communities\": \"Communaut\u00E9s du Nord\",\r\n    \"Rural or Remote Communities\": \"Communaut\u00E9s rurales ou \u00E9loign\u00E9es\",\r\n    \"Official language minority community\":\r\n      \"Communaut\u00E9 de langue officielle en situation minoritaire\",\r\n    Other: \"Autre\",\r\n  };\r\n\r\n  // GGGGG START\r\n\r\n  // ---------------- Page registry ----------------\r\n  const PAGES = new Map(); // path -> render function\r\n\r\n  // function register(path, renderFn) {\r\n  //   PAGES.set(path.replace(/\\/+$/, \"\"), renderFn);\r\n  // }\r\n\r\n  /// GGGG BEGIn\r\n\r\n  function register(when, renderFn) {\r\n    PAGES.set(when, renderFn);\r\n  }\r\n  function isActive(when) {\r\n    const path = location.pathname.replace(/\\/+$/, \"\") || \"/\";\r\n\r\n    if (typeof when === \"function\") return !!when(location);\r\n    if (when instanceof RegExp) return when.test(path);\r\n\r\n    if (typeof when === \"string\") {\r\n      const wanted = when.replace(/\\/+$/, \"\") || \"/\";\r\n      return path === wanted;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function activeRender() {\r\n    for (const [when, render] of PAGES) {\r\n      if (isActive(when)) return render;\r\n    }\r\n    return null;\r\n  }\r\n  /// GGGG BEGIn\r\n\r\n  // REMOVED THIS for the above GGGG BEGIn\r\n  // function activeRender() {\r\n  //   const path = location.pathname.replace(/\\/+$/, \"\");\r\n  //   return PAGES.get(path);\r\n  // }\r\n\r\n  function init() {\r\n    const renderFn = activeRender();\r\n    if (renderFn) renderFn();\r\n  }\r\n\r\n  ///GGGGGG START\r\n  register(\r\n    (loc) =>\r\n      loc.pathname.startsWith(\"/people/\") ||\r\n      loc.pathname.startsWith(\"/profile\"),\r\n    function () {\r\n      // console.log(\"DEBUG CALLED AS GEO_MAP\");\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl32_ulDemographicItems\",\r\n        PROVINCE_MAP,\r\n        \"MainCopy_ctl32_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl34_ulDemographicItems\",\r\n        GEO_MAP,\r\n        \"MainCopy_ctl34_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl36_ulDemographicItems\",\r\n        SECTOR_MAP,\r\n        \"MainCopy_ctl36_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl41_ulDemographicItems\",\r\n        FE_OFFERED_MAP,\r\n        \"MainCopy_ctl41_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl43_ulDemographicItems\",\r\n        OTHER_SERVICES_MAP,\r\n        \"MainCopy_ctl43_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl47_ulDemographicItems\",\r\n        LANG_PREF_MAP,\r\n        \"MainCopy_ctl47_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n      // translateDynamicUl(\r\n      //   \"MainCopy_ctl45_ulDemographicItems\",\r\n      //   LANG_PREF_MAP,\r\n      //   \"MainCopy_ctl45_ContactDemographicUpdatePanel\",\r\n      //   \"langchange\", // your event\r\n      // );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl45_ulDemographicItems\",\r\n        ORG_LANG_PREF_MAP,\r\n        \"MainCopy_ctl45_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      translateDynamicUl(\r\n        \"MainCopy_ctl38_ulDemographicItems\",\r\n        POPS_MAP,\r\n        \"MainCopy_ctl38_ContactDemographicUpdatePanel\",\r\n        \"langchange\", // your event\r\n      );\r\n\r\n      // wait ~2s, then refresh the picker\r\n      setTimeout(() => {\r\n        $(\"#MainCopy_ctl32_lbDemographicItems\").selectpicker(\"refresh\");\r\n        $(\"#MainCopy_ctl36_lbDemographicItems\").selectpicker(\"refresh\");\r\n      }, 2000);\r\n    },\r\n  );\r\n\r\n  // ALTERNATIVE VERION TO TRY ON SATURDAY@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n\r\n  register(\r\n    (loc) => loc.pathname.startsWith(\"/login\"),\r\n    function renderLogin() {\r\n      const $ = window.jQuery;\r\n      if (!$) return;\r\n\r\n      const IDS = [\r\n        \"0bca3586-218f-43b3-b059-0199734a100b-select\",\r\n        \"d4aedf2d-a642-4b70-81dd-0199734cd5a1-select\",\r\n        \"7ef9a3b6-0f46-4dac-b38b-0199734efe10-select\",\r\n        \"172d3906-c563-42c3-bff0-0199735b5682-select\",\r\n        \"303063c6-1cd6-4d75-8e3b-0199735e0e0d-select\",\r\n        \"eb4436bb-e703-484c-afc7-0199736d34bf-select\",\r\n        \"820d636e-9fed-4604-869e-0199736e70b7-select\",\r\n        \"c0dc62b2-8229-4be8-a60a-019c4d473226-select\",\r\n      ];\r\n\r\n      const COUNT_FMT = {\r\n        en: \"{0} items selected\",\r\n        fr: \"{0} \u00E9l\u00E9ments s\u00E9lectionn\u00E9s\",\r\n      };\r\n\r\n      function currentLang(e) {\r\n        const fromEvt = (e?.detail?.lang || \"\").toLowerCase();\r\n        if (fromEvt) return fromEvt.startsWith(\"fr\") ? \"fr\" : \"en\";\r\n\r\n        const docLang = (document.documentElement.lang || \"\").toLowerCase();\r\n        return docLang.startsWith(\"fr\") ? \"fr\" : \"en\";\r\n      }\r\n\r\n      function refreshSelectpickers(lang) {\r\n        if (!$.fn.selectpicker) return;\r\n\r\n        const fmt = COUNT_FMT[lang] || COUNT_FMT.en;\r\n\r\n        IDS.forEach((id) => {\r\n          const $el = $(`#${id}`);\r\n          if (!$el.length) return;\r\n\r\n          // Update internal plugin option\r\n          $el.data(\"countSelectedText\", fmt);\r\n\r\n          // Force rebuild\r\n          $el.selectpicker(\"refresh\");\r\n        });\r\n      }\r\n\r\n      // function refreshSelectpickers(lang) {\r\n      //   if (!$.fn.selectpicker) return;\r\n\r\n      //   const fmt = COUNT_FMT[lang] || COUNT_FMT.en;\r\n\r\n      //   // IDS.forEach((id) => {\r\n      //   //   const $el = $(`#${id}`);\r\n      //   //   if (!$el.length) return;\r\n\r\n      //   //   $el.attr(\"data-count-selected-text\", fmt);\r\n      //   //   $el.selectpicker(\"refresh\");\r\n      //   // });\r\n\r\n      //   // N selected\r\n      //   IDS.forEach((id) => {\r\n      //     const $el = $(`#${id}`);\r\n      //     if (!$el.length) return;\r\n\r\n      //     // update plugin option (NOT attribute)\r\n      //     $el.data(\"countSelectedText\", fmt);\r\n\r\n      //     $el.selectpicker(\"refresh\");\r\n      //   });\r\n      // }\r\n\r\n      function init() {\r\n        // Defer one paint cycle to ensure:\r\n        // 1. HL injected DOM\r\n        // 2. Your i18n text replacements applied\r\n        requestAnimationFrame(() => {\r\n          refreshSelectpickers(currentLang());\r\n        });\r\n      }\r\n\r\n      // Run immediately on page load\r\n      init();\r\n\r\n      // Re-run on language change\r\n      window.addEventListener(\"langchange\", function (e) {\r\n        requestAnimationFrame(() => {\r\n          refreshSelectpickers(currentLang(e));\r\n        });\r\n      });\r\n    },\r\n  );\r\n\r\n  // FOR NOW USE THE ABOVE ALTERNATIVE VERION TO TRY ON SATURDAY@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n  // DEGUG REGISTRATION FORM COMMENTED OUT TO CHECK BUG ON LOGIN PAGE 13 FEB 2013\r\n  // register(\r\n  //   (loc) => loc.pathname.startsWith(\"/login\"),\r\n  //   function renderLogin() {\r\n  //     const $ = window.jQuery;\r\n  //     if (!$ || !$.fn.selectpicker) return;\r\n\r\n  //     // Organization Location 0bca3586-218f-43b3-b059-0199734a100b-select\r\n  //     // Sector  d4aedf2d-a642-4b70-81dd-0199734cd5a1-select\r\n  //     // Financial Empowerment Services Offered 7ef9a3b6-0f46-4dac-b38b-0199734efe10-select\r\n  //     // Other Services Offered 172d3906-c563-42c3-bff0-0199735b5682-select\r\n  //     // Populations Served 303063c6-1cd6-4d75-8e3b-0199735e0e0d-select\r\n  //     // Geographic Area(s) Served eb4436bb-e703-484c-afc7-0199736d34bf-select\r\n  //     // Language you prefer us to use when communicating with you 820d636e-9fed-4604-869e-0199736e70b7-select\r\n  //     // Select all language(s) that your organization offers financial empowerment services in  c0dc62b2-8229-4be8-a60a-019c4d473226-select\r\n  //     const IDS = [\r\n  //       \"0bca3586-218f-43b3-b059-0199734a100b-select\",\r\n  //       \"d4aedf2d-a642-4b70-81dd-0199734cd5a1-select\",\r\n  //       \"7ef9a3b6-0f46-4dac-b38b-0199734efe10-select\",\r\n  //       \"172d3906-c563-42c3-bff0-0199735b5682-select\",\r\n  //       \"303063c6-1cd6-4d75-8e3b-0199735e0e0d-select\",\r\n  //       \"eb4436bb-e703-484c-afc7-0199736d34bf-select\",\r\n  //       \"820d636e-9fed-4604-869e-0199736e70b7-select\",\r\n  //       \"c0dc62b2-8229-4be8-a60a-019c4d473226-select\", //NEW\r\n  //     ];\r\n\r\n  //     const COUNT_FMT = {\r\n  //       en: \"{0} items selected\",\r\n  //       fr: \"{0} \u00E9l\u00E9ments s\u00E9lectionn\u00E9s\",\r\n  //     };\r\n\r\n  //     // FIXED precedence + tolerant of event.lang values like \"fr-CA\"\r\n  //     function currLang(e) {\r\n  //       const fromEvt = (e?.detail?.lang || \"\").toLowerCase();\r\n  //       if (fromEvt) return fromEvt.startsWith(\"fr\") ? \"fr\" : \"en\";\r\n  //       const doc = (document.documentElement.lang || \"\").toLowerCase();\r\n  //       return doc.startsWith(\"fr\") ? \"fr\" : \"en\";\r\n  //     }\r\n\r\n  //     function noneFromTitle($sel) {\r\n  //       let t = $sel.attr(\"title\") || \"Nothing selected\";\r\n  //       if (/^\\(.*\\)$/.test(t)) t = t.slice(1, -1);\r\n  //       return t;\r\n  //     }\r\n\r\n  //     function computeLabel($sel, lang) {\r\n  //       const none = noneFromTitle($sel);\r\n  //       const fmt =\r\n  //         $sel.attr(\"data-count-selected-text\") ||\r\n  //         COUNT_FMT[lang] ||\r\n  //         COUNT_FMT.en;\r\n  //       const $selOpts = $sel.find(\"option:selected\");\r\n  //       const n = $selOpts.length;\r\n  //       if (n === 0) return none;\r\n  //       if (n > 1) return fmt.replace(\"{0}\", String(n));\r\n  //       return $selOpts\r\n  //         .map((_, o) => o.textContent.trim())\r\n  //         .get()\r\n  //         .join(\", \");\r\n  //     }\r\n\r\n  //     function updateFilterOptionText(id, lang) {\r\n  //       const $sel = $(`[id=\"${id}\"]`);\r\n  //       const $btn = $(`.bootstrap-select [data-id=\"${id}\"]`);\r\n  //       if (!$sel.length || !$btn.length) return;\r\n  //       $btn.find(\".filter-option\").text(computeLabel($sel, lang));\r\n  //     }\r\n\r\n  //     // NEW ATTEMPT ONE BEGIN\r\n  //     function initAll() {\r\n  //       const lang = currLang();\r\n  //       const fmt = COUNT_FMT[lang] || COUNT_FMT.en; // fallback\r\n\r\n  //       IDS.forEach((id) => {\r\n  //         const $el = $(`[id=\"${id}\"]`);\r\n  //         if (!$el.length) return;\r\n\r\n  //         // avoid double-binding\r\n  //         if ($el.data(\"i18n-bound\")) return;\r\n\r\n  //         $el.attr(\"data-count-selected-text\", fmt);\r\n  //         $el.selectpicker(\"refresh\");\r\n  //         updateFilterOptionText(id, lang);\r\n\r\n  //         $el.off(\"changed.bs.select.i18n\").on(\"changed.bs.select.i18n\", () => {\r\n  //           updateFilterOptionText(id, currLang());\r\n  //         });\r\n\r\n  //         $el.data(\"i18n-bound\", true);\r\n  //       });\r\n  //     }\r\n\r\n  //     // run after DOM, then delay 500ms\r\n  //     if (document.readyState === \"loading\") {\r\n  //       document.addEventListener(\r\n  //         \"DOMContentLoaded\",\r\n  //         () => setTimeout(initAll, 500),\r\n  //         { once: true },\r\n  //       );\r\n  //     } else {\r\n  //       setTimeout(initAll, 500);\r\n  //     }\r\n\r\n  //     // When your app language changes, reapply strings and refresh\r\n  //     window.addEventListener(\"langchange\", (e) => {\r\n  //       const lang = currLang(e);\r\n  //       setTimeout(() => {\r\n  //         IDS.forEach((id) => {\r\n  //           const $el = $(`[id=\"${id}\"]`);\r\n  //           if (!$el.length) return;\r\n  //           $el.attr(\"data-count-selected-text\", COUNT_FMT[lang]);\r\n  //           $el.selectpicker(\"refresh\");\r\n  //           updateFilterOptionText(id, lang);\r\n  //         });\r\n  //       }, 0);\r\n  //     });\r\n  //   },\r\n  // );\r\n  ///GGGGGG END\r\n\r\n  // /advisory-committee\r\n  register(\"/advisory-committee\", function renderAdvisoryCommitteeTitle() {\r\n    const el = document.querySelector(\"#PageTitleH1\");\r\n    if (!el) return;\r\n\r\n    const MAP = {\r\n      en: \"Meet the Resilient Futures Advisory Committee\",\r\n      fr: \"Rencontrez le comit\u00E9 consultatif de l\u2019initiative Un avenir r\u00E9silient\",\r\n    };\r\n\r\n    const loc = getLocale();\r\n    const next = MAP[loc] || MAP.en;\r\n\r\n    if (el.textContent.trim() !== next) el.textContent = next;\r\n  });\r\n\r\n  register(\r\n    \"/sandboxmicrosite/communities/community-home/invite-community\",\r\n    function renderInviteCommunity() {\r\n      const sel = \"#MainCopy_ctl04_InviteToCommunityLabel\";\r\n      const host = document.querySelector(sel);\r\n      if (!host) return;\r\n\r\n      // Prefer the inner <strong>, if present\r\n      const target = host.querySelector(\"strong\") || host;\r\n\r\n      // Extract current name from whatever the platform rendered\r\n      const name =\r\n        parseCommunityName(target.textContent) || target.textContent.trim();\r\n\r\n      const loc = getLocale(); // your existing helper returning \"en\" | \"fr\"\r\n      const next =\r\n        loc === \"fr\"\r\n          ? `Invitez des personnes \u00E0 rejoindre la communaut\u00E9 ${name}`\r\n          : `Invite people to join ${name}`;\r\n\r\n      if (target.textContent !== next) target.textContent = next;\r\n    },\r\n  );\r\n\r\n  // ---------------- Page: /profile/connections/contacts ----------------\r\n  register(\"/profile/connections/contacts\", function renderContacts() {\r\n    const sel = \"[id$='FindContacts_ShowingLabel']\";\r\n    const el = document.querySelector(sel);\r\n    if (!el) return;\r\n\r\n    const data = parseRangeLabel(el.textContent);\r\n    if (!data) return;\r\n\r\n    const loc = getLocale();\r\n    const t = templates.contacts[loc] || templates.contacts.en;\r\n    const next = t(data);\r\n    if (el.textContent !== next) el.textContent = next;\r\n  });\r\n\r\n  // ---------------- Page: /profile/connections/communitiesnode ----------------\r\n  register(\r\n    \"/profile/connections/communitiesnode\",\r\n    function renderCommunitiesNode() {\r\n      // A) \u201Clast person joined \u2026 ago\u201D\r\n      const loc = getLocale();\r\n      const selLast = \"[id^='MainCopy_ctl29_lstCommunityList_lblLastUpdated_']\";\r\n      const unitFn = UNITS[loc] || UNITS.en;\r\n      const fmtLast = templates.lastJoined[loc] || templates.lastJoined.en;\r\n      document.querySelectorAll(selLast).forEach((el) => {\r\n        const data = parseLastJoined(el.textContent);\r\n        if (!data) return;\r\n        const unit = unitFn[data.unitKey](data.n);\r\n        const next = fmtLast({ n: data.n, unit });\r\n        if (el.textContent !== next) el.textContent = next;\r\n      });\r\n\r\n      // B) \u201C3 total\u201D\r\n      const selTotal = \"#MainCopy_ctl29_lbCommunityCount .Count\";\r\n      const totalEl = document.querySelector(selTotal);\r\n      if (totalEl) {\r\n        const data = parseTotalCount(totalEl.textContent);\r\n        if (data) {\r\n          const fmtTotal = templates.totalCount[loc] || templates.totalCount.en;\r\n          const next = fmtTotal(data);\r\n          if (totalEl.textContent !== next) totalEl.textContent = next;\r\n        }\r\n      }\r\n\r\n      // C) \u201CNo Results Found\u201D (only when there are no community rows)\r\n      // C) \u201CNo Results Found\u201D lives in a sibling node\r\n      (function translateNoResultsSibling() {\r\n        const container = document.getElementById(\r\n          \"MainCopy_ctl29_AllCommunitiesContainer\",\r\n        );\r\n        if (!container) return;\r\n\r\n        const parent = container.parentElement || container;\r\n        // look at *all* siblings (elements + text nodes)\r\n        const siblings = Array.from(parent.childNodes).filter(\r\n          (n) => n !== container,\r\n        );\r\n\r\n        // If any sibling is a result row, bail\r\n        const hasResults = siblings.some(\r\n          (n) =>\r\n            n.nodeType === 1 &&\r\n            n.classList?.contains(\"row\") &&\r\n            n.classList?.contains(\"rowContainer\") &&\r\n            n.classList?.contains(\"community-list\"),\r\n        );\r\n        if (hasResults) return;\r\n\r\n        // Find the placeholder sibling (can be a text node or a simple element with just the text)\r\n        const placeholder = siblings.find((n) => {\r\n          if (n.nodeType === 3) {\r\n            // text node\r\n            return /^\\s*no\\s+results\\s+found\\s*$/i.test(n.textContent);\r\n          }\r\n          if (n.nodeType === 1) {\r\n            // element\r\n            const txt = (n.textContent || \"\").trim();\r\n            return /^no\\s+results\\s+found$/i.test(txt);\r\n          }\r\n          return false;\r\n        });\r\n        if (!placeholder) return;\r\n\r\n        const msg = loc === \"fr\" ? \"Aucun r\u00E9sultat\" : \"No Results Found\";\r\n        if (placeholder.nodeType === 3) {\r\n          // preserve surrounding whitespace a bit\r\n          placeholder.textContent = \" \" + msg + \" \";\r\n        } else {\r\n          placeholder.textContent = msg;\r\n        }\r\n      })();\r\n    },\r\n  );\r\n\r\n  // /profile/connections/following-connections\r\n  register(\r\n    \"/profile/connections/following-connections\",\r\n    function renderFollowingConnections() {\r\n      // e.g. <div id=\"FollowedContent_39d10e5a0f...\">\r\n      const sel =\r\n        \"[id^='FollowedContent_'] .contributions-list-header .text-muted\";\r\n      const loc = getLocale();\r\n\r\n      document.querySelectorAll(sel).forEach((el) => {\r\n        const data = parseRangeLabel(el.textContent); // reuses your existing parser\r\n        if (!data) return;\r\n        const t = templates.contacts?.[loc] || templates.contacts.en;\r\n        const next = t(data);\r\n        if (el.textContent !== next) el.textContent = next;\r\n      });\r\n    },\r\n  );\r\n\r\n  register(\r\n    \"/profile/contributions/contributions-list\",\r\n    function renderContributionsList() {\r\n      const sel = \"#MainCopy_ctl29_SearchResultStatus .ResultStatus.text-muted\";\r\n      const el = document.querySelector(sel);\r\n      if (!el) return;\r\n\r\n      const raw = el.textContent;\r\n      const data = parseRangeLabel(raw); // reuse your existing (\\d+)\\D+(\\d+)\\D+(\\d+) parser\r\n      if (!data) return;\r\n\r\n      const loc = getLocale();\r\n      const hasWordTotal = /\\btotal\\b/i.test(raw);\r\n      const t = hasWordTotal\r\n        ? templates.rangeWithTotal[loc] || templates.rangeWithTotal.en\r\n        : templates.contacts[loc] || templates.contacts.en; // your \"Showing X to Y of Z\"\r\n\r\n      const next = t(data);\r\n      if (el.textContent !== next) el.textContent = next;\r\n    },\r\n  );\r\n\r\n  // ---------------- Boot + language toggle wiring ----------------\r\n  // DOM ready\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", init, { once: true });\r\n  } else {\r\n    init();\r\n  }\r\n\r\n  // Re-render the active page when the user toggles language\r\n  document.addEventListener(\"click\", (e) => {\r\n    const link = e.target.closest(\"[data-toggle-lang]\");\r\n    if (!link) return;\r\n    e.preventDefault();\r\n\r\n    // const lang = (link.getAttribute(\"data-toggle-lang\") || \"\").toLowerCase();\r\n    // try {\r\n    //   localStorage.setItem(\"preferredLang\", lang === \"fr\" ? \"fr\" : \"en\");\r\n    // } catch {}\r\n\r\n    const renderFn = activeRender();\r\n    if (renderFn) renderFn();\r\n  });\r\n})();\r\n"],
  "mappings": "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",
  "names": ["LANG_STORAGE_KEY", "languages", "normalize", "v", "getCurrentLang", "setDocumentLang", "lang", "code", "updateLanguage", "next", "err", "addLanguageToggle", "currentLang", "navBar", "li", "other", "l", "a", "e", "target", "init", "current", "loadJSON", "url", "r", "attach", "entries", "e", "selector", "type", "attr", "key", "nodes", "el", "existing", "parts", "s", "deduped", "run", "opts", "manifestUrl", "namespaces", "onlyIf", "manifest", "ns", "mapFile", "base", "mapUrl", "map", "STORE_KEY", "ATTRS", "state", "firstTextNode", "el", "n", "sameHTML", "a", "b", "setFirstText", "txt", "tn", "applyToElement", "tmap", "key", "val", "wantsHtml", "sig", "raw", "pairs", "s", "entry", "i", "attr", "k", "next", "applyAll", "loadJSON", "url", "r", "loadCatalogs", "manifestUrl", "namespaces", "lang", "manifest", "base", "urls", "ns", "rel", "parts", "u", "installMaps", "mapUrls", "row", "pair", "prev", "attachMaps", "entries", "root", "e", "selector", "type", "nodes", "existing", "loadAndApply", "observeMutations", "getManifest", "_manifestPromise", "schedule", "pendingRoots", "flushScheduled", "flush", "_mapsByNs", "getMap", "mapFile", "map", "isApplying", "roots", "records", "m", "init", "opts", "initial", "queued", "setLangNoReload", "t", "fmtNumber", "o", "fmtDate", "d", "dt", "__debug", "dbg", "m", "o", "runCommunitiesNodeExtras", "pageExtras", "p", "runExtrasForPath", "pathname", "test", "run", "getParamCI", "url", "name", "target", "k", "v", "pickNamespaces", "currentUrlOrPath", "path", "section", "base", "out", "add", "ns", "n", "reI18n", "namespaces", "I18N_OPTS", "lang", "dbg", "e", "installWebFormsHooks", "installed", "wire", "iv", "orig", "r", "initial", "translateDynamicUl", "ulId", "map", "parentId", "eventName", "getLocaleSafe", "getLocale", "norm", "s", "applyForLocale", "locale", "ul", "lis", "i", "li", "en", "fr", "once", "anchor", "ev", "next", "langMo", "mo", "prm", "parseCommunityName", "text", "m", "parseTotalCount", "parseRangeLabel", "start", "end", "total", "parseLastJoined", "n", "w", "unitKey", "templates", "unit", "UNITS", "PROVINCE_MAP", "SECTOR_MAP", "GEO_MAP", "FE_OFFERED_MAP", "OTHER_SERVICES_MAP", "LANG_PREF_MAP", "ORG_LANG_PREF_MAP", "POPS_MAP", "PAGES", "register", "when", "renderFn", "isActive", "path", "wanted", "activeRender", "render", "init", "loc", "$", "IDS", "COUNT_FMT", "currentLang", "e", "fromEvt", "refreshSelectpickers", "lang", "fmt", "id", "$el", "el", "MAP", "host", "target", "name", "data", "selLast", "unitFn", "fmtLast", "totalEl", "container", "parent", "siblings", "placeholder", "txt", "msg", "sel", "raw"]
}
