var i18nThrive=(()=>{(()=>{let r="preferredLang",h=[{code:"en",label:"English",htmlLang:"en-CA"},{code:"fr",label:"Fran\xE7ais",htmlLang:"fr-CA"}],n=d=>String(d||"en").toLowerCase()==="fr"?"fr":"en";function i(){try{return n(localStorage.getItem(r))}catch{return"en"}}function w(d){let u=n(d);document.documentElement.setAttribute("data-lang",u),document.documentElement.setAttribute("lang",u==="fr"?"fr-CA":"en-CA")}async function y(d){let u=n(d);if((document.documentElement.getAttribute("data-lang")||"en")===u){window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:u}}));return}try{localStorage.setItem(r,u)}catch{}if(w(u),window.ThriveI18n?.setLangNoReload)try{await window.ThriveI18n.setLangNoReload(u)}catch(e){console.error("[i18n] setLangNoReload failed:",e)}window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:u}}))}function p(d){let u=document.querySelector(".nav.navbar-nav");if(!u)return;u.querySelectorAll("li[data-lang-toggle]").forEach(a=>a.remove());let C=h.find(a=>a.code!==d);if(!C)return;let e=document.createElement("li");e.setAttribute("data-lang-toggle","true");let o=document.createElement("a");o.href="#",o.setAttribute("role","button"),o.setAttribute("aria-label",`Switch to ${C.label}`),o.dataset.toggleLang=C.code,o.textContent=C.label,e.appendChild(o),u.appendChild(e),u.dataset.langToggleBound||(u.addEventListener("click",a=>{let m=a.target.closest("[data-toggle-lang]");if(!m)return;a.preventDefault();let b=m.dataset.toggleLang;y(b),p(b)}),u.dataset.langToggleBound="1")}async function f(){let d=i();await y(d),p(d)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f,{once:!0}):f()})();(function(){async function r(i){let w=await fetch(i,{cache:"no-store"});if(!w.ok)throw new Error(`Failed to fetch ${i}`);return w.json()}function h(i){for(let w of i||[]){let{selector:y,type:p,attr:f,key:d}=w||{};if(!y||!d)continue;let u=document.querySelectorAll(y);u.length&&u.forEach(C=>{if(p==="text")C.setAttribute("data-i18n",d);else if(p==="html")C.setAttribute("data-i18n",d),C.toggleAttribute("data-i18n-html",!0);else if(p==="attr"&&f){let e=C.getAttribute("data-i18n-attr"),o=e?e.split(",").map(m=>m.trim()).filter(Boolean):[];o.push(`${f}:${d}`);let a=[...new Set(o)];C.setAttribute("data-i18n-attr",a.join(","))}})}}async function n(i){let{manifestUrl:w,namespaces:y=[],onlyIf:p}=i||{};if(!w)throw new Error("manifestUrl required");if(typeof p=="function"&&!p()){console.debug("[i18n bootstrap] skipped by onlyIf");return}let f=await r(w);for(let d of y){let u=f[`${d}.map`];if(!u)continue;let C=new URL(w,location.origin),e=new URL(u,C).toString(),o=await r(e);h(o)}console.log("[i18n bootstrap] attached:",y.join(", "))}window.ThriveI18nBootstrap=n})();(function(){let r="preferredLang",h=["aria-label","title","alt","placeholder","value","data-i18n-text","data-content","data-original-title"],n={lang:"en",catalogs:{},opts:null,observer:null,ready:!1,pending:[]};function i(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(c){return c.nodeValue&&c.nodeValue.trim()?1:2}}).nextNode()}function w(t,s){return t===s?!0:t.replace(/\u00A0/g,"&nbsp;").trim()===s.replace(/\u00A0/g,"&nbsp;").trim()}function y(t,s){let c=i(t);c?c.nodeValue!==s&&(c.nodeValue=s):t.textContent!==s&&(t.textContent=s)}function p(t,s){let c=t.getAttribute("data-i18n");if(c&&s[c]!=null){let A=String(s[c]),l=t.hasAttribute("data-i18n-html"),g=c+"\xA7"+A.length;if(t.dataset.i18nApplied!==g)if(l)w(t.innerHTML,A)||(t.innerHTML=A),t.dataset.i18nApplied=g;else{let v=A.replace(/&nbsp;/g,"\xA0"),L=i(t);(L?L.nodeValue:t.textContent)!==v&&y(t,v),t.dataset.i18nApplied=g}}let x=t.getAttribute("data-i18n-attr");if(!x)return;let S=[...new Set(x.split(",").map(A=>A.trim()).filter(Boolean))];for(let A of S){let l=A.indexOf(":");if(l<0)continue;let g=A.slice(0,l).trim(),v=A.slice(l+1).trim();if(!h.includes(g)||s[v]==null)continue;let L=String(s[v]);if(g==="data-i18n-text"){let R=L.replace(/&nbsp;/g,"\xA0"),N=i(t);(N?N.nodeValue:"")!==R&&(N?N.nodeValue=R:t.insertBefore(document.createTextNode(R),t.firstChild));continue}(g==="title"||g==="aria-label"||g==="placeholder"||g==="value")&&(L=L.replace(/&nbsp;/g,"\xA0")),t.getAttribute(g)!==L&&t.setAttribute(g,L)}}function f(t){t&&document.querySelectorAll("[data-i18n],[data-i18n-attr]").forEach(s=>p(s,t))}async function d(t){let s=await fetch(t,{cache:"no-store"});if(!s.ok)throw new Error(`Failed to fetch ${t}`);return s.json()}async function u(t,s,c){let x=await d(t),S=new URL(t,location.origin),A=(s||[]).map(g=>x[`${g}.${c}`]).filter(Boolean).map(g=>new URL(g,S).toString()),l=await Promise.all(A.map(g=>fetch(g,{cache:"no-store"}).then(v=>v.json())));return Object.assign({},...l)}async function C(t,s){let c=await d(t),x=new URL(t,location.origin),S=(s||[]).map(l=>c[`${l}.map`]).filter(Boolean).map(l=>new URL(l,x).toString());(await Promise.all(S.map(d))).flat().forEach(l=>{document.querySelectorAll(l.selector).forEach(g=>{if(l.type==="text")g.setAttribute("data-i18n",l.key);else if(l.type==="attr"){let v=`${l.attr}:${l.key}`,L=g.getAttribute("data-i18n-attr");g.setAttribute("data-i18n-attr",L?`${L},${v}`:v)}})})}function e(t,s=document){for(let c of t||[]){let{selector:x,type:S,attr:A,key:l}=c||{};if(!x||!l)continue;let g=s.querySelectorAll(x);g.length&&g.forEach(v=>{if(S==="text")v.setAttribute("data-i18n",l);else if(S==="attr"&&A){let L=v.getAttribute("data-i18n-attr")||"",R=`${A}:${l}`;v.setAttribute("data-i18n-attr",L?L+","+R:R)}})}}async function o(t){if(!n?.opts?.manifestUrl)throw new Error("ThriveI18n not initialized: missing opts.manifestUrl");n.lang=t==="fr"?"fr":"en",localStorage.setItem(r,n.lang);let{manifestUrl:s,namespaces:c,observeMutations:x}=n.opts;await C(s,c);let S=await u(s,c,n.lang);if(n.catalogs=S,f(S),x){let L=function(T){return g||=d(T),g},P=function(T){!T||T.nodeType!==1||(U.add(T),F||(F=!0,queueMicrotask(W)))};var A=L,l=P;n.observer&&n.observer.disconnect();let g,v=new Map;async function R(T,E){if(v.has(E))return v.get(E);let k=(await L(T))[`${E}.map`];if(!k)return null;let V=new URL(T,location.origin),H=new URL(k,V).toString(),B=await d(H);return v.set(E,B),B}let N=!1,F=!1,U=new Set;async function W(){if(F=!1,!!U.size){N=!0;try{let T=Array.from(U);U.clear();for(let E of T)for(let q of n.opts.namespaces){let k=await R(n.opts.manifestUrl,q);k&&e(k,E)}for(let E of T)f(n.catalogs,E)}finally{N=!1}}}n.observer=new MutationObserver(T=>{if(!N)for(let E of T)E.type==="childList"?E.addedNodes.forEach(q=>P(q)):E.type==="attributes"&&P(E.target)}),n.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-attr","data-i18n-html"]})}}async function a(t){n.opts=Object.assign({namespaces:["profile"],observeMutations:!0},t||{});let s=(localStorage.getItem(r)||"en").toLowerCase();if(await o(s),n.ready=!0,n.pending.length){let c=n.pending.splice(0);for(let x of c)await o(x)}window.addEventListener("storage",c=>{c.key===r&&c.newValue&&c.newValue!==n.lang&&o(c.newValue)})}async function m(t){if(!n.ready){n.pending.push(t),document.documentElement.setAttribute("data-lang",t),document.documentElement.setAttribute("lang",t==="fr"?"fr-CA":"en-CA");return}await o(t),document.documentElement.setAttribute("data-lang",t),document.documentElement.setAttribute("lang",t==="fr"?"fr-CA":"en-CA")}function b(t){return n.catalogs[t]??t}function _(t,s){return new Intl.NumberFormat(n.lang==="fr"?"fr-CA":"en-CA",s).format(t)}function $(t,s){let c=t instanceof Date?t:new Date(t);return new Intl.DateTimeFormat(n.lang==="fr"?"fr-CA":"en-CA",s).format(c)}function I(){return{lang:n.lang,ready:n.ready,pending:[...n.pending],opts:n.opts&&{...n.opts,manifestUrl:n.opts.manifestUrl},hasObserver:!!n.observer,catalogKeys:Object.keys(n.catalogs).length}}window.ThriveI18n={init:a,setLangNoReload:m,t:b,fmtNumber:_,fmtDate:$,__debug:I,get ready(){return n.ready}}})();var M=(r,h)=>console.log("[i18n]",r,h??"");function J(){console.log("runCommunitiesNodeExtras called")}var z=[{test:r=>/^\/profile\/connections\/communitiesnode(?:\/|$)/.test(r),run:J}];function O(r=location.pathname){for(let{test:h,run:n}of z)h(r)&&(console.log("RUN FOR",r),n())}function K(r,h){let n=h.toLowerCase();for(let[i,w]of r.searchParams.entries())if(console.log("c ",i,w),i.toLowerCase()===n)return w;return null}function D(r){let h=typeof r=="string"?new URL(r,location.origin):r instanceof URL?r:new URL(location.href),i=(h.pathname||"/").replace(/\/{2,}/g,"/").replace(/^\/sandboxmicrosite(?=\/|$)/i,"")||"/",w=(K(h,"section")||"").trim().toLowerCase(),y=["header","footer"],p=new Set(y),f=u=>{u&&(Array.isArray(u)?u.forEach(C=>C&&p.add(C)):p.add(u))};return/^\/profile(?:\/|$)/i.test(i)&&p.add("profile"),/^\/people(?:\/|$)/i.test(i)&&p.add("profile"),/^\/profile\/connections\/contacts(?:\/|$)/i.test(i)&&f("connections"),/^\/profile\/connections\/communities(?:\/|$)/i.test(i)&&f("communities"),/^\/profile\/connections\/communitiesnode(?:\/|$)/i.test(i)&&f("communitiesNode"),/^\/profile\/connections\/following-connections(?:\/|$)/i.test(i)&&f("following"),/^\/profile\/contributions\/contributions-summary(?:\/|$)/i.test(i)&&f("contribSummary"),/^\/profile\/contributions\/contributions-achievements(?:\/|$)/i.test(i)&&f("contribAchievements"),/^\/profile\/contributions\/contributions-list(?:\/|$)/i.test(i)&&f("contribList"),/^\/profile\/myaccount\/changepassword(?:\/|$)/i.test(i)&&f("accountChangePassword"),/^\/profile\/myaccount\/mysignature(?:\/|$)/i.test(i)&&f("accountSignature"),/^\/profile\/myaccount\/inbox(?:\/|$)/i.test(i)&&f("accountInbox"),/^\/profile\/myaccount\/my-settings(?:\/|$)/i.test(i)&&f({privacy:"accountSettingsPrivacy",email:"accountSettingsEmail",rssfeeds:"accountSettingsRss",subscriptions:"accountSettingsSubscriptions"}[w]),/^\/network\/members(?:\/|$)/i.test(i)&&f("networkMembers"),/^\/contactus(?:\/|$)/i.test(i)&&f("contactus"),/^\/login(?:\/|$)/i.test(i)&&f("login"),/^\/participate\/postmessage(?:\/|$)/i.test(i)&&f("postMessage"),/^\/participate\/add-new-entry(?:\/|$)/i.test(i)&&f("addLibrary"),/^\/events\/calendar(?:\/|$)/i.test(i)&&f("eventsCalendar"),/^\/communities\/[^/]+(?:\/|$)/i.test(i)&&p.add("community"),/^\/communities(?:\/community-home)?\/invite-community(?:\/digestviewer)?(?:\/|$)/i.test(i)&&p.add("communityInvite"),/^\/communities\/community-home\/digestviewer(?:\/|$)/i.test(i)&&p.add("communityDigest"),/^\/communities\/community-home\/librarydocuments(?:\/|$)/i.test(i)&&p.add("communityLibrary"),/^\/communities\/community-home\/recent-community-events(?:\/|$)/i.test(i)&&p.add("communityEvents"),/^\/communities\/community-home\/community-members(?:\/|$)/i.test(i)&&p.add("communityMembers"),Array.from(p)}async function j(){let r=D(new URL(location.href));if(!r.length)return;let h={manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:r};try{await ThriveI18nBootstrap(h);let n=ThriveI18n.__debug?.().lang||localStorage.getItem("preferredLang")||document.documentElement.getAttribute("lang")||"en";await ThriveI18n.setLangNoReload(n),document.documentElement.setAttribute("lang",n==="fr"?"fr-CA":"en-CA"),M("reI18n applied",{lang:n,namespaces:r}),O()}catch(n){console.error("[i18n] reI18n error",n)}}function G(){let r=!1;function h(){return r?!0:window.Sys?.WebForms?.PageRequestManager?(Sys.WebForms.PageRequestManager.getInstance().add_endRequest(()=>setTimeout(j,0)),window.Sys?.Application?.add_load?.(()=>setTimeout(j,0)),r=!0,M("WebForms PRM hook installed"),!0):!1}if(h())return;let n=setInterval(()=>{h()&&clearInterval(n)},200);if(setTimeout(()=>clearInterval(n),8e3),typeof window.__doPostBack=="function"){let i=window.__doPostBack;window.__doPostBack=function(){let w=i.apply(this,arguments);return setTimeout(j,0),w},M("Fallback __doPostBack patch installed")}}document.addEventListener("DOMContentLoaded",async()=>{M("DOMContentLoaded");let r=D(new URL(location.href));if(!r.length){M("skip i18n (no namespaces for this page)");return}let h={manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:r};await ThriveI18nBootstrap(h),await ThriveI18n.init({...h,observeMutations:!0});let n=(localStorage.getItem("preferredLang")||document.documentElement.getAttribute("lang")||"en").toLowerCase();await ThriveI18n.setLangNoReload(n),document.documentElement.setAttribute("lang",n==="fr"?"fr-CA":"en-CA"),M("init complete",{initial:n,namespaces:r}),O(),G()});(()=>{function r(){try{return(localStorage.getItem("preferredLang")||"en").toLowerCase()==="fr"?"fr":"en"}catch{return"en"}}function h(e){let o=String(e).trim().match(/^Invite people to join\s+(?:the\s+)?(.+?)(?:\s+community)?$/i);return o?o[1].trim():null}function n(e){let o=String(e).match(/(\d+)/);return o?{total:Number(o[1])}:null}function i(e){let o=String(e).trim().match(/(\d+)\D+(\d+)\D+(\d+)/);if(!o)return null;let[,a,m,b]=o.map(Number);return{start:a,end:m,total:b}}function w(e){let o=String(e).trim().match(/(\d+)\s+(day|days|month|months|year|years)/i);if(!o)return null;let a=Number(o[1]),m=o[2].toLowerCase(),b=m.startsWith("day")?"day":m.startsWith("month")?"month":"year";return{n:a,unitKey:b}}let y={contacts:{en:({start:e,end:o,total:a})=>`Showing ${e} to ${o} of ${a}`,fr:({start:e,end:o,total:a})=>`Affichage des \xE9l\xE9ments ${e} \xE0 ${o} sur ${a}`},lastJoined:{en:({n:e,unit:o})=>`last person joined ${e} ${o} ago`,fr:({n:e,unit:o})=>`derni\xE8re personne inscrite il y a ${e} ${o}`},totalCount:{en:({total:e})=>`${e} total`,fr:({total:e})=>`${e} au total`},rangeWithTotal:{en:({start:e,end:o,total:a})=>`${e} to ${o} of ${a} total`,fr:({start:e,end:o,total:a})=>`${e} \xE0 ${o} sur ${a} au total`}},p={en:{day:e=>e===1?"day":"days",month:e=>e===1?"month":"months",year:e=>e===1?"year":"years"},fr:{day:e=>e===1?"jour":"jours",month:()=>"mois",year:e=>e===1?"an":"ans"}},f=new Map;function d(e,o){f.set(e.replace(/\/+$/,""),o)}function u(){let e=location.pathname.replace(/\/+$/,"");return f.get(e)}function C(){let e=u();e&&e()}d("/advisory-committee",function(){let o=document.querySelector("#PageTitleH1");if(!o)return;let a={en:"Meet the Resilient Futures Advisory Committee",fr:"Rencontrez le comit\xE9 consultatif de l\u2019initiative Un avenir r\xE9silient"},m=r(),b=a[m]||a.en;o.textContent.trim()!==b&&(o.textContent=b)}),d("/sandboxmicrosite/communities/community-home/invite-community",function(){let a=document.querySelector("#MainCopy_ctl04_InviteToCommunityLabel");if(!a)return;let m=a.querySelector("strong")||a,b=h(m.textContent)||m.textContent.trim(),$=r()==="fr"?`Invitez des personnes \xE0 rejoindre la communaut\xE9 ${b}`:`Invite people to join ${b}`;m.textContent!==$&&(m.textContent=$)}),d("/profile/connections/contacts",function(){let a=document.querySelector("[id$='FindContacts_ShowingLabel']");if(!a)return;let m=i(a.textContent);if(!m)return;let b=r(),$=(y.contacts[b]||y.contacts.en)(m);a.textContent!==$&&(a.textContent=$)}),d("/profile/connections/communitiesnode",function(){let o=r(),a="[id^='MainCopy_ctl29_lstCommunityList_lblLastUpdated_']",m=p[o]||p.en,b=y.lastJoined[o]||y.lastJoined.en;document.querySelectorAll(a).forEach(I=>{let t=w(I.textContent);if(!t)return;let s=m[t.unitKey](t.n),c=b({n:t.n,unit:s});I.textContent!==c&&(I.textContent=c)});let $=document.querySelector("#MainCopy_ctl29_lbCommunityCount .Count");if($){let I=n($.textContent);if(I){let s=(y.totalCount[o]||y.totalCount.en)(I);$.textContent!==s&&($.textContent=s)}}(function(){let t=document.getElementById("MainCopy_ctl29_AllCommunitiesContainer");if(!t)return;let s=t.parentElement||t,c=Array.from(s.childNodes).filter(l=>l!==t);if(c.some(l=>l.nodeType===1&&l.classList?.contains("row")&&l.classList?.contains("rowContainer")&&l.classList?.contains("community-list")))return;let S=c.find(l=>{if(l.nodeType===3)return/^\s*no\s+results\s+found\s*$/i.test(l.textContent);if(l.nodeType===1){let g=(l.textContent||"").trim();return/^no\s+results\s+found$/i.test(g)}return!1});if(!S)return;let A=o==="fr"?"Aucun r\xE9sultat":"No Results Found";S.nodeType===3?S.textContent=" "+A+" ":S.textContent=A})()}),d("/profile/connections/following-connections",function(){let o="[id^='FollowedContent_'] .contributions-list-header .text-muted",a=r();document.querySelectorAll(o).forEach(m=>{let b=i(m.textContent);if(!b)return;let $=(y.contacts?.[a]||y.contacts.en)(b);m.textContent!==$&&(m.textContent=$)})}),d("/profile/contributions/contributions-list",function(){let a=document.querySelector("#MainCopy_ctl29_SearchResultStatus .ResultStatus.text-muted");if(!a)return;let m=a.textContent,b=i(m);if(!b)return;let _=r(),t=(/\btotal\b/i.test(m)?y.rangeWithTotal[_]||y.rangeWithTotal.en:y.contacts[_]||y.contacts.en)(b);a.textContent!==t&&(a.textContent=t)}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C,{once:!0}):C(),document.addEventListener("click",e=>{if(!e.target.closest("[data-toggle-lang]"))return;e.preventDefault();let a=u();a&&a()})})();})();
/*! Thrive i18n bootstrap - attach data-i18n attributes */
//# sourceMappingURL=i18n-thrive.bundle.js.map
