var i18nThrive=(()=>{(()=>{let r="preferredLang",h=[{code:"en",label:"English",htmlLang:"en-CA"},{code:"fr",label:"Fran\xE7ais",htmlLang:"fr-CA"}],n=f=>String(f||"en").toLowerCase()==="fr"?"fr":"en";function i(){try{return n(localStorage.getItem(r))}catch{return"en"}}function C(f){let g=n(f);document.documentElement.setAttribute("data-lang",g),document.documentElement.setAttribute("lang",g==="fr"?"fr-CA":"en-CA")}async function y(f){let g=n(f);if((document.documentElement.getAttribute("data-lang")||"en")===g){window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:g}}));return}try{localStorage.setItem(r,g)}catch{}if(C(g),window.ThriveI18n?.setLangNoReload)try{await window.ThriveI18n.setLangNoReload(g)}catch(e){console.error("[i18n] setLangNoReload failed:",e)}window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:g}}))}function p(f){let g=document.querySelector(".nav.navbar-nav");if(!g)return;g.querySelectorAll("li[data-lang-toggle]").forEach(a=>a.remove());let b=h.find(a=>a.code!==f);if(!b)return;let e=document.createElement("li");e.setAttribute("data-lang-toggle","true");let o=document.createElement("a");o.href="#",o.setAttribute("role","button"),o.setAttribute("aria-label",`Switch to ${b.label}`),o.dataset.toggleLang=b.code,o.textContent=b.label,e.appendChild(o),g.appendChild(e),g.dataset.langToggleBound||(g.addEventListener("click",a=>{let d=a.target.closest("[data-toggle-lang]");if(!d)return;a.preventDefault();let w=d.dataset.toggleLang;y(w),p(w)}),g.dataset.langToggleBound="1")}async function u(){let f=i();await y(f),p(f)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u,{once:!0}):u()})();(function(){async function r(i){let C=await fetch(i,{cache:"no-store"});if(!C.ok)throw new Error(`Failed to fetch ${i}`);return C.json()}function h(i){for(let C of i||[]){let{selector:y,type:p,attr:u,key:f}=C||{};if(!y||!f)continue;let g=document.querySelectorAll(y);g.length&&g.forEach(b=>{if(p==="text")b.setAttribute("data-i18n",f);else if(p==="html")b.setAttribute("data-i18n",f),b.toggleAttribute("data-i18n-html",!0);else if(p==="attr"&&u){let e=b.getAttribute("data-i18n-attr"),o=e?e.split(",").map(d=>d.trim()).filter(Boolean):[];o.push(`${u}:${f}`);let a=[...new Set(o)];b.setAttribute("data-i18n-attr",a.join(","))}})}}async function n(i){let{manifestUrl:C,namespaces:y=[],onlyIf:p}=i||{};if(!C)throw new Error("manifestUrl required");if(typeof p=="function"&&!p()){console.debug("[i18n bootstrap] skipped by onlyIf");return}let u=await r(C);for(let f of y){let g=u[`${f}.map`];if(!g)continue;let b=new URL(C,location.origin),e=new URL(g,b).toString(),o=await r(e);h(o)}console.log("[i18n bootstrap] attached:",y.join(", "))}window.ThriveI18nBootstrap=n})();(function(){let r="preferredLang",h=["aria-label","title","alt","placeholder","value","data-i18n-text","data-content","data-original-title"],n={lang:"en",catalogs:{},opts:null,observer:null,ready:!1,pending:[]};function i(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(c){return c.nodeValue&&c.nodeValue.trim()?1:2}}).nextNode()}function C(t,s){return t===s?!0:t.replace(/\u00A0/g,"&nbsp;").trim()===s.replace(/\u00A0/g,"&nbsp;").trim()}function y(t,s){let c=i(t);c?c.nodeValue!==s&&(c.nodeValue=s):t.textContent!==s&&(t.textContent=s)}function p(t,s){let c=t.getAttribute("data-i18n");if(c&&s[c]!=null){let A=String(s[c]),l=t.hasAttribute("data-i18n-html"),m=c+"\xA7"+A.length;if(t.dataset.i18nApplied!==m)if(l)C(t.innerHTML,A)||(t.innerHTML=A),t.dataset.i18nApplied=m;else{let v=A.replace(/&nbsp;/g,"\xA0"),$=i(t);($?$.nodeValue:t.textContent)!==v&&y(t,v),t.dataset.i18nApplied=m}}let x=t.getAttribute("data-i18n-attr");if(!x)return;let S=[...new Set(x.split(",").map(A=>A.trim()).filter(Boolean))];for(let A of S){let l=A.indexOf(":");if(l<0)continue;let m=A.slice(0,l).trim(),v=A.slice(l+1).trim();if(!h.includes(m)||s[v]==null)continue;let $=String(s[v]);if(m==="data-i18n-text"){let R=$.replace(/&nbsp;/g,"\xA0"),N=i(t);(N?N.nodeValue:"")!==R&&(N?N.nodeValue=R:t.insertBefore(document.createTextNode(R),t.firstChild));continue}(m==="title"||m==="aria-label"||m==="placeholder"||m==="value")&&($=$.replace(/&nbsp;/g,"\xA0")),t.getAttribute(m)!==$&&t.setAttribute(m,$)}}function u(t){t&&document.querySelectorAll("[data-i18n],[data-i18n-attr]").forEach(s=>p(s,t))}async function f(t){let s=await fetch(t,{cache:"no-store"});if(!s.ok)throw new Error(`Failed to fetch ${t}`);return s.json()}async function g(t,s,c){let x=await f(t),S=new URL(t,location.origin),A=(s||[]).map(m=>x[`${m}.${c}`]).filter(Boolean).map(m=>new URL(m,S).toString()),l=await Promise.all(A.map(m=>fetch(m,{cache:"no-store"}).then(v=>v.json())));return Object.assign({},...l)}async function b(t,s){let c=await f(t),x=new URL(t,location.origin),S=(s||[]).map(l=>c[`${l}.map`]).filter(Boolean).map(l=>new URL(l,x).toString());(await Promise.all(S.map(f))).flat().forEach(l=>{document.querySelectorAll(l.selector).forEach(m=>{if(l.type==="text")m.setAttribute("data-i18n",l.key);else if(l.type==="attr"){let v=`${l.attr}:${l.key}`,$=m.getAttribute("data-i18n-attr");m.setAttribute("data-i18n-attr",$?`${$},${v}`:v)}})})}function e(t,s=document){for(let c of t||[]){let{selector:x,type:S,attr:A,key:l}=c||{};if(!x||!l)continue;let m=s.querySelectorAll(x);m.length&&m.forEach(v=>{if(S==="text")v.setAttribute("data-i18n",l);else if(S==="attr"&&A){let $=v.getAttribute("data-i18n-attr")||"",R=`${A}:${l}`;v.setAttribute("data-i18n-attr",$?$+","+R:R)}})}}async function o(t){if(!n?.opts?.manifestUrl)throw new Error("ThriveI18n not initialized: missing opts.manifestUrl");n.lang=t==="fr"?"fr":"en",localStorage.setItem(r,n.lang);let{manifestUrl:s,namespaces:c,observeMutations:x}=n.opts;await b(s,c);let S=await g(s,c,n.lang);if(n.catalogs=S,u(S),x){let $=function(T){return m||=f(T),m},P=function(T){!T||T.nodeType!==1||(U.add(T),F||(F=!0,queueMicrotask(W)))};var A=$,l=P;n.observer&&n.observer.disconnect();let m,v=new Map;async function R(T,E){if(v.has(E))return v.get(E);let k=(await $(T))[`${E}.map`];if(!k)return null;let V=new URL(T,location.origin),H=new URL(k,V).toString(),B=await f(H);return v.set(E,B),B}let N=!1,F=!1,U=new Set;async function W(){if(F=!1,!!U.size){N=!0;try{let T=Array.from(U);U.clear();for(let E of T)for(let q of n.opts.namespaces){let k=await R(n.opts.manifestUrl,q);k&&e(k,E)}for(let E of T)u(n.catalogs,E)}finally{N=!1}}}n.observer=new MutationObserver(T=>{if(!N)for(let E of T)E.type==="childList"?E.addedNodes.forEach(q=>P(q)):E.type==="attributes"&&P(E.target)}),n.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-attr","data-i18n-html"]})}}async function a(t){n.opts=Object.assign({namespaces:["profile"],observeMutations:!0},t||{});let s=(localStorage.getItem(r)||"en").toLowerCase();if(await o(s),n.ready=!0,n.pending.length){let c=n.pending.splice(0);for(let x of c)await o(x)}window.addEventListener("storage",c=>{c.key===r&&c.newValue&&c.newValue!==n.lang&&o(c.newValue)})}async function d(t){if(!n.ready){n.pending.push(t),document.documentElement.setAttribute("data-lang",t),document.documentElement.setAttribute("lang",t==="fr"?"fr-CA":"en-CA");return}await o(t),document.documentElement.setAttribute("data-lang",t),document.documentElement.setAttribute("lang",t==="fr"?"fr-CA":"en-CA")}function w(t){return n.catalogs[t]??t}function _(t,s){return new Intl.NumberFormat(n.lang==="fr"?"fr-CA":"en-CA",s).format(t)}function L(t,s){let c=t instanceof Date?t:new Date(t);return new Intl.DateTimeFormat(n.lang==="fr"?"fr-CA":"en-CA",s).format(c)}function I(){return{lang:n.lang,ready:n.ready,pending:[...n.pending],opts:n.opts&&{...n.opts,manifestUrl:n.opts.manifestUrl},hasObserver:!!n.observer,catalogKeys:Object.keys(n.catalogs).length}}window.ThriveI18n={init:a,setLangNoReload:d,t:w,fmtNumber:_,fmtDate:L,__debug:I,get ready(){return n.ready}}})();var M=(r,h)=>console.log("[i18n]",r,h??"");function J(){console.log("runCommunitiesNodeExtras called")}var z=[{test:r=>/^\/profile\/connections\/communitiesnode(?:\/|$)/.test(r),run:J}];function O(r=location.pathname){for(let{test:h,run:n}of z)h(r)&&(console.log("RUN FOR",r),n())}function K(r,h){let n=h.toLowerCase();for(let[i,C]of r.searchParams.entries())if(console.log("c ",i,C),i.toLowerCase()===n)return C;return null}function D(r){let h=typeof r=="string"?new URL(r,location.origin):r instanceof URL?r:new URL(location.href),i=(h.pathname||"/").replace(/\/{2,}/g,"/").replace(/^\/sandboxmicrosite(?=\/|$)/i,"")||"/",C=(K(h,"section")||"").trim().toLowerCase(),y=["header"],p=new Set(y),u=b=>{b&&(Array.isArray(b)?b.forEach(e=>e&&p.add(e)):p.add(b))};return!1?console.log("profile page tranlation skipped"):(console.log("profile page tranlation"),/^\/profile(?:\/|$)/i.test(i)&&p.add("profile"),/^\/people(?:\/|$)/i.test(i)&&p.add("profile")),/^\/profile\/connections\/contacts(?:\/|$)/i.test(i)&&u("connections"),/^\/profile\/connections\/communities(?:\/|$)/i.test(i)&&u("communities"),/^\/profile\/connections\/communitiesnode(?:\/|$)/i.test(i)&&u("communitiesNode"),/^\/profile\/connections\/following-connections(?:\/|$)/i.test(i)&&u("following"),/^\/profile\/contributions\/contributions-summary(?:\/|$)/i.test(i)&&u("contribSummary"),/^\/profile\/contributions\/contributions-achievements(?:\/|$)/i.test(i)&&u("contribAchievements"),/^\/profile\/contributions\/contributions-list(?:\/|$)/i.test(i)&&u("contribList"),/^\/profile\/myaccount\/changepassword(?:\/|$)/i.test(i)&&u("accountChangePassword"),/^\/profile\/myaccount\/mysignature(?:\/|$)/i.test(i)&&u("accountSignature"),/^\/profile\/myaccount\/inbox(?:\/|$)/i.test(i)&&u("accountInbox"),/^\/profile\/myaccount\/my-settings(?:\/|$)/i.test(i)&&u({privacy:"accountSettingsPrivacy",email:"accountSettingsEmail",rssfeeds:"accountSettingsRss",subscriptions:"accountSettingsSubscriptions"}[C]),/^\/network\/members(?:\/|$)/i.test(i)&&u("networkMembers"),/^\/contactus(?:\/|$)/i.test(i)&&u("contact"),/^\/login(?:\/|$)/i.test(i)&&u("login"),/^\/participate\/postmessage(?:\/|$)/i.test(i)&&u("postMessage"),/^\/participate\/add-new-entry(?:\/|$)/i.test(i)&&u("addLibrary"),/^\/events\/calendar(?:\/|$)/i.test(i)&&u("eventsCalendar"),/^\/communities\/[^/]+(?:\/|$)/i.test(i)&&p.add("community"),/^\/communities(?:\/community-home)?\/invite-community(?:\/digestviewer)?(?:\/|$)/i.test(i)&&p.add("communityInvite"),/^\/communities\/mycommunities(?:\/|$)/i.test(i)&&p.add("communityMy"),/^\/communities\/community-home\/digestviewer(?:\/|$)/i.test(i)&&p.add("communityDigest"),/^\/communities\/community-home\/librarydocuments(?:\/|$)/i.test(i)&&p.add("communityLibrary"),/^\/communities\/community-home\/recent-community-events(?:\/|$)/i.test(i)&&p.add("communityEvents"),/^\/communities\/community-home\/community-members(?:\/|$)/i.test(i)&&p.add("communityMembers"),Array.from(p)}async function j(){let r=D(new URL(location.href));if(!r.length)return;let h={manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:r};try{await ThriveI18nBootstrap(h);let n=ThriveI18n.__debug?.().lang||localStorage.getItem("preferredLang")||document.documentElement.getAttribute("lang")||"en";await ThriveI18n.setLangNoReload(n),document.documentElement.setAttribute("lang",n==="fr"?"fr-CA":"en-CA"),M("reI18n applied",{lang:n,namespaces:r}),O()}catch(n){console.error("[i18n] reI18n error",n)}}function G(){let r=!1;function h(){return r?!0:window.Sys?.WebForms?.PageRequestManager?(Sys.WebForms.PageRequestManager.getInstance().add_endRequest(()=>setTimeout(j,0)),window.Sys?.Application?.add_load?.(()=>setTimeout(j,0)),r=!0,M("WebForms PRM hook installed"),!0):!1}if(h())return;let n=setInterval(()=>{h()&&clearInterval(n)},200);if(setTimeout(()=>clearInterval(n),8e3),typeof window.__doPostBack=="function"){let i=window.__doPostBack;window.__doPostBack=function(){let C=i.apply(this,arguments);return setTimeout(j,0),C},M("Fallback __doPostBack patch installed")}}document.addEventListener("DOMContentLoaded",async()=>{M("DOMContentLoaded");let r=D(new URL(location.href));if(!r.length){M("skip i18n (no namespaces for this page)");return}let h={manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:r};await ThriveI18nBootstrap(h),await ThriveI18n.init({...h,observeMutations:!0});let n=(localStorage.getItem("preferredLang")||document.documentElement.getAttribute("lang")||"en").toLowerCase();await ThriveI18n.setLangNoReload(n),document.documentElement.setAttribute("lang",n==="fr"?"fr-CA":"en-CA"),M("init complete",{initial:n,namespaces:r}),O(),G()});(()=>{function r(){try{return(localStorage.getItem("preferredLang")||"en").toLowerCase()==="fr"?"fr":"en"}catch{return"en"}}function h(e){let o=String(e).trim().match(/^Invite people to join\s+(?:the\s+)?(.+?)(?:\s+community)?$/i);return o?o[1].trim():null}function n(e){let o=String(e).match(/(\d+)/);return o?{total:Number(o[1])}:null}function i(e){let o=String(e).trim().match(/(\d+)\D+(\d+)\D+(\d+)/);if(!o)return null;let[,a,d,w]=o.map(Number);return{start:a,end:d,total:w}}function C(e){let o=String(e).trim().match(/(\d+)\s+(day|days|month|months|year|years)/i);if(!o)return null;let a=Number(o[1]),d=o[2].toLowerCase(),w=d.startsWith("day")?"day":d.startsWith("month")?"month":"year";return{n:a,unitKey:w}}let y={contacts:{en:({start:e,end:o,total:a})=>`Showing ${e} to ${o} of ${a}`,fr:({start:e,end:o,total:a})=>`Affichage des \xE9l\xE9ments ${e} \xE0 ${o} sur ${a}`},lastJoined:{en:({n:e,unit:o})=>`last person joined ${e} ${o} ago`,fr:({n:e,unit:o})=>`derni\xE8re personne inscrite il y a ${e} ${o}`},totalCount:{en:({total:e})=>`${e} total`,fr:({total:e})=>`${e} au total`},rangeWithTotal:{en:({start:e,end:o,total:a})=>`${e} to ${o} of ${a} total`,fr:({start:e,end:o,total:a})=>`${e} \xE0 ${o} sur ${a} au total`}},p={en:{day:e=>e===1?"day":"days",month:e=>e===1?"month":"months",year:e=>e===1?"year":"years"},fr:{day:e=>e===1?"jour":"jours",month:()=>"mois",year:e=>e===1?"an":"ans"}},u=new Map;function f(e,o){u.set(e.replace(/\/+$/,""),o)}function g(){let e=location.pathname.replace(/\/+$/,"");return u.get(e)}function b(){let e=g();e&&e()}f("/advisory-committee",function(){let o=document.querySelector("#PageTitleH1");if(!o)return;let a={en:"Meet the Resilient Futures Advisory Committee",fr:"Rencontrez le comit\xE9 consultatif de l\u2019initiative Un avenir r\xE9silient"},d=r(),w=a[d]||a.en;o.textContent.trim()!==w&&(o.textContent=w)}),f("/sandboxmicrosite/communities/community-home/invite-community",function(){let a=document.querySelector("#MainCopy_ctl04_InviteToCommunityLabel");if(!a)return;let d=a.querySelector("strong")||a,w=h(d.textContent)||d.textContent.trim(),L=r()==="fr"?`Invitez des personnes \xE0 rejoindre la communaut\xE9 ${w}`:`Invite people to join ${w}`;d.textContent!==L&&(d.textContent=L)}),f("/profile/connections/contacts",function(){let a=document.querySelector("[id$='FindContacts_ShowingLabel']");if(!a)return;let d=i(a.textContent);if(!d)return;let w=r(),L=(y.contacts[w]||y.contacts.en)(d);a.textContent!==L&&(a.textContent=L)}),f("/profile/connections/communitiesnode",function(){let o=r(),a="[id^='MainCopy_ctl29_lstCommunityList_lblLastUpdated_']",d=p[o]||p.en,w=y.lastJoined[o]||y.lastJoined.en;document.querySelectorAll(a).forEach(I=>{let t=C(I.textContent);if(!t)return;let s=d[t.unitKey](t.n),c=w({n:t.n,unit:s});I.textContent!==c&&(I.textContent=c)});let L=document.querySelector("#MainCopy_ctl29_lbCommunityCount .Count");if(L){let I=n(L.textContent);if(I){let s=(y.totalCount[o]||y.totalCount.en)(I);L.textContent!==s&&(L.textContent=s)}}(function(){let t=document.getElementById("MainCopy_ctl29_AllCommunitiesContainer");if(!t)return;let s=t.parentElement||t,c=Array.from(s.childNodes).filter(l=>l!==t);if(c.some(l=>l.nodeType===1&&l.classList?.contains("row")&&l.classList?.contains("rowContainer")&&l.classList?.contains("community-list")))return;let S=c.find(l=>{if(l.nodeType===3)return/^\s*no\s+results\s+found\s*$/i.test(l.textContent);if(l.nodeType===1){let m=(l.textContent||"").trim();return/^no\s+results\s+found$/i.test(m)}return!1});if(!S)return;let A=o==="fr"?"Aucun r\xE9sultat":"No Results Found";S.nodeType===3?S.textContent=" "+A+" ":S.textContent=A})()}),f("/profile/connections/following-connections",function(){let o="[id^='FollowedContent_'] .contributions-list-header .text-muted",a=r();document.querySelectorAll(o).forEach(d=>{let w=i(d.textContent);if(!w)return;let L=(y.contacts?.[a]||y.contacts.en)(w);d.textContent!==L&&(d.textContent=L)})}),f("/profile/contributions/contributions-list",function(){let a=document.querySelector("#MainCopy_ctl29_SearchResultStatus .ResultStatus.text-muted");if(!a)return;let d=a.textContent,w=i(d);if(!w)return;let _=r(),t=(/\btotal\b/i.test(d)?y.rangeWithTotal[_]||y.rangeWithTotal.en:y.contacts[_]||y.contacts.en)(w);a.textContent!==t&&(a.textContent=t)}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",b,{once:!0}):b(),document.addEventListener("click",e=>{if(!e.target.closest("[data-toggle-lang]"))return;e.preventDefault();let a=g();a&&a()})})();})();
/*! Thrive i18n bootstrap - attach data-i18n attributes */
//# sourceMappingURL=i18n-thrive.bundle.js.map
