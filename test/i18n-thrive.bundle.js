var i18nThrive=(()=>{var P=!1,O="preferredLang",it=[{code:"en",label:"English",htmlLang:"en-CA"},{code:"fr",label:"Fran\xE7ais",htmlLang:"fr-CA"}],A=t=>String(t||"en").toLowerCase()==="fr"?"fr":"en";function F(){try{return A(localStorage.getItem(O))}catch(t){return"en"}}function q(t){let e=A(t);document.documentElement.setAttribute("data-lang",e),document.documentElement.setAttribute("lang",e==="fr"?"fr-CA":"en-CA")}async function at(t,{notifyAlways:e=!1}={}){var a,i;let n=A(t),o=document.documentElement.getAttribute("data-lang")||"en";try{localStorage.setItem(O,n)}catch(s){}if(o!==n&&q(n),(a=window.ThriveI18n)!=null&&a.setLangNoReload)try{await window.ThriveI18n.setLangNoReload(n)}catch(s){console.error("[i18n] setLangNoReload failed:",s)}if((i=window.i18next)!=null&&i.changeLanguage)try{await window.i18next.changeLanguage(n)}catch(s){console.warn("[i18n] i18next.changeLanguage failed:",s)}(e||o!==n)&&window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:n}}))}function U(){return document.querySelector(".nav.navbar-nav")}function L(t){let e=U();if(!e)return;e.querySelectorAll("li[data-lang-toggle]").forEach(i=>i.remove());let n=it.find(i=>i.code!==t);if(!n)return;let o=document.createElement("li");o.setAttribute("data-lang-toggle","true");let a=document.createElement("a");a.href="#",a.setAttribute("role","button"),a.setAttribute("aria-label",`Switch to ${n.label}`),a.dataset.toggleLang=n.code,a.textContent=n.label,o.appendChild(a),e.appendChild(o),e.dataset.langToggleBound||(e.addEventListener("click",i=>{let s=i.target.closest("[data-toggle-lang]");if(!s)return;i.preventDefault();let u=s.dataset.toggleLang;at(u,{notifyAlways:!0}),L(u)}),e.dataset.langToggleBound="1")}var k=null;function st(){if(k)return;let t=new MutationObserver(()=>{let e=U();e&&!e.querySelector("li[data-lang-toggle]")&&L(F())});t.observe(document.documentElement,{childList:!0,subtree:!0}),k=()=>t.disconnect()}function j(){var n;if(P)return;P=!0;let t=F();q(t),(n=window.i18next)!=null&&n.changeLanguage&&window.i18next.changeLanguage(t).catch(o=>console.warn("[i18n] initial i18next.changeLanguage failed:",o)),window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:t}}));let e=()=>{L(t),st()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}var c={lang:"en",catalogs:{},opts:null,observer:null,ready:!1,pending:[],isApplying:!1},$="preferredLang",ct=new Set(["aria-label","title","alt","placeholder","value","data-i18n-text","data-content","data-original-title"]),M=t=>String(t||"en").toLowerCase()==="fr"?"fr":"en";function B(t){let e=M(t);document.documentElement.setAttribute("data-lang",e),document.documentElement.setAttribute("lang",e==="fr"?"fr-CA":"en-CA"),window.dispatchEvent(new CustomEvent("langchange",{detail:{lang:e}}))}function E(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(n){return n.nodeValue&&n.nodeValue.trim()?1:2}}).nextNode()}function ut(t,e){return t===e?!0:t.replace(/\u00A0/g,"&nbsp;").trim()===e.replace(/\u00A0/g,"&nbsp;").trim()}function lt(t,e){let n=E(t);n?n.nodeValue!==e&&(n.nodeValue=e):t.textContent!==e&&(t.textContent=e)}var h=new Map,ft=60*1e3,mt="i18n:json:",dt=!1;function p(...t){dt&&console.log("[i18n json]",...t)}function gt(t){try{return JSON.parse(localStorage.getItem(t)||"null")}catch(e){return null}}function pt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){}}function yt(t){return mt+t}function ht(t,e){return typeof t=="number"&&Date.now()-t<e}async function x(t,{ttlMs:e=ft,retries:n=2}={}){if(h.has(t))return h.get(t);let o=yt(t),a=gt(o);if(a&&ht(a.ts,e)){p("HIT (persist)",{url:t,ageMs:Date.now()-a.ts});let s=Promise.resolve(a.data);return h.set(t,s),s}let i=(async()=>{let s;for(let u=0;u<=n;u++)try{p("FETCH",{url:t,attempt:u});let r=await fetch(t);if(r.status===429){let f=(u+1)*300;p("429 backoff",{url:t,delay:f}),await new Promise(d=>setTimeout(d,f));continue}if(!r.ok)throw new Error(`HTTP ${r.status} for ${t}`);let l=await r.json();return pt(o,{ts:Date.now(),data:l}),p("STORE (persist)",{url:t}),l}catch(r){if(s=r,u<n){let l=(u+1)*200;p("retry",{url:t,delay:l,error:String(r)}),await new Promise(f=>setTimeout(f,l))}}if(a&&a.data)return p("FALLBACK (stale)",{url:t,ageMs:Date.now()-a.ts}),a.data;throw s})();return h.set(t,i),i}var w=null;function H(t){return w||(w=x(t),w)}var S=new Map;async function V(t,e){if(S.has(e))return S.get(e);let n=(async()=>{let a=(await H(t))[`${e}.map`];if(!a)return null;let i=new URL(t,location.origin),s=new URL(a,i).toString();return x(s)})();return S.set(e,n),n}var C=new Map;async function wt(t,e,n){let o=await H(t),a=new URL(t,location.origin),i=(e||[]).map(u=>{let r=`${u}:${n}`;if(C.has(r))return C.get(r);let l=o[`${u}.${n}`];if(!l)return Promise.resolve({});let f=new URL(l,a).toString(),d=x(f);return C.set(r,d),d}),s=await Promise.all(i);return Object.assign({},...s)}function J(t){let e=new Map;if(!t)return e;for(let n of t.split(",").map(o=>o.trim()).filter(Boolean)){let[o,a]=n.split(":").map(i=>i.trim());o&&a&&e.set(o,a)}return e}function bt(t){return Array.from(t.entries()).sort(([e],[n])=>e>n?1:e<n?-1:0).map(([e,n])=>`${e}:${n}`).join(",")}function z(t,e=document){for(let n of t||[]){let{selector:o,type:a,attr:i,key:s}=n||{};if(!o||!s)continue;let u=e.querySelectorAll(o);u.length&&u.forEach(r=>{if(a==="text"||a==="html")r.getAttribute("data-i18n")!==s&&r.setAttribute("data-i18n",s),a==="html"&&r.setAttribute("data-i18n-html","true");else if(a==="attr"&&i){let l=J(r.getAttribute("data-i18n-attr"));l.set(i,s);let f=bt(l);r.getAttribute("data-i18n-attr")!==f&&r.setAttribute("data-i18n-attr",f)}})}}function vt(t,e){let n=t.getAttribute("data-i18n");if(n&&e[n]!=null){let i=String(e[n]),s=`${n}\xA7${c.lang}\xA7${i.length}`;if(t.dataset.i18nApplied!==s){if(t.hasAttribute("data-i18n-html"))ut(t.innerHTML,i)||(t.innerHTML=i);else{let u=i.replace(/&nbsp;/g,"\xA0"),r=E(t);(r?r.nodeValue:t.textContent)!==u&&lt(t,u)}t.dataset.i18nApplied=s}}let o=t.getAttribute("data-i18n-attr");if(!o)return;let a=J(o);for(let[i,s]of a){if(!ct.has(i)||e[s]==null)continue;let u=String(e[s]);if(i==="data-i18n-text"){let r=u.replace(/&nbsp;/g,"\xA0"),l=E(t);(l?l.nodeValue:"")!==r&&(l?l.nodeValue=r:t.insertBefore(document.createTextNode(r),t.firstChild));continue}(i==="title"||i==="aria-label"||i==="placeholder"||i==="value")&&(u=u.replace(/&nbsp;/g,"\xA0")),t.getAttribute(i)!==u&&t.setAttribute(i,u)}}function G(t,e=document){t&&e.querySelectorAll("[data-i18n],[data-i18n-attr]").forEach(n=>vt(n,t))}async function K(t){var i;if(!((i=c==null?void 0:c.opts)!=null&&i.manifestUrl))throw new Error("ThriveI18n not initialized: missing opts.manifestUrl");c.lang=M(t);try{localStorage.setItem($,c.lang)}catch(s){}let{manifestUrl:e,namespaces:n}=c.opts,o=await Promise.all(n.map(s=>V(e,s)));for(let s of o)Array.isArray(s)&&z(s,document);let a=await wt(e,n,c.lang);c.catalogs=a,c.isApplying=!0;try{G(a)}finally{c.isApplying=!1}}var T=!1,b=new Set;function W(t){!t||t.nodeType!==1||(b.add(t),T||(T=!0,queueMicrotask(At)))}async function At(){if(T=!1,!b.size)return;let t=Array.from(b);b.clear(),c.isApplying=!0;try{for(let e of t)for(let n of c.opts.namespaces){let o=await V(c.opts.manifestUrl,n);o&&z(o,e)}for(let e of t)G(c.catalogs,e)}finally{c.isApplying=!1}}async function I(t){if(c.opts=Object.assign({namespaces:["profile"],observeMutations:!0,manifestUrl:""},t||{}),!c.opts.manifestUrl)throw new Error("manifestUrl required");let e=M(localStorage.getItem($)||"en");B(e),await K(e),c.ready=!0,window.addEventListener("storage",n=>{n.key===$&&n.newValue&&n.newValue!==c.lang&&X(n.newValue)}),c.opts.observeMutations&&(c.observer&&c.observer.disconnect(),c.observer=new MutationObserver(n=>{if(!c.isApplying)for(let o of n)o.type==="childList"?o.addedNodes.forEach(a=>W(a)):o.type==="attributes"&&W(o.target)}),c.observer.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-attr","data-i18n-html"]}))}async function X(t){if(B(t),!c.ready){c.pending.push(t);return}await K(t)}function Lt(t){var e;return(e=c.catalogs[t])!=null?e:t}function St(t,e){return new Intl.NumberFormat(c.lang==="fr"?"fr-CA":"en-CA",e).format(t)}function Ct(t,e){let n=t instanceof Date?t:new Date(t);return new Intl.DateTimeFormat(c.lang==="fr"?"fr-CA":"en-CA",e).format(n)}function $t(){var t;return{lang:c.lang,ready:c.ready,hasObserver:!!c.observer,namespaces:((t=c.opts)==null?void 0:t.namespaces)||[],catalogKeys:Object.keys(c.catalogs).length}}typeof window!="undefined"&&(window.ThriveI18n={init:I,setLangNoReload:X,t:Lt,fmtNumber:St,fmtDate:Ct,__debug:$t,get ready(){return c.ready}});function Et(t,e){let n=e.toLowerCase();for(let[o,a]of t.searchParams.entries())if(o.toLowerCase()===n)return a;return null}function _(t=location.href){let e=typeof t=="string"?new URL(t,location.origin):t instanceof URL?t:new URL(location.href),o=(e.pathname||"/").replace(/\/{2,}/g,"/").replace(/^\/sandboxmicrosite(?=\/|$)/i,"")||"/",a=(Et(e,"section")||"").trim().toLowerCase(),i=new Set(["header"]),s=!0,u=new Set(["header","profile","login","community","networkMembers"]),r=function(f){if(!(!s||!f))for(var d=Array.isArray(f)?f:[f],m=0;m<d.length;m++){var g=d[m];g&&u.has(g)&&i.add(g)}};return(/^\/profile(?:\/|$)/i.test(o)||/^\/people(?:\/|$)/i.test(o))&&r("profile"),/^\/profile\/connections\/contacts(?:\/|$)/i.test(o)&&r("connections"),/^\/profile\/connections\/communities(?:\/|$)/i.test(o)&&r("communities"),/^\/profile\/connections\/communitiesnode(?:\/|$)/i.test(o)&&r("communitiesNode"),/^\/profile\/connections\/following-connections(?:\/|$)/i.test(o)&&r("following"),/^\/profile\/contributions\/contributions-summary(?:\/|$)/i.test(o)&&r("contribSummary"),/^\/profile\/contributions\/contributions-achievements(?:\/|$)/i.test(o)&&r("contribAchievements"),/^\/profile\/contributions\/contributions-list(?:\/|$)/i.test(o)&&r("contribList"),/^\/profile\/myaccount\/changepassword(?:\/|$)/i.test(o)&&r("accountChangePassword"),/^\/profile\/myaccount\/mysignature(?:\/|$)/i.test(o)&&r("accountSignature"),/^\/profile\/myaccount\/inbox(?:\/|$)/i.test(o)&&r("accountInbox"),/^\/profile\/myaccount\/my-settings(?:\/|$)/i.test(o)&&r({privacy:"accountSettingsPrivacy",email:"accountSettingsEmail",rssfeeds:"accountSettingsRss",subscriptions:"accountSettingsSubscriptions"}[a]),/^\/network\/members(?:\/|$)/i.test(o)&&r("networkMembers"),/^\/contactus(?:\/|$)/i.test(o)&&r("contact"),/^\/login(?:\/|$)/i.test(o)&&r("login"),/^\/participate\/postmessage(?:\/|$)/i.test(o)&&r("postMessage"),/^\/participate\/add-new-entry(?:\/|$)/i.test(o)&&r("addLibrary"),/^\/events\/calendar(?:\/|$)/i.test(o)&&r("eventsCalendar"),/^\/communities\/[^/]+(?:\/|$)/i.test(o)&&r("community"),/^\/communities\/mycommunities(?:\/|$)/i.test(o)&&i.add("communityMy"),/^\/communities(?:\/community-home)?\/invite-community(?:\/digestviewer)?(?:\/|$)/i.test(o)&&r("communityInvite"),/^\/communities\/community-home\/digestviewer(?:\/|$)/i.test(o)&&r("communityDigest"),/^\/communities\/community-home\/librarydocuments(?:\/|$)/i.test(o)&&r("communityLibrary"),/^\/communities\/community-home\/recent-community-events(?:\/|$)/i.test(o)&&r("communityEvents"),/^\/communities\/community-home\/community-members(?:\/|$)/i.test(o)&&r("communityMembers"),Array.from(i)}var Q=new Map,Y=null;function R(){return document.documentElement.getAttribute("data-lang")==="fr"?"fr":"en"}function N(t,e){Q.set(t,e)}function Tt(t){let e=location.pathname.replace(/\/+$/,"");return typeof t=="function"?!!t(location):e===String(t).replace(/\/+$/,"")}function Mt(){for(let[t,e]of Q)if(Tt(t))return e;return null}function Z(){clearTimeout(Y),Y=setTimeout(()=>{let t=Mt();t&&t()},0)}function tt(){let t=()=>Z();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t,{once:!0}):t(),window.addEventListener("langchange",()=>Z())}function et(t,e,n){function o(){try{return typeof R=="function"&&R()||"en"}catch(m){return"en"}}function a(m){return(m||"").replace(/\s+/g," ").trim()}function i(){if(o()==="fr"){var m=document.getElementById(t);if(m)for(var g=m.querySelectorAll("li"),v=0;v<g.length;v++){var y=g[v];if(y.dataset.i18nApplied!=="1"){var rt=a(y.textContent),D=e[rt];D&&(y.textContent=D,y.dataset.i18nApplied="1")}}}}var s=n&&document.getElementById(n)||document.body;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i();var u;if(window.MutationObserver){var r=function(){u&&u.disconnect(),u=new MutationObserver(i),u.observe(s,{childList:!0,subtree:!0,characterData:!0})};r()}if(window.Sys&&Sys.WebForms&&Sys.WebForms.PageRequestManager)try{var l=Sys.WebForms.PageRequestManager.getInstance();l.add_endRequest(function(){i(),u&&(u.disconnect(),u.observe(s,{childList:!0,subtree:!0,characterData:!0}))})}catch(m){}var f=8,d=setInterval(function(){i(),--f<=0&&clearInterval(d)},250)}var nt={"Large urban (100,000 or more)":"Grande zone urbaine (100\u2009000 ou plus)","Medium urban (30,000 to 99,999)":"Zone urbaine moyenne (30\u2009000 \xE0 99\u2009999)","Small urban (less than 30,000)":"Petite zone urbaine (moins de 30\u2009000)",Northern:"Nordique",Rural:"Rurale"};N("/profile",function(){et("MainCopy_ctl34_ulDemographicItems",nt,"MainCopy_ctl34_ContactDemographicUpdatePanel")});N("/people",function(){et("MainCopy_ctl34_ulDemographicItems",nt,"MainCopy_ctl34_ContactDemographicUpdatePanel")});N("/advisory-committee",function(){let e=document.querySelector("#PageTitleH1");if(!e)return;let n={en:"Meet the Resilient Futures Advisory Committee",fr:"Rencontrez le comit\xE9 consultatif de l\u2019initiative Un avenir r\xE9silient"},o=n[R()]||n.en;e.textContent.trim()!==o&&(e.textContent=o)});function ot(){j();let t=_();I({manifestUrl:"https://prospercanada.github.io/i18n-thrive/i18n/manifest.json",namespaces:t,observeMutations:!0}),tt()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ot,{once:!0}):ot();window.i18nThrive={pickNamespaces:_};})();
